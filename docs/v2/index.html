<!-- https://github.com/YamiOdymel/coffeescript -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=UTF-8">
<title>CoffeeScript 正體中文</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="canonical" href="https://coffeescript.tw">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="theme-color" content="#ffffff">
<meta property="og:site_name" content="CoffeeScript 正體中文">
<meta property="og:type" content="article">
<meta property="og:title" content="CoffeeScript 正體中文">
<meta property="og:description" content="CoffeeScript 是個能夠編譯成 JavaScript 的簡易語言。在那 Java-什麼鳥的深處中能夠探索到的是：JavaScript 最純潔且高尚的心靈。而 CoffeeScript 的存在正是將這完美的一面以最簡單的方式呈現。">
<meta property="og:url" content="https://coffeescript.tw">
<meta property="og:image" content="http://coffeescript.tw/og.png">
<meta property="og:image:secure_url" content="https://coffeescript.tw/og.png">

<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
<!-- The CoffeeScript logo font is Google’s Galada -->
<link href="https://fonts.googleapis.com/css?family=Alegreya+Sans:400,800|Lato:300,300i,400,700|Roboto+Mono:400,400i" rel="stylesheet" crossorigin="anonymous">
<link href="https://cdn.jsdelivr.net/npm/codemirror@5.37.0/lib/codemirror.css" rel="stylesheet" crossorigin="anonymous">
<style>
/* Adapted from https://github.com/FarhadG/code-mirror-themes/blob/master/themes/twilight.css and https://github.com/codemirror/CodeMirror/blob/master/theme/twilight.css */

/* CodeMirror general styling */

.CodeMirror,
.placeholder-code {
  /* https://codemirror.net/demo/resize.html */
  height: auto;
  background: transparent;
  font-family: 'Roboto Mono';
  font-weight: 400;
  line-height: 1.25;
  letter-spacing: 0.3px;
  color: #f8f8f8;
  /* Prevent mobile Safari from zooming in on our code editors; the code is 16px naturally, but somehow being explicit about it prevents the zooming */
  font-size: 16px;
}
@media (min-width: 768px) {
  .CodeMirror,
  .placeholder-code {
    font-size: 87.5%; /* Matching Bootstrap’s font size for code, which calculates to 14.4px */
  }
}
.CodeMirror-lines {
  padding: 0.5em 0;
}
.placeholder-code {
  padding: 0.5em 4px;
  margin-bottom: 1.37em;
  white-space: pre-wrap;
}
.CodeMirror pre,
pre.placeholder-code {
  line-height: 1.4em;
}
.CodeMirror-code:focus {
  outline: none;
}
div.CodeMirror-cursor {
  border-left: 3px solid #f8f8f8;
}
.CodeMirror-activeline-background {
  background: #ffffff08;
}
.CodeMirror-selected {
  background: #ddf0ff33;
}

/* Syntax highlighting */

.cm-keyword,
.placeholder-code .keyword {
  color: #cda869;
}
.cm-atom {
  color: #dad085;
}
.cm-number,
.cm-meta,
.placeholder-code .number,
.placeholder-code .built_in,
.placeholder-code .builtin-name,
.placeholder-code .literal,
.placeholder-code .type,
/*.placeholder-code .params,*/
.placeholder-code .meta,
.placeholder-code .link {
  color: #dad085;
}
.cm-def {
  color: #f8f8f8;
}
span.cm-variable-2,
span.cm-tag {
  color: #f8f8f8;
}
span.cm-variable-3,
span.cm-def,
span.cm-type {
  color: #f8f8f8;
}
.cm-operator,
.placeholder-code .punctuation,
.placeholder-code .symbol,
.placeholder-code .bullet,
.placeholder-code .addition,
.placeholder-code .operator {
  color: #cda869;
}
.cm-comment,
.placeholder-code .comment {
  font-style: italic;
  color: #5f5a60;
}
.cm-string,
.cm-string-2,
.placeholder-code .string {
  color: #8f9d6a;
}
.cm-property,
.placeholder-code .attribute {
  color: #dad085;
}
.cm-builtin {
  color: #cda869;
}
.cm-tag {
  color: #997643;
}
.cm-attribute {
  color: #d6bb6d;
}
.cm-header {
  color: #FF6400;
}
.cm-hr {
  color: #AEAEAE;
}
.cm-link {
  color: #ad9361;
  font-style: italic;
  text-decoration: none;
}
.cm-error {
  border-bottom: 1px solid rgba(142, 22, 22, 0.67);
}

/* Uneditable code blocks are inverted, so use darker versions of the above */

.uneditable-code-block code {
  padding: 0;
}

.uneditable-code-block .comment {
  font-style: italic;
  color: #837B85;
}
.uneditable-code-block .class,
.uneditable-code-block .function,
.uneditable-code-block .keyword,
.uneditable-code-block .reserved,
.uneditable-code-block .title {
  color: #534328;
}
.uneditable-code-block .string
.uneditable-code-block .value
.uneditable-code-block .inheritance
.uneditable-code-block .header {
  color: #3A4029;
}
.uneditable-code-block .variable,
.uneditable-code-block .literal,
.uneditable-code-block .tag,
.uneditable-code-block .regexp,
.uneditable-code-block .subst,
.uneditable-code-block .property {
  color: #474429;
}
.uneditable-code-block .number,
.uneditable-code-block .preprocessor,
.uneditable-code-block .built_in,
.uneditable-code-block .params,
.uneditable-code-block .constant {
  color: #474429;
}

html,
body {
  /* Prevent scroll on narrow devices */
  overflow-x: hidden;
}
body {
  /* Required for Scrollspy */
  position: relative;
  /* Push below header bar */
  margin-top: 3.5rem;
}

svg {
  width: auto;
  height: 100%;
}

a {
  color: #1b5e20;
  transition: 0.1s ease-in-out;
}
a:focus, a:hover, a:active {
  color: #388e3c;
  cursor: pointer;
  text-decoration: none;
}

button:focus, .navbar-dark .navbar-toggler:focus {
  outline: none;
  border: thin solid rgba(248, 243, 240, 0.3);
}

.bg-dark {
  background-color: #3e2723 !important;
}

.bg-ribbed-light {
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1 3"><path opacity=".03" fill="#000" d="M0 0h1v1H0z"/><path opacity=".005" fill="#000" d="M0 1h1v2H0z"/></svg>');
  background-size: 1px 3px;
}
.bg-ribbed-dark {
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1 3"><path opacity=".2" fill="#000" d="M0 0h1v1H0z"/><path opacity=".15" fill="#000" d="M0 1h1v2H0z"/></svg>');
  background-size: 1px 3px;
}


/*
 * Header
 */
.site-navbar {
  height: 3.5rem;
  font-family: 'Lato';
  font-weight: 400;
  font-size: 1.1em;
}

.navbar-brand {
  height: 2.2em;
  margin-right: 1em;
}

.navbar-dark path {
  fill: #fff;
}

.navbar-nav .nav-item {
  margin-left: 0.6em;
  margin-right: 0.6em;
  border-radius: 0.4em;
}
.navbar-nav .nav-item:hover,
.navbar-nav .nav-item:active,
.navbar-nav .nav-item.show {
  background-color: #4e342e;
}

.navbar-toggler {
  transition: all 0.1s ease-in-out;
}


/*
 * Layout; based on https://codepen.io/Sphinxxxx/pen/WjwbEO
 */
.main-row {
  height: calc(100vh - 3.5rem);
}

/*
 * Sidebar
 */

.sidebar {
  /* Scrollable contents if viewport is shorter than content */
  overflow-y: auto;
  overflow-x: hidden;
  left: 0;
  bottom: 0;
  z-index: 1000;
  padding: 0;
  background-color: #efebe9;
  border-right: 1px solid #efebe9;
}
.sidebar::-webkit-scrollbar {
  display: none;
}
@media screen and (max-width: 991px) {
  .sidebar {
    position: fixed;
    top: 3.5em;
    height: calc(100% - 3.5rem);
    left: -100%;
    transition: 0.25s left ease-in-out;
  }
  .sidebar.show {
    left: 0;
  }
}
@media (min-width: 992px) {
  .sidebar {
    flex: 0 0 auto;
  }
}

.contents {
  padding: 0.5em 0 0.5em 0.5em;
  font-family: 'Alegreya Sans';
  font-weight: 400;
  font-size: 1.2em;
  align-items: normal;
}

.contents .nav .nav {
  margin-left: 1em;
  font-size: 0.9em;
}

.contents .nav-link {
  padding: 0.2em 0.7em;
}

.contents .nav-link.active,
.contents .nav-link.active a:hover,
.contents .nav-link.active a:focus {
  font-weight: 800;
}


/*
 * Main content
 */

.main {
  max-width: 100%;
  padding: 1.3em;
}
@media (min-width: 992px) {
  .main {
    flex: 1 1 auto;
    overflow: auto;
    padding-right: 2em;
    padding-left: 2em;
  }
}

.title-logo {
  width: 30rem;
  margin: 3rem auto;
}
.title-logo path {
  fill: #2f2625;
}

.main p, .main li, .main td, .main th {
  font-family: Lato;
  font-weight: 300;
  font-size: 1.1em;
  line-height: 1.7;
}
.main blockquote {
  font-size: 1.1em;
}
.main li p, .main li li, .main li blockquote {
  font-size: 1em;
}
@media (min-width: 768px) {
  .main p, .main li, .main td, .main th, .main blockquote {
    font-size: 1.2em;
  }
}
.main td {
  vertical-align: top;
  padding: 0.3em 0;
}
.main strong, .main th {
  font-weight: 700;
}
.main a {
  border-bottom: 2px solid transparent;
  font-weight: 400;
}
.main a:focus, .main a:hover, .main a:active {
  border-bottom: 2px solid rgba(56, 142, 60, 0.2);
}
.main blockquote pre {
  background-color: #f8f3f0;
  color: #2f2625;
  border-radius: .3em;
  padding: 0.4em 0.6em;
}

p, blockquote, table, .code-example {
  margin-bottom: 1.1em;
}
.main li {
  margin-bottom: 0.6em;
}

code, td code {
  white-space: nowrap;
  padding: 2px 8px;
}
pre code {
  white-space: pre; /* We want newlines to be newlines in code blocks */
}

h2, h3, h4 {
  margin-top: 1.3em;
  margin-bottom: 0.6em;
  font-family: 'Alegreya Sans';
}
h2 {
  font-weight: 800;
}
h3, h4, h2 time {
  font-weight: 400;
}

@media (min-width: 1200px) {
  .main > header, .main section > h2, .main section > h3, .main section > h4, .main section > p, .main section > blockquote, .main section > ul, .main section > table {
    max-width: 80%;
  }
}

code, button {
  font-family: 'Roboto Mono';
  font-weight: 400;
}
code, a > code {
  background-color: #f8f3f0;
}
code {
  color: #2f2625;
}


/*
 * Chrome around code examples; see code.css for the styling of the code blocks themselves
 */

textarea {
  position: absolute;
  left: -99999px; /* Hide off canvas, while still remaining visible */
}

.code-example {
  background-color: #2f2625;
  padding: 1em;
  border-radius: 0.3em;
  margin-bottom: 1em;
}

.javascript-output-column {
  border-left: 1px solid rgba(255, 255, 255, 0.2);
}

.btn-primary {
  background-color: #69f0ae;
  color: #0b140f;
  border-color: #53d88f;
  transition: 0.2s ease-in-out;
  min-width: 3.125rem;
}
.btn-primary:active, .btn-primary:focus, .btn-primary:hover, .btn-primary:active:hover, .btn-primary:active:focus {
  background-color: #61fea8;
  color: #060a08;
  border-color: #4de486;
  outline: 0;
}

.play-button {
  height: 1em;
  width: 1em;
}

.javascript-output-column .CodeMirror-cursor {
  /* https://github.com/codemirror/CodeMirror/issues/2568 */
  display: none;
}

/*
 * Try CoffeeScript
 */
.try-coffeescript {
  position: fixed;
  height: calc(100% - 3.5rem);
  top: 3.5rem;
  left: 0;
  right: 0;
  opacity: 0;
  transition: opacity 0.15s ease-in-out;
  z-index: -1001;
  background-color: #2f2625;
}
.try-coffeescript.show {
  opacity: 1;
  z-index: 1001;
}

.try-coffeescript .CodeMirror {
  height: calc(100vh - 7rem);
  cursor: text;
}

.try-coffeescript .code-column {
  overflow: hidden;
  background-color: #2f2625;
  color: #2f2625;
}

@media screen and (max-width: 767px) {
  .try-coffeescript .code-column {
    height: calc(50vh - 0.5 * 3.5rem);
  }
}
@media screen and (min-width: 768px) {
  .try-coffeescript .code-column {
    padding-bottom: 100%;
    margin-bottom: -100%;
  }
}

.try-coffeescript button svg {
  height: 1em;
  transform: scale(1.3) translateY(0.1em);
  fill: #0b140f;
}

@media screen and (max-width: 767px) {
  .try-coffeescript .try-buttons {
    position: absolute;
    bottom: 1em;
    z-index: 1002;
  }
}

</style>

</head>
<body>

<nav class="navbar navbar-expand-lg fixed-top navbar-dark bg-dark bg-ribbed-dark site-navbar">
  <a class="navbar-brand" href="#" data-close="try" data-action="scroll-to-top"><svg xmlns="http://www.w3.org/2000/svg" viewBox="-22 347 566 100">
  <title>
    CoffeeScript Logo
  </title>
  <path d="M21.7 351.1c.1.6-.2 1.1-1.2 1.6-1.3-.7-4.1-1.1-6.4-.9-2.5.2-4.6 1-4.3 2.7.4 1.7 2.8 2.7 7.1 2.3 10.5-.9 10.4-8 25.8-9.4 12-1.1 18.7 2.6 19.6 7.1.7 3.5-2.2 6.9-10.9 7.6-7.7.7-12.2-1.4-12.6-3.5-.2-1.1.4-2.7 4.1-3.1.4 1.7 2.5 3.5 7.5 3 3.6-.3 6.6-1.6 6.2-3.6-.4-2.1-4.2-3.3-10.2-2.8-12.2 1.1-15.2 7.8-25.6 8.7-7.4.7-13.4-2-14.2-6-.3-1.5-.3-5 7.5-5.7 4-.3 7.2.4 7.6 2zm-39 41.8c-3.4 4.3-4.9 9.3-4.6 14.2.3 4.9 2.7 8.9 6.5 12 4 3.1 8.3 4 13.2 3.1 1.9-.3 4-1.3 5.9-1.9-4 0-7.4-1.3-10.8-4-3.7-2.7-6.2-6.5-6.8-11.1-.9-4.3 0-8.3 2.4-11.8 2.7-3.4 6.2-5.3 10.8-5.9 4.6-.3 8.6.9 12.6 3.7-.9-1.3-2.2-2.2-3.4-3.4-4-2.7-8.3-4-13.6-2.7-4.8 1-8.8 3.5-12.2 7.8zm53.6-23.1c-12.9 0-24.4-1.3-32.7-3.1-8.9-2.2-13.6-4.6-13.6-7.7 0-1.3.6-2.4 2.4-3.7-5.6 2.2-8.6 4-8.6 6.8.3 3.1 5.3 6.2 15.5 8.6 9.6 2.4 21.9 3.7 36.7 3.7 15.1 0 27.1-1.3 36.7-3.7 10.2-2.4 15.1-5.6 15.1-8.6 0-2.2-2.2-4.3-6.2-5.9.9.6 1.6 1.6 1.6 2.7 0 3.1-4.6 5.6-13.9 7.7-8.6 1.9-19.6 3.2-33 3.2zm36.8 8.6c-9.6 2.2-21.9 3.7-36.7 3.7-15.1 0-27.4-1.6-37-3.7-8.6-2.2-13.2-4.6-14.8-7.1 1.6 10.8 5.3 21 10.2 30 3.7 5.6 7.4 10.5 11.1 15.8 1.6 3.1 2.7 6.2 3.4 9.3 2.4 3.4 5.9 5.6 10.2 6.8 5.3 1.9 10.8 2.7 16.4 2.4h.6c5.6.3 11.5-.6 16.9-2.4 4-1.3 7.4-3.4 9.9-6.8h.3c.6-3.1 1.6-6.2 3.1-9.3 3.7-5.3 7.4-10.2 11.1-15.8 4.9-8.9 8.3-19.1 10.2-30-2 2.8-6.6 5.2-14.9 7.1zm106.2 30.1c-4.8 12.1-17.6 16.9-25.9 16.9-13.4 0-19.9-6-19.9-22.3 0-16.5 7.9-47.3 31.7-47.3 8.5 0 15.2 3.3 15.2 12.1 0 4.8-1.8 8.3-6.4 8.3-1.5 0-3.4-.4-5.2-2.4 2.2-1.1 4.2-4.9 4.2-8.3 0-2.9-1.5-5.6-5.6-5.6-10 0-18.9 23.9-18.9 42.4 0 8.3 2.2 14.2 10.9 14.2 7.1 0 13.5-3.4 17.7-9.1l2.2 1.1zm32.9-16.3c.4.2.7.2 1 .2 4.2 0 10.1-2.7 14-5.5l.8 2.4c-3.4 3.7-9.5 6.5-16.1 7.5-1.5 16.8-10.6 27.3-21.7 27.3-8.4 0-14.5-4-14.5-14.4 0-10.5 6.2-32.2 24.9-32.2 7.8.3 11.6 5.3 11.6 14.7zm-7.7 5c-1.9-.5-2.4-2-2.4-3.8 0-2.5 1.2-4.2 2.8-4.9-.2-3.8-1.1-5.3-3.4-5.3-6.5 0-12 16.6-12 25.6 0 6 1.2 7.3 4.6 7.3 4.2.1 8.9-8 10.4-18.9zm-6.6 39.7c0-8.3 7.1-11 15.8-13.6l10.9-51.9c2.7-13 10.6-15.5 16.5-15.5 4.1 0 8 2.2 9.7 5.7 3.6-4.6 8.4-5.7 12.4-5.7 5.6 0 10.8 3.9 10.8 9.8 0 1.5-.1 2.6-.3 3.7h-4.3c.1-.9.2-1.7.2-2.4 0-2.1-1.7-3.1-3.4-3.1-2 0-4.8 1.1-6.2 7.1l-1.7 7.4h9.1l-.8 3.6h-9l-10.3 49.1c-2.7 13-10.6 15.5-16.5 15.5-5.2 0-8.3-2.3-9.8-5.7-3.5 4.6-8.3 5.7-12.3 5.7-5.6.1-10.8-3.8-10.8-9.7zm9.1 1.8c1.9 0 4.2-1.8 5.4-7.1l1.1-5.3c-5.7 2-10.1 4.4-10.1 9.4 0 1.2 1.7 3 3.6 3zm21.7 0c1.9 0 4.2-1.8 5.4-7.1l2.2-10.4-9.4 1.8-1.8 8.3c-.5 2.1-1.1 4-1.8 5.6.9 1.3 3 1.8 5.4 1.8zm-1.4-18l9.4-1.7 7.7-36.8h-9l-8.1 38.5zm16.6-56.7c-2 0-4.8 1.1-6.2 7.1l-1.7 7.4h9l2.1-9.5c.2-.7.2-1.3.2-2 .1-2-1.5-3-3.4-3zm37.9 53c7.1 0 11.6-4 16.1-9.2h3.1c-5.2 8.3-12.9 16.8-25 16.8-8.5 0-14.2-4.2-14.2-14.5 0-10.5 5.9-32.3 24.6-32.3 8.1 0 10 4.2 10 8.7 0 10.5-10 18.5-20.9 19.2-.1 1.3-.2 2.5-.2 3.6 0 6.2 2.2 7.7 6.5 7.7zm5.3-34.4c-4.6 0-9.1 9.7-10.9 18.7 7-.5 13.2-7.4 13.2-15 0-2.2-.5-3.7-2.3-3.7zm28.6 33.4c3.4 0 7.8-2.3 10.8-4.8-2 10.4-8.4 13.4-15.8 13.4-8.4 0-14.1-4.2-14.1-14.5 0-10.5 5.9-32.3 24.6-32.3 8.1 0 10 4.2 10 8.7 0 10.6-10 18.5-20.9 19.2-.1.9-.2 2-.2 2.7 0 5.7 2.5 7.6 5.6 7.6zm6.2-33.4c-4.5 0-9.1 10.1-11 18.7 7.1-.4 13.3-7.3 13.3-15 0-2.2-.6-3.7-2.3-3.7zm51.3-6.7c-1.7 0-3-.6-4.2-1.9 2.4-1.5 4.1-4.8 4.1-7.8 0-3.1-1.8-6.1-6.8-6.1s-8.3 2.8-8.3 8.2c0 13.3 20.5 15.2 20.5 34.8 0 15.3-12.3 22.7-25.6 22.7-10.4 0-19.3-4.5-19.3-15.7 0-9.8 7-14.9 13.3-14.9 3.1 0 7.7 1.3 8 6-4.9 0-10.7 2.3-10.7 8.5 0 4.5 2.9 8.7 8.7 8.7 6.1 0 10.6-4.4 10.6-12 0-15.6-18.6-21.1-18.6-34.5 0-9.5 9.3-16.3 21-16.3 4.3 0 14.6.9 14.6 10.9.1 5.5-2.8 9.4-7.3 9.4zm36.2 10.3c0-2.3-.8-3.7-2.5-3.7-5.7 0-11.7 16.6-11.7 26.7 0 6.2 2.2 7.6 6.6 7.6 7.1 0 11.6-4 16.1-9.2h3.1c-5.2 8.3-12.9 16.8-25 16.8-8.5 0-14.2-4.2-14.2-14.5 0-10.6 6-32.3 24.5-32.3 8.1 0 10.1 4.2 10.1 8.3 0 4.4-2.2 6.7-4.8 6.7-1 0-2.1-.4-3.1-1.1.5-1.9.9-3.6.9-5.3zm27.7-7.6l-1.2 5.7c3.1-2.7 6.7-5.7 11-5.7 4.1 0 6.3 3.3 6.3 6.9 0 3.1-2.1 6.7-6.6 6.7-5.1 0-2.5-6-5.3-6-2.7 0-4.4 1.4-6.7 3.4l-7.2 34.6h-13.1l9.6-45.4 13.2-.2zm34.2 0l-6.6 30.9c-.3 1.2-.4 2.1-.4 2.9 0 2.5 1.2 3.3 3.7 3.3 3.5 0 6.9-3.4 8.1-8h3.8c-5.2 14.8-14.2 16.8-19.1 16.8-5.5 0-9.7-3.2-9.7-10.9 0-1.8.3-3.7.7-5.9l6.2-29.2 13.3.1zm-4.1-19.4c4 0 7.2 3.2 7.2 7.2s-3.2 7.1-7.2 7.1-7.1-3.1-7.1-7.1c-.1-4 3.2-7.2 7.1-7.2zm29.1 16l-1.5 6.9c2.6-2.3 6.1-3.9 10.7-3.9 6.2 0 11.1 3.5 11.1 14.4 0 12.2-4.7 32.1-22.3 32.1-4.5 0-6.8-1.6-7.7-3.2l-4.7 22.1-13.7 3.2 15.2-71.5 12.9-.1zm7.8 17c0-7-2.9-7.5-4.5-7.5-2 0-4.5 1.6-6.3 4.4l-5.4 25.5c.4 1 1.4 2.1 3.4 2.1 9.7 0 12.8-15.9 12.8-24.5zm27.8 17.3c-.3 1.1-.5 2.2-.5 3.1 0 1.9.7 3.2 3.1 3.2.7 0 1.7 0 2.4-.3-2.5 7.8-6.6 8.9-9.6 8.9-6.4 0-9.1-4.4-9.1-10.3 0-1.6.2-3.1.6-4.8l5.8-27.2h-3l.7-3.6h3L528 366l13.4-1.9s-1.4 6.2-3.1 14.4h5.5l-.7 3.6h-5.5l-5.7 27.4z"></path>
</svg>
</a>
  <button class="navbar-toggler" type="button" data-toggle="offcanvas" data-close="try" aria-label="Toggle sidebar">
    <span class="navbar-toggler-icon"></span>
  </button>

  <nav class="collapse navbar-collapse">
    <div class="navbar-nav mr-auto d-none d-lg-flex">
      <a href="#try" id="try-link" class="nav-item nav-link" data-toggle="try">嘗試 CoffeeScript</a>
      <a href="#language" class="nav-item nav-link" data-close="try">語言概要</a>
      <a href="#resources" class="nav-item nav-link" data-close="try">資源</a>
      <a href="https://github.com/jashkenas/coffeescript/" class="nav-item nav-link" data-close="try">GitHub
        </a>
    </div>
  </nav>
</nav>


<aside id="try" class="try-coffeescript container-fluid" data-example="try">
  <div class="row">
    <div class="col-md-6 code-column bg-ribbed-dark coffeescript-input-column">
      <textarea class="coffeescript-input" id="try-coffeescript-coffee">alert 'Hello CoffeeScript!'</textarea>
    </div>
    <div class="col-md-6 code-column bg-ribbed-dark javascript-output-column">
      <textarea class="javascript-output" id="try-coffeescript-js">alert('Hello CoffeeScript!');</textarea>
    </div>
  </div>
  <div class="row">
    <div class="col text-right try-buttons">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="try-coffeescript" data-run="true"><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</button>&emsp;
    </div>
  </div>
</aside>


<div class="container-fluid" id="top">
  <div class="row flex-nowrap main-row">
    <nav class="sidebar bg-ribbed-light">
      <nav id="contents" class="navbar contents">
  <nav class="nav flex-column">
    <a href="#try" class="nav-link d-md-none" data-action="sidebar-nav" data-toggle="try">嘗試 CoffeeScript</a>
    <a href="#introduction" class="nav-link" data-action="sidebar-nav">介紹</a>
    <a href="#overview" class="nav-link" data-action="sidebar-nav">概觀</a>
    <a href="#coffeescript-2" class="nav-link" data-action="sidebar-nav">CoffeeScript 2</a>
    <nav class="nav flex-column">
      <a href="#whats-new-in-coffeescript-2" class="nav-link" data-action="sidebar-nav">CoffeeScript 2 有什麼新東西？</a>
      <a href="#compatibility" class="nav-link" data-action="sidebar-nav">相容性</a>
    </nav>
    <a href="#installation" class="nav-link" data-action="sidebar-nav">安裝方法</a>
    <a href="#usage" class="nav-link" data-action="sidebar-nav">使用方式</a>
    <nav class="nav flex-column">
      <a href="#cli" class="nav-link" data-action="sidebar-nav">指令列</a>
      <a href="#nodejs-usage" class="nav-link" data-action="sidebar-nav">Node.js</a>
      <a href="#transpilation" class="nav-link" data-action="sidebar-nav">轉譯介面</a>
    </nav>
    <a href="#language" class="nav-link" data-action="sidebar-nav">語言概要</a>
      <nav class="nav flex-column">
        <a href="#functions" class="nav-link" data-action="sidebar-nav">函式</a>
        <a href="#strings" class="nav-link" data-action="sidebar-nav">字串</a>
        <a href="#objects-and-arrays" class="nav-link" data-action="sidebar-nav">物件與陣列</a>
        <a href="#comments" class="nav-link" data-action="sidebar-nav">註釋</a>
        <a href="#lexical-scope" class="nav-link" data-action="sidebar-nav">有效範圍和變數安全性</a>
        <a href="#conditionals" class="nav-link" data-action="sidebar-nav">If、Else、Unless 與條件判斷式</a>
        <a href="#splats" class="nav-link" data-action="sidebar-nav">變參、其餘與展開運算子</a>
        <a href="#loops" class="nav-link" data-action="sidebar-nav">迴圈與推導</a>
        <a href="#slices" class="nav-link" data-action="sidebar-nav">陣列切片與範圍</a>
        <a href="#expressions" class="nav-link" data-action="sidebar-nav">所有東西都是表達式</a>
        <a href="#operators" class="nav-link" data-action="sidebar-nav">運算子與歧義</a>
        <a href="#existential-operator" class="nav-link" data-action="sidebar-nav">存在運算子</a>
        <a href="#destructuring" class="nav-link" data-action="sidebar-nav">解構賦值</a>
        <a href="#chaining" class="nav-link" data-action="sidebar-nav">函式呼叫鏈</a>
        <a href="#fat-arrow" class="nav-link" data-action="sidebar-nav">有界（胖箭頭）函式</a>
        <a href="#generators" class="nav-link" data-action="sidebar-nav">產生器函式</a>
        <a href="#async-functions" class="nav-link" data-action="sidebar-nav">非同步函式</a>
        <a href="#classes" class="nav-link" data-action="sidebar-nav">類別</a>
        <a href="#prototypal-inheritance" class="nav-link" data-action="sidebar-nav">原型鏈繼承</a>
        <a href="#switch" class="nav-link" data-action="sidebar-nav">Switch 條件判斷式與例外處理</a>
        <a href="#comparisons" class="nav-link" data-action="sidebar-nav">比較鏈</a>
        <a href="#regexes" class="nav-link" data-action="sidebar-nav">正規表達式區塊</a>
        <a href="#tagged-template-literals" class="nav-link" data-action="sidebar-nav">模板字串</a>
        <a href="#modules" class="nav-link" data-action="sidebar-nav">模組系統</a>
        <a href="#embedded" class="nav-link" data-action="sidebar-nav">嵌入式 JavaScript</a>
        <a href="#jsx" class="nav-link" data-action="sidebar-nav">JSX</a>
      </nav>
    <a href="#type-annotations" class="nav-link" data-action="sidebar-nav">型態註解</a>
    <a href="#literate" class="nav-link" data-action="sidebar-nav">文學式 CoffeeScript</a>
    <a href="#source-maps" class="nav-link" data-action="sidebar-nav">原始碼映射表</a>
    <a href="#cake" class="nav-link" data-action="sidebar-nav">Cake 與 Cakefiles</a>
    <a href="#scripts" class="nav-link" data-action="sidebar-nav"><code>"text/coffeescript"</code> 腳本標籤</a>
    <a href="test.html" class="nav-link" data-action="sidebar-nav">瀏覽器測試</a>
    <a href="#resources" class="nav-link" data-action="sidebar-nav">資源</a>
      <nav class="nav flex-column">
        <a href="#books" class="nav-link" data-action="sidebar-nav">書籍</a>
        <a href="#screencasts" class="nav-link" data-action="sidebar-nav">影片教學</a>
        <a href="#examples" class="nav-link" data-action="sidebar-nav">範例</a>
        <a href="#chat" class="nav-link" data-action="sidebar-nav">網路聊天</a>
        <a href="#annotated-source" class="nav-link" data-action="sidebar-nav">已註解原始碼</a>
        <a href="#contributing" class="nav-link" data-action="sidebar-nav">貢獻</a>
      </nav>
    <a href="https://github.com/jashkenas/coffeescript/" class="nav-item nav-link d-md-none" data-action="sidebar-nav">GitHub</a>
    <a href="#unsupported" class="nav-link" data-action="sidebar-nav">不支援的 ECMAScript 功能</a>
      <nav class="nav flex-column">
        <a href="#unsupported-let-const" class="nav-link" data-action="sidebar-nav"><code>let</code> 與 <code>const</code></a>
        <a href="#unsupported-named-functions" class="nav-link" data-action="sidebar-nav">命名函式與函式定義</a>
        <a href="#unsupported-get-set" class="nav-link" data-action="sidebar-nav"><code>get</code> 與 <code>set</code> 關鍵字縮寫語法</a>
      </nav>
    <a href="#breaking-changes" class="nav-link" data-action="sidebar-nav">從 CoffeeScript 1.x 升級的不相容差異</a>
      <nav class="nav flex-column">
        <a href="#breaking-changes-fat-arrow" class="nav-link" data-action="sidebar-nav">有界（胖箭頭）函式</a>
        <a href="#breaking-changes-default-values" class="nav-link" data-action="sidebar-nav">函式參數與物件解構預設值</a>
        <a href="#breaking-changes-bound-generator-functions" class="nav-link" data-action="sidebar-nav">有界產生器函式</a>
        <a href="#breaking-changes-classes" class="nav-link" data-action="sidebar-nav">類別</a>
        <a href="#breaking-changes-super-this" class="nav-link" data-action="sidebar-nav"><code>super</code> 和 <code>this</code></a>
        <a href="#breaking-changes-super-extends" class="nav-link" data-action="sidebar-nav"><code>super</code> 和 <code>extends</code></a>
        <a href="#breaking-changes-jsx-and-the-less-than-and-greater-than-operators" class="nav-link" data-action="sidebar-nav">JSX 和 <code>&lt;</code> 與 <code>&gt;</code> 運算子</a>
        <a href="#breaking-changes-literate-coffeescript" class="nav-link" data-action="sidebar-nav">文學式 CoffeeScript 解析</a>
        <a href="#breaking-changes-argument-parsing-and-shebang-lines" class="nav-link" data-action="sidebar-nav">參數解析與井驚嘆號 <code>#!</code> 行列</a>
      </nav>
    <a href="#changelog" class="nav-link" data-action="sidebar-nav">變更日誌</a>
    <a href="https://coffeescript.org/v1/" class="nav-link" data-action="sidebar-nav">1.x 舊版本文件</a>
  </nav>
</nav>

    </nav>
    <main class="main">
      <header class="d-none d-lg-block">
        <p class="title-logo">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="-22 347 566 100">
  <title>
    CoffeeScript Logo
  </title>
  <path d="M21.7 351.1c.1.6-.2 1.1-1.2 1.6-1.3-.7-4.1-1.1-6.4-.9-2.5.2-4.6 1-4.3 2.7.4 1.7 2.8 2.7 7.1 2.3 10.5-.9 10.4-8 25.8-9.4 12-1.1 18.7 2.6 19.6 7.1.7 3.5-2.2 6.9-10.9 7.6-7.7.7-12.2-1.4-12.6-3.5-.2-1.1.4-2.7 4.1-3.1.4 1.7 2.5 3.5 7.5 3 3.6-.3 6.6-1.6 6.2-3.6-.4-2.1-4.2-3.3-10.2-2.8-12.2 1.1-15.2 7.8-25.6 8.7-7.4.7-13.4-2-14.2-6-.3-1.5-.3-5 7.5-5.7 4-.3 7.2.4 7.6 2zm-39 41.8c-3.4 4.3-4.9 9.3-4.6 14.2.3 4.9 2.7 8.9 6.5 12 4 3.1 8.3 4 13.2 3.1 1.9-.3 4-1.3 5.9-1.9-4 0-7.4-1.3-10.8-4-3.7-2.7-6.2-6.5-6.8-11.1-.9-4.3 0-8.3 2.4-11.8 2.7-3.4 6.2-5.3 10.8-5.9 4.6-.3 8.6.9 12.6 3.7-.9-1.3-2.2-2.2-3.4-3.4-4-2.7-8.3-4-13.6-2.7-4.8 1-8.8 3.5-12.2 7.8zm53.6-23.1c-12.9 0-24.4-1.3-32.7-3.1-8.9-2.2-13.6-4.6-13.6-7.7 0-1.3.6-2.4 2.4-3.7-5.6 2.2-8.6 4-8.6 6.8.3 3.1 5.3 6.2 15.5 8.6 9.6 2.4 21.9 3.7 36.7 3.7 15.1 0 27.1-1.3 36.7-3.7 10.2-2.4 15.1-5.6 15.1-8.6 0-2.2-2.2-4.3-6.2-5.9.9.6 1.6 1.6 1.6 2.7 0 3.1-4.6 5.6-13.9 7.7-8.6 1.9-19.6 3.2-33 3.2zm36.8 8.6c-9.6 2.2-21.9 3.7-36.7 3.7-15.1 0-27.4-1.6-37-3.7-8.6-2.2-13.2-4.6-14.8-7.1 1.6 10.8 5.3 21 10.2 30 3.7 5.6 7.4 10.5 11.1 15.8 1.6 3.1 2.7 6.2 3.4 9.3 2.4 3.4 5.9 5.6 10.2 6.8 5.3 1.9 10.8 2.7 16.4 2.4h.6c5.6.3 11.5-.6 16.9-2.4 4-1.3 7.4-3.4 9.9-6.8h.3c.6-3.1 1.6-6.2 3.1-9.3 3.7-5.3 7.4-10.2 11.1-15.8 4.9-8.9 8.3-19.1 10.2-30-2 2.8-6.6 5.2-14.9 7.1zm106.2 30.1c-4.8 12.1-17.6 16.9-25.9 16.9-13.4 0-19.9-6-19.9-22.3 0-16.5 7.9-47.3 31.7-47.3 8.5 0 15.2 3.3 15.2 12.1 0 4.8-1.8 8.3-6.4 8.3-1.5 0-3.4-.4-5.2-2.4 2.2-1.1 4.2-4.9 4.2-8.3 0-2.9-1.5-5.6-5.6-5.6-10 0-18.9 23.9-18.9 42.4 0 8.3 2.2 14.2 10.9 14.2 7.1 0 13.5-3.4 17.7-9.1l2.2 1.1zm32.9-16.3c.4.2.7.2 1 .2 4.2 0 10.1-2.7 14-5.5l.8 2.4c-3.4 3.7-9.5 6.5-16.1 7.5-1.5 16.8-10.6 27.3-21.7 27.3-8.4 0-14.5-4-14.5-14.4 0-10.5 6.2-32.2 24.9-32.2 7.8.3 11.6 5.3 11.6 14.7zm-7.7 5c-1.9-.5-2.4-2-2.4-3.8 0-2.5 1.2-4.2 2.8-4.9-.2-3.8-1.1-5.3-3.4-5.3-6.5 0-12 16.6-12 25.6 0 6 1.2 7.3 4.6 7.3 4.2.1 8.9-8 10.4-18.9zm-6.6 39.7c0-8.3 7.1-11 15.8-13.6l10.9-51.9c2.7-13 10.6-15.5 16.5-15.5 4.1 0 8 2.2 9.7 5.7 3.6-4.6 8.4-5.7 12.4-5.7 5.6 0 10.8 3.9 10.8 9.8 0 1.5-.1 2.6-.3 3.7h-4.3c.1-.9.2-1.7.2-2.4 0-2.1-1.7-3.1-3.4-3.1-2 0-4.8 1.1-6.2 7.1l-1.7 7.4h9.1l-.8 3.6h-9l-10.3 49.1c-2.7 13-10.6 15.5-16.5 15.5-5.2 0-8.3-2.3-9.8-5.7-3.5 4.6-8.3 5.7-12.3 5.7-5.6.1-10.8-3.8-10.8-9.7zm9.1 1.8c1.9 0 4.2-1.8 5.4-7.1l1.1-5.3c-5.7 2-10.1 4.4-10.1 9.4 0 1.2 1.7 3 3.6 3zm21.7 0c1.9 0 4.2-1.8 5.4-7.1l2.2-10.4-9.4 1.8-1.8 8.3c-.5 2.1-1.1 4-1.8 5.6.9 1.3 3 1.8 5.4 1.8zm-1.4-18l9.4-1.7 7.7-36.8h-9l-8.1 38.5zm16.6-56.7c-2 0-4.8 1.1-6.2 7.1l-1.7 7.4h9l2.1-9.5c.2-.7.2-1.3.2-2 .1-2-1.5-3-3.4-3zm37.9 53c7.1 0 11.6-4 16.1-9.2h3.1c-5.2 8.3-12.9 16.8-25 16.8-8.5 0-14.2-4.2-14.2-14.5 0-10.5 5.9-32.3 24.6-32.3 8.1 0 10 4.2 10 8.7 0 10.5-10 18.5-20.9 19.2-.1 1.3-.2 2.5-.2 3.6 0 6.2 2.2 7.7 6.5 7.7zm5.3-34.4c-4.6 0-9.1 9.7-10.9 18.7 7-.5 13.2-7.4 13.2-15 0-2.2-.5-3.7-2.3-3.7zm28.6 33.4c3.4 0 7.8-2.3 10.8-4.8-2 10.4-8.4 13.4-15.8 13.4-8.4 0-14.1-4.2-14.1-14.5 0-10.5 5.9-32.3 24.6-32.3 8.1 0 10 4.2 10 8.7 0 10.6-10 18.5-20.9 19.2-.1.9-.2 2-.2 2.7 0 5.7 2.5 7.6 5.6 7.6zm6.2-33.4c-4.5 0-9.1 10.1-11 18.7 7.1-.4 13.3-7.3 13.3-15 0-2.2-.6-3.7-2.3-3.7zm51.3-6.7c-1.7 0-3-.6-4.2-1.9 2.4-1.5 4.1-4.8 4.1-7.8 0-3.1-1.8-6.1-6.8-6.1s-8.3 2.8-8.3 8.2c0 13.3 20.5 15.2 20.5 34.8 0 15.3-12.3 22.7-25.6 22.7-10.4 0-19.3-4.5-19.3-15.7 0-9.8 7-14.9 13.3-14.9 3.1 0 7.7 1.3 8 6-4.9 0-10.7 2.3-10.7 8.5 0 4.5 2.9 8.7 8.7 8.7 6.1 0 10.6-4.4 10.6-12 0-15.6-18.6-21.1-18.6-34.5 0-9.5 9.3-16.3 21-16.3 4.3 0 14.6.9 14.6 10.9.1 5.5-2.8 9.4-7.3 9.4zm36.2 10.3c0-2.3-.8-3.7-2.5-3.7-5.7 0-11.7 16.6-11.7 26.7 0 6.2 2.2 7.6 6.6 7.6 7.1 0 11.6-4 16.1-9.2h3.1c-5.2 8.3-12.9 16.8-25 16.8-8.5 0-14.2-4.2-14.2-14.5 0-10.6 6-32.3 24.5-32.3 8.1 0 10.1 4.2 10.1 8.3 0 4.4-2.2 6.7-4.8 6.7-1 0-2.1-.4-3.1-1.1.5-1.9.9-3.6.9-5.3zm27.7-7.6l-1.2 5.7c3.1-2.7 6.7-5.7 11-5.7 4.1 0 6.3 3.3 6.3 6.9 0 3.1-2.1 6.7-6.6 6.7-5.1 0-2.5-6-5.3-6-2.7 0-4.4 1.4-6.7 3.4l-7.2 34.6h-13.1l9.6-45.4 13.2-.2zm34.2 0l-6.6 30.9c-.3 1.2-.4 2.1-.4 2.9 0 2.5 1.2 3.3 3.7 3.3 3.5 0 6.9-3.4 8.1-8h3.8c-5.2 14.8-14.2 16.8-19.1 16.8-5.5 0-9.7-3.2-9.7-10.9 0-1.8.3-3.7.7-5.9l6.2-29.2 13.3.1zm-4.1-19.4c4 0 7.2 3.2 7.2 7.2s-3.2 7.1-7.2 7.1-7.1-3.1-7.1-7.1c-.1-4 3.2-7.2 7.1-7.2zm29.1 16l-1.5 6.9c2.6-2.3 6.1-3.9 10.7-3.9 6.2 0 11.1 3.5 11.1 14.4 0 12.2-4.7 32.1-22.3 32.1-4.5 0-6.8-1.6-7.7-3.2l-4.7 22.1-13.7 3.2 15.2-71.5 12.9-.1zm7.8 17c0-7-2.9-7.5-4.5-7.5-2 0-4.5 1.6-6.3 4.4l-5.4 25.5c.4 1 1.4 2.1 3.4 2.1 9.7 0 12.8-15.9 12.8-24.5zm27.8 17.3c-.3 1.1-.5 2.2-.5 3.1 0 1.9.7 3.2 3.1 3.2.7 0 1.7 0 2.4-.3-2.5 7.8-6.6 8.9-9.6 8.9-6.4 0-9.1-4.4-9.1-10.3 0-1.6.2-3.1.6-4.8l5.8-27.2h-3l.7-3.6h3L528 366l13.4-1.9s-1.4 6.2-3.1 14.4h5.5l-.7 3.6h-5.5l-5.7 27.4z"></path>
</svg>

        </p>
      </header>
      <section id="introduction">
        <p><strong>CoffeeScript 是個能夠編譯成 JavaScript 的簡易語言。</strong> 在那 Java-什麼鳥的深處中能夠探索到的是：JavaScript 最純潔且高尚的心靈。而 CoffeeScript 的存在正是將這完美的一面以最簡單的方式呈現。</p>
<p>CoffeeScript 的黃金守則是：<em>「這就只是 JavaScript 而已」</em>。程式碼能夠一對一地標準編譯成相對應的 JavaScript 程式碼，而且不需要任何的 Runtime 執行時態輔助。你可以無縫地在 CoffeeScript 中直接使用任何現有的 JavaScript 函式庫（反之亦然）。編譯出來的結果非常符合人體工學、且經過美觀縮排，甚至執行效率能夠比起手工撰寫的原始 JavaScript 程式碼還要來的迅速。</p>
<p><strong>最新版本：</strong> <a href="https://github.com/jashkenas/coffeescript/tarball/2.3.1">2.3.1</a></p>
<blockquote class="uneditable-code-block"><pre><code class="language-bash"><span class="comment"># 替本地專案安裝：</span>
npm install --save-dev coffeescript

<span class="comment"># 以全域的方式安裝來在任何地方執行 .coffee 檔案：</span>
npm install --global coffeescript
</code></pre>
</blockquote>
      </section>
      <section id="overview">
        <h2>概觀</h2>
<p><em>CoffeeScript 的程式碼區塊在<span class="d-md-none">上方</span><span class="d-none d-md-inline">左側</span>，而編譯後的 JavaScript 結果則是在<span class="d-md-none">下方</span><span class="d-none d-md-inline">右側</span>。最棒的是 CoffeeScript 程式碼區塊是可以即時編輯的！</em></p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="overview">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="overview-coffee"># 賦值：
number   = 42
opposite = true

# 條件式：
number = -42 if opposite

# 函式：
square = (x) -> x * x

# 陣列：
list = [1, 2, 3, 4, 5]

# 物件：
math =
  root:   Math.sqrt
  square: square
  cube:   (x) -> x * square x

# 變參：
race = (winner, runners...) ->
  print winner, runners

# 空值偵測：
alert "I knew it!" if elvis?

# 陣列推導：
cubes = (math.cube num for num in list)
</textarea>
      <pre class="placeholder-code"><span class="cm-comment"># 賦值：</span>
<span class="cm-variable">number</span>   <span class="cm-punctuation">=</span> <span class="cm-number">42</span>
<span class="cm-variable">opposite</span> <span class="cm-punctuation">=</span> <span class="cm-atom">true</span>

<span class="cm-comment"># 條件式：</span>
<span class="cm-variable">number</span> <span class="cm-punctuation">=</span> <span class="cm-number">-42</span> <span class="cm-keyword">if</span> <span class="cm-variable">opposite</span>

<span class="cm-comment"># 函式：</span>
<span class="cm-variable">square</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">(</span><span class="cm-variable">x</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span> <span class="cm-variable">x</span> <span class="cm-operator">*</span> <span class="cm-variable">x</span>

<span class="cm-comment"># 陣列：</span>
<span class="cm-variable">list</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">[</span><span class="cm-number">1</span><span class="cm-punctuation">,</span> <span class="cm-number">2</span><span class="cm-punctuation">,</span> <span class="cm-number">3</span><span class="cm-punctuation">,</span> <span class="cm-number">4</span><span class="cm-punctuation">,</span> <span class="cm-number">5</span><span class="cm-punctuation">]</span>

<span class="cm-comment"># 物件：</span>
<span class="cm-variable">math</span> <span class="cm-punctuation">=</span>
<span class="cm-indent">  </span><span class="cm-variable">root</span><span class="cm-punctuation">:</span>   <span class="cm-variable">Math</span><span class="cm-punctuation">.</span><span class="cm-property">sqrt</span>
  <span class="cm-variable">square</span><span class="cm-punctuation">:</span> <span class="cm-variable">square</span>
  <span class="cm-variable">cube</span><span class="cm-punctuation">:</span>   <span class="cm-punctuation">(</span><span class="cm-variable">x</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span> <span class="cm-variable">x</span> <span class="cm-operator">*</span> <span class="cm-variable">square</span> <span class="cm-variable">x</span>

<span class="cm-comment"># 變參：</span>
<span class="cm-variable">race</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">(</span><span class="cm-variable">winner</span><span class="cm-punctuation">,</span> <span class="cm-variable">runners</span><span class="cm-punctuation">...)</span> <span class="cm-operator">-></span>
  <span class="cm-variable">print</span> <span class="cm-variable">winner</span><span class="cm-punctuation">,</span> <span class="cm-variable">runners</span>

<span class="cm-comment"># 空值偵測：</span>
<span class="cm-variable">alert</span> <span class="cm-string">"I knew it!"</span> <span class="cm-keyword">if</span> <span class="cm-variable">elvis</span><span class="cm-operator">?</span>

<span class="cm-comment"># 陣列推導：</span>
<span class="cm-variable">cubes</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">(</span><span class="cm-variable">math</span><span class="cm-punctuation">.</span><span class="cm-property">cube</span> <span class="cm-variable">num</span> <span class="cm-keyword">for</span> <span class="cm-variable">num</span> <span class="cm-operator">in</span> <span class="cm-variable">list</span><span class="cm-punctuation">)</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="overview-js">// 賦值：
var cubes, list, math, num, number, opposite, race, square;

number = 42;

opposite = true;

if (opposite) {
  // 條件式：
  number = -42;
}

// 函式：
square = function(x) {
  return x * x;
};

// 陣列：
list = [1, 2, 3, 4, 5];

// 物件：
math = {
  root: Math.sqrt,
  square: square,
  cube: function(x) {
    return x * square(x);
  }
};

// 變參：
race = function(winner, ...runners) {
  return print(winner, runners);
};

if (typeof elvis !== "undefined" && elvis !== null) {
  // 空值偵測：
  alert("I knew it!");
}

// 陣列推導：
cubes = (function() {
  var i, len, results;
  results = [];
  for (i = 0, len = list.length; i < len; i++) {
    num = list[i];
    results.push(math.cube(num));
  }
  return results;
})();
</textarea>
      <pre class="placeholder-code"><span class="cm-comment">// 賦值：</span>
<span class="cm-keyword">var</span> <span class="cm-def">cubes</span>, <span class="cm-def">list</span>, <span class="cm-def">math</span>, <span class="cm-def">num</span>, <span class="cm-def">number</span>, <span class="cm-def">opposite</span>, <span class="cm-def">race</span>, <span class="cm-def">square</span>;

<span class="cm-variable">number</span> <span class="cm-operator">=</span> <span class="cm-number">42</span>;

<span class="cm-variable">opposite</span> <span class="cm-operator">=</span> <span class="cm-atom">true</span>;

<span class="cm-keyword">if</span> (<span class="cm-variable">opposite</span>) {
  <span class="cm-comment">// 條件式：</span>
  <span class="cm-variable">number</span> <span class="cm-operator">=</span> <span class="cm-operator">-</span><span class="cm-number">42</span>;
}

<span class="cm-comment">// 函式：</span>
<span class="cm-variable">square</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>(<span class="cm-def">x</span>) {
  <span class="cm-keyword">return</span> <span class="cm-variable-2">x</span> <span class="cm-operator">*</span> <span class="cm-variable-2">x</span>;
};

<span class="cm-comment">// 陣列：</span>
<span class="cm-variable">list</span> <span class="cm-operator">=</span> [<span class="cm-number">1</span>, <span class="cm-number">2</span>, <span class="cm-number">3</span>, <span class="cm-number">4</span>, <span class="cm-number">5</span>];

<span class="cm-comment">// 物件：</span>
<span class="cm-variable">math</span> <span class="cm-operator">=</span> {
  <span class="cm-property">root</span>: <span class="cm-variable">Math</span>.<span class="cm-property">sqrt</span>,
  <span class="cm-property">square</span>: <span class="cm-variable">square</span>,
  <span class="cm-property">cube</span>: <span class="cm-keyword">function</span>(<span class="cm-def">x</span>) {
    <span class="cm-keyword">return</span> <span class="cm-variable-2">x</span> <span class="cm-operator">*</span> <span class="cm-variable">square</span>(<span class="cm-variable-2">x</span>);
  }
};

<span class="cm-comment">// 變參：</span>
<span class="cm-variable">race</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>(<span class="cm-def">winner</span>, <span class="cm-meta">...</span><span class="cm-def">runners</span>) {
  <span class="cm-keyword">return</span> <span class="cm-variable">print</span>(<span class="cm-variable-2">winner</span>, <span class="cm-variable-2">runners</span>);
};

<span class="cm-keyword">if</span> (<span class="cm-keyword">typeof</span> <span class="cm-variable">elvis</span> <span class="cm-operator">!==</span> <span class="cm-string">"undefined"</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">elvis</span> <span class="cm-operator">!==</span> <span class="cm-atom">null</span>) {
  <span class="cm-comment">// 空值偵測：</span>
  <span class="cm-variable">alert</span>(<span class="cm-string">"I knew it!"</span>);
}

<span class="cm-comment">// 陣列推導：</span>
<span class="cm-variable">cubes</span> <span class="cm-operator">=</span> (<span class="cm-keyword">function</span>() {
  <span class="cm-keyword">var</span> <span class="cm-def">i</span>, <span class="cm-def">len</span>, <span class="cm-def">results</span>;
  <span class="cm-variable-2">results</span> <span class="cm-operator">=</span> [];
  <span class="cm-keyword">for</span> (<span class="cm-variable-2">i</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>, <span class="cm-variable-2">len</span> <span class="cm-operator">=</span> <span class="cm-variable">list</span>.<span class="cm-property">length</span>; <span class="cm-variable-2">i</span> <span class="cm-operator">&lt;</span> <span class="cm-variable-2">len</span>; <span class="cm-variable-2">i</span><span class="cm-operator">++</span>) {
    <span class="cm-variable">num</span> <span class="cm-operator">=</span> <span class="cm-variable">list</span>[<span class="cm-variable-2">i</span>];
    <span class="cm-variable-2">results</span>.<span class="cm-property">push</span>(<span class="cm-variable">math</span>.<span class="cm-property">cube</span>(<span class="cm-variable">num</span>));
  }
  <span class="cm-keyword">return</span> <span class="cm-variable-2">results</span>;
})();
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="overview" data-run="cubes"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>cubes</button>
    </div>
  </div>
  
</aside>

      </section>
      <section id="coffeescript-2">
        <h2>CoffeeScript 2</h2>

        <section id="whats-new-in-coffeescript-2">
          <h3>CoffeeScript 2 有什麼新東西？</h3>
<p>在 CoffeeScript 2 中，最大的改變莫過於輸出的 JavaScript 程式碼格式了（現在會輸出成較新的 ES6 或 ES2015 風格）。而 CoffeeScript 中的 <code>=&gt;</code> 亦會變成 JS 中的 <code>=&gt;</code>，且 CoffeeScript 的 <code>class</code> 也會等同於 JS 的 <code>class</code> 類別標籤…等。還有主要追加的新功能，像是：<a href="#async-functions">非同步函式</a>和<a href="#jsx">JSX</a>。你能夠在<a href="announcing-coffeescript-2/">公告</a>中暸解更多。</p>
<p>當然也有一些<a href="#breaking-changes">從 CoffeeScript 1.x 升級到 2 時的不相容差異</a>；我們希望更新所造成的破壞能夠減輕量到最低。</p>

        </section>
        <section id="compatibility">
          <h3>相容性</h3>
<p>CoffeeScript 所支援的 JavaScript 功能近乎都可以直接在 Node 7.6+ 執行，這意味著 Node 可以直接執行 CoffeeScript 所輸出的程式碼且不需要任何其他動作。話雖如此，這裡還是有幾點需要注意的事項：</p>
<ul>
<li><a href="#modules">模組系統</a>和 <a href="#jsx">JSX</a> 需要有轉譯介面（Transpilation）。</li>
<li><a href="https://coffeescript.org/#splats">變參、物件展開符號</a> 需要 Node 8.6+ 版本。</li>
<li><a href="https://github.com/tc39/proposal-regexp-dotall-flag">正規表達式的 <code>s</code> 標記</a> 則需要 Node 9+ 版本。</li>
<li><a href="https://github.com/tc39/proposal-async-iteration">異步產生器函式</a> 需要 Node 10+ 版本。</li>
</ul>
<p>這份清單可能不是很完整，有關更詳細的功能支援度請參閱 <a href="http://node.green/">node.green</a> 網站。你可以在<a href="test.html">瀏覽器中執行這些測試</a>來得知你的瀏覽器支援哪些功能。畢竟確保瀏覽器可以執行哪些東西是你的重責大任；或者你也能用上<a href="#transpilation">轉譯介面</a>。如果你有疑問找上轉譯介面準沒錯。</p>

        </section>
      </section>
      <section id="installation">
        <h2>安裝方法</h2>
<p>終端機版本的 <code>coffee</code> 指令現在需要 <a href="https://nodejs.org/">Node.js</a> 為輔助工具，且版本需要是 Node 6 或更新的版本。不過<a href="/v2/browser-compiler/coffeescript.js">核心編譯器</a>則不仰賴 Node。核心可以在任何的 JavaScript 環境中執行，或是直接在網頁瀏覽器中運作（請查看<a href="#try">嘗試 CoffeeScript</a>）。</p>
<p>欲要進行安裝，須先確保你有安裝最新版的 <a href="https://nodejs.org/">Node.js</a>。然後你就能夠透過 <a href="https://www.npmjs.com/">npm</a> 來安裝 CoffeeScript：</p>
<blockquote class="uneditable-code-block"><pre><code class="language-bash">npm install --global coffeescript
</code></pre>
</blockquote><p>這讓你能夠在全域終端機中使用 <code>coffee</code> 和 <code>cake</code> 指令。</p>
<p>如果你正打算在專案中使用 CoffeeScript，那麼你應該以下列方式來安裝、並令 CoffeeScript 成為專案中的相依性套件。請在專案資料夾中輸入指令：</p>
<blockquote class="uneditable-code-block"><pre><code class="language-bash">npm install --save-dev coffeescript
</code></pre>
</blockquote><p>使用 <code>coffee</code> 和 <code>cake</code> 指令時，會先自動檢查目前資料夾中是否有安裝 CoffeeScript，若有，則使用目前資料夾的版本（若無，則使用全域安裝的版本）。這允許你在不同的專案上使用不同版本的 CoffeeScript 以避免相依性問題。</p>
<p>如果你打算使用 <code>--transpile</code> 選項（請查看<a href="#transpilation">轉譯介面</a>章節），你將需要以全域、本地方式安裝 <code>babel-core</code>，這取決於你使用的 CoffeeScript 是全域還是目前資料夾中的版本。</p>

      </section>
      <section id="usage">
        <h2>使用方式</h2>

        <section id="cli">
          <h3>指令列</h3>
<p>當安裝完成之後，你就應該能夠使用 <code>coffee</code> 指令了。這能夠執行腳本、將 <code>.coffee</code> 檔案編譯成 <code>.js</code>，並且有一個互動式的 REPL 介面。<code>coffee</code> 指令有下列選項可供使用：</p>
<table>
<thead>
<tr>
<th>選項</th>
<th>說明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-c, --compile</code></td>
<td>以同檔案名稱將 <code>.coffee</code> 編譯成 <code>.js</code> JavaScript 程式碼。</td>
</tr>
<tr>
<td><code>-t, --transpile</code></td>
<td>在儲存或執行成 JavaScript 檔案之前，先將 CoffeeScript 的編譯器輸出銜接至 Babel。這需要是先安裝 <code>babel-core</code>，且需要一個 <code>.babelrc</code> 檔案或者帶有 <code>babel</code> 設置的 <code>package.json</code> 於相同路徑中。請參閱<a href="#transpilation">轉譯介面</a>。</td>
</tr>
<tr>
<td><code>-m, --map</code></td>
<td>與編譯後的 JavaScript 結果一同產生原始碼映射表。這會在 JavaScript 檔案中追加 <code>sourceMappingURL</code>。</td>
</tr>
<tr>
<td><code>-M, --inline-map</code></td>
<td>和 <code>--map</code> 作用近乎相同，但是會將原始碼映射表直接寫入編譯後的 JavaScript 檔案中，而不是另外儲存為獨立的檔案。</td>
</tr>
<tr>
<td><code>-i, --interactive</code></td>
<td>啟動一個可互動的 CoffeeScript 階段，這讓你能夠嘗試較短的程式碼。基本上與直接呼叫無選項的 <code>coffee</code> 指令沒有差異。</td>
</tr>
<tr>
<td><code>-o, --output [目錄]</code></td>
<td>將所有編譯的 JavaScript 檔案輸出到指定的資料夾。通常會和 <code>--compile</code> 或 <code>--watch</code> 一起使用。</td>
</tr>
<tr>
<td><code>-w, --watch</code></td>
<td>監聽檔案的變動，當檔案變動時重新執行某個動作。</td>
</tr>
<tr>
<td><code>-p, --print</code></td>
<td>將編譯結果直接輸出到 <strong>stdout</strong> 而不是一個檔案。</td>
</tr>
<tr>
<td><code>-s, --stdio</code></td>
<td>從 STDIN 接收 CoffeeScript 程式碼並且將編譯結果的 JavaScript 輸出至 STDOUT。適合用於和其他程式語言串接的時機。例如：<br><code>cat src/cake.coffee | coffee -sc</code></td>
</tr>
<tr>
<td><code>-l, --literate</code></td>
<td>將程式碼視為文學式 CoffeeScript。你只需要在使用 <strong>stdio</strong> 或者編譯無副檔名的檔案時才需要特別指定此選項。</td>
</tr>
<tr>
<td><code>-e, --eval</code></td>
<td>直接從指令列編譯並且輸出一小段 CoffeeScript 程式碼。例如：<br><code>coffee -e &quot;console.log num for num in [10..1]&quot;</code></td>
</tr>
<tr>
<td><code>-r, --require [模組名稱]</code> </td>
<td>在 REPL 或執行帶有 <code>--eval</code> 的 CoffeeScript 指令之前，以 <code>require()</code> 先載入指定的模組。</td>
</tr>
<tr>
<td><code>-b, --bare</code></td>
<td>在省去<a href="#lexical-scope">有效範圍保護函式</a>的情況下編譯 CoffeeScript 程式碼。</td>
</tr>
<tr>
<td><code>--no-header</code></td>
<td>在輸出結果中移除「Generated by CoffeeScript」的標頭。</td>
</tr>
<tr>
<td><code>--nodejs</code></td>
<td><code>node</code> 執行指令有不少好用的選項，例如：<code>--debug</code>、<code>--debug-brk</code>、<code>--max-stack-size</code> 和 <code>--expose-gc</code>。透過這個指令選項可以將部分選項導向至 Node.js。若要傳入多個選項，則重複使用 <code>--nodejs</code> 選項即可。</td>
</tr>
<tr>
<td><code>--tokens</code></td>
<td>輸出詞法分析器的結果，而不是以 CoffeeScript 來編譯檔案。這適用於替編譯器除錯的環境。</td>
</tr>
<tr>
<td><code>-n, --nodes</code></td>
<td>輸出詞法分析器與解析器的結果，而不是以 CoffeeScript 來編譯檔案。這適用於替編譯器除錯的環境。</td>
</tr>
</tbody>
</table>
<h4>範例：</h4>
<ul>
<li>將 <code>src</code> 目錄中的所有 <code>.coffee</code> 檔案編譯成 <code>.js</code> 並且儲存到 <code>lib</code> 目錄下：<br>
<code>coffee --compile --output lib/ src/</code></li>
<li>監聽一個檔案的變動，每當該檔案有儲存異動時就自動重新編譯：<br>
<code>coffee --watch --compile experimental.coffee</code></li>
<li>將指定清單的所有檔案編譯成單個檔案：<br>
<code>coffee --join project.js --compile src/*.coffee</code></li>
<li>輸出單行程式碼的編譯結果：<br>
<code>coffee -bpe &quot;alert i for i in [0..10]&quot;</code></li>
<li>差不多了，監聽並且自動重新編譯整個專案的檔案：<br>
<code>coffee -o lib/ -cw src/</code></li>
<li>啟動 CoffeeScript 的 REPL 介面（<code>Ctrl-D</code> 結束，而 <code>Ctrl-V</code> 是多行模式）：<br>
<code>coffee</code></li>
</ul>
<p>若要使用 <code>--transpile</code> 選項，請參閱<a href="#transpilation">轉譯介面</a>。</p>

        </section>
        <section id="nodejs-usage">
          <h3>Node.js</h3>
<p>如果你希望能夠透過 Node.js 的 CommonJS 來 <code>require</code> 引用 CoffeeScript 檔案，例如：<code>require './app.coffee'</code> 的話，你就必須先將 CoffeeScript「註冊」成為一個擴充功能：</p>
<blockquote class="uneditable-code-block"><pre><code class="language-coffee"><span class="built_in">require</span> <span class="string">'coffeescript/register'</span>

App = <span class="built_in">require</span> <span class="string">'./app'</span> <span class="comment"># .coffee 的副檔名是選擇性的</span>
</code></pre>
</blockquote><p>如果你希望用上編譯器的 API，例如：直接編譯 CoffeeScript 程式碼字串，那麼就需要 <code>require</code> 整個模組：</p>
<blockquote class="uneditable-code-block"><pre><code class="language-coffee">CoffeeScript = <span class="built_in">require</span> <span class="string">'coffeescript'</span>

eval CoffeeScript.compile <span class="string">'console.log "嗯……也許我該來吃塊 #{Math.pi}"'</span>
</code></pre>
</blockquote><p><code>compile</code> 方法有個非常基本的 <code>compile(code, options)</code> 用法，理所當然地 <code>code</code> 就是 CoffeeScript 的程式碼字串，而 <code>options</code> 就是選擇性的物件用以設置部分設定，其屬性如下：</p>
<ul>
<li><code>options.sourceMap</code>，布林值：如果為真，將會產生原始碼映射表而不是返回字串。<code>compile</code> 將會回傳一個基於 <code>{js, v3SourceMap, sourceMap}</code> 格式的物件。</li>
<li><code>options.inlineMap</code>，布林值：如果為真，原始碼映射表會以 Base64 的格式輸出在最底部的註釋。</li>
<li><code>options.filename</code>，字串：作為原始碼映射表的檔案名稱。可以是個路徑（無論相對或絕對路徑）。</li>
<li><code>options.bare</code>，布林值：如果為真，輸出的結果會省去<a href="#lexical-scope">有效範圍保護函式</a>。</li>
<li><code>options.header</code>，布林值：如果為真，會輸出帶有 <code>Generated by CoffeeScript</code> 標頭的內容。</li>
<li><code>options.transpile</code>，<strong>物件</strong>：如果有設置的話，這必須是基於 <a href="http://babeljs.io/docs/usage/api/#options">Babel 選項的物件格式</a>。請參閱<a href="#transpilation">轉譯介面</a>。</li>
</ul>

        </section>
        <section id="transpilation">
          <h3>轉譯介面</h3>
<p>CoffeeScript 2 會輸出最新的 JavaScript 語法，但執行緒或瀏覽器<a href="#compatibility">不一定會支援這些用法</a>。在這種時候我們會希望將現代 JavaScript 程式碼轉譯成較舊的語法，這樣才能夠在過時的 Node 或瀏覽器上執行；例如說：<code>{ a } = obj</code> 轉譯成 <code>a = obj.a</code>。而這可以透過 <a href="http://babeljs.io/">Babel</a>、<a href="https://buble.surge.sh/">Bublé</a> 或 <a href="https://github.com/google/traceur-compiler">Traceur Compiler</a> 轉譯器達成。</p>
<h4>快速開始</h4>
<p>先從專案的根目錄開始下手：</p>
<blockquote class="uneditable-code-block"><pre><code class="language-bash">npm install --save-dev babel-core babel-preset-env
<span class="built_in">echo</span> <span class="string">'{ "presets": ["env"] }'</span> &gt; .babelrc
coffee --compile --transpile --inline-map some-file.coffee
</code></pre>
</blockquote><h4>CoffeeScript 編譯器搭配轉譯介面</h4>
<p>為了讓事情更簡單點，CoffeeScript 內建了能夠支援 <a href="http://babeljs.io/">Babel</a> 轉譯器的功能。你可以透過 <code>--transpile</code> 指令列選項或者 Node API 的 <code>transpile</code> 選項來使用。要使用這項功能，專案中必須先要有安裝 <code>babel-core</code>：</p>
<blockquote class="uneditable-code-block"><pre><code class="language-bash">npm install --save-dev babel-core
</code></pre>
</blockquote><p>如果你是在專案資料夾外執行 <code>coffee</code> 指令的話，可以使用全域安裝的 <code>coffeescript</code> 模組。這個時候也就需要全域安裝的 <code>babel-core</code> 模組：</p>
<blockquote class="uneditable-code-block"><pre><code class="language-bash">npm install --global babel-core
</code></pre>
</blockquote><p>預設來說，Babel 本身什麼事情也不會做，他也不會鳥你想轉譯成什麼格式的程式碼。為了解決這傲嬌的問題，你必須提供一個設定檔讓他正常運作，而主要的方式就是在欲編譯的檔案資料夾裡建立一個 <a href="https://babeljs.io/docs/usage/babelrc/"><code>.babelrc</code> 檔案</a>（或者父資料夾也行），Babel 也支援<a href="https://babeljs.io/docs/usage/babelrc/">其他方式</a>就是了。一個最基本的 <code>.babelrc</code> 檔案會有 <code>{ &quot;presets&quot;: [&quot;env&quot;] }</code> 內容。在這之前你必須先安裝最基本的 <a href="https://babeljs.io/docs/plugins/preset-env/"><code>babel-preset-env</code></a> 配置環境檔案：</p>
<blockquote class="uneditable-code-block"><pre><code class="language-bash">npm install --save-dev babel-preset-env  <span class="comment"># 在沒有明顯區分專案的情況下可以用上 --global 選項</span>
</code></pre>
</blockquote><p>拜訪 <a href="https://babeljs.io/docs/plugins/">Babel 的網站能夠讓你學到關於配置環境檔案和擴充插件</a>的相關知識。當你需要用上 JSX 和 React 時，你會需要 <a href="https://babeljs.io/docs/plugins/transform-react-jsx/"><code>transform-react-jsx</code></a> 配置環境檔案（雖然 JSX 也可以和其他框架一同使用啦）。</p>
<p>當你有安裝 <code>babel-core</code> 和 <code>babel-preset-env</code>（或其他配置環境檔案）且已經設定好 <code>.babelrc</code>（相關的設置）時，就可以開始使用 <code>coffee --transpile</code> 指令來將 CoffeeScript 的輸出結果銜接到 Babel 並以你所設置的選項來進行轉譯。</p>
<p>如果你是透過 <a href="nodejs_usage">Node API</a> 使用 CoffeeScript 的話，則需要在呼叫 <code>CoffeeScript.compile</code> 的時候在 <code>options</code> 選項物件部分的 <code>transpile</code> 屬性設置 Babel 的選項：</p>
<blockquote class="uneditable-code-block"><pre><code class="language-js">CoffeeScript.compile(code, {<span class="attr">transpile</span>: {<span class="attr">presets</span>: [<span class="string">'env'</span>]}})
</code></pre>
</blockquote><p>將 CoffeeScript 納入建置鏈就能夠不需要用上 <code>transpile</code> 設置來轉譯 CoffeeScript 的輸出內容。這讓你能夠使用 Babel 以外的轉譯器，通常要達到這樣的效果可以使用現有的 JavaScript 建置鏈工具。例如：<a href="http://gulpjs.com/">Gulp</a>、<a href="https://webpack.github.io/">Webpack</a>、<a href="https://gruntjs.com/">Grunt</a> 或 <a href="http://broccolijs.com/">Broccoli</a>。</p>
<h4>Polyfill</h4>
<p>該注意的是轉譯並不會自動幫妳解決某些最根本的 <a href="https://developer.mozilla.org/en-US/docs/Glossary/Polyfill">Polyfills</a> 相容性問題。CoffeeScript 會在你使用 <code>in</code> 語法時自動輸出成 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf"><code>Array.indexOf</code></a> 或者解構和展開運算子；而在類別中用上胖箭頭（<code>=&gt;</code>）時則會輸出成 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind"><code>Function.bind</code></a>。兩者都在 Internet Explorer 9+ 和多數瀏覽器上獲得支援，但是如果你要讓他們在 Internet Explorer 8 或是更舊的瀏覽器中能夠正常執行，就會需要透過 Polyfills 解決這些問題。當你自己在程式中用上類似的語法時，也依然需要這麼做。而有個能解決 Polyfill 的方法就是安裝 <a href="https://babeljs.io/docs/usage/polyfill/"><code>babel-polyfill</code></a>（雖然還有<a href="https://hackernoon.com/polyfills-everything-you-ever-wanted-to-know-or-maybe-a-bit-less-7c8de164e423">其他</a>、<a href="https://philipwalton.com/articles/loading-polyfills-only-when-needed/">不同</a>的方式就是了）。</p>

        </section>
      </section>
      <section id="language">
        <h2>語言概要</h2>
<p><em>這份概要的組成結構讓你能夠從上閱讀至下逐一學習，而後續的章節都會基於先前所提到的觀念。在接下來的範例中，左側的區塊是 CoffeeScript 原始碼，而右側則是編譯後的 JavaScript 程式碼。</em></p>
<p><em>多數的範例都可以透過按下右方的</em> <small>▶</small> <em>按鈕來執行。左側的 CoffeeScript 都是可以即時編輯的。當然，右側的 JavaScript 也會依照你的編輯做即時更新。</em></p>
<p>首先你要知道的是：CoffeeScript 使用空格來作為判斷程式碼區塊的依據。你不需要透過 <code>;</code> 分號來結束表達式或斷句（雖然有時候要將多行表達式縮成一行時會用上）。比起用上 <code>{ }</code> 大括號來包覆<a href="#literals">函式</a>、<a href="#conditionals">條件式</a>、<a href="#switch">Switch 條件判斷式</a>、<a href="#try">例外處理</a>區塊，你真正該用的是空白縮排。</p>
<p>當你正要傳遞參數到函式的時候不一定需要括號，下面這個寫法會不斷地幫你自動包覆參數、變數。<br>
<code>console.log sys.inspect object</code> → <code>console.log(sys.inspect(object));</code></p>

        <section id="functions">
          <h2>函式</h2>
<p>一個基本的函式由括號與選擇性參數、箭頭、函式內容定義。一個空的函式看起來像這樣：<code>-&gt;</code></p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="functions">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="functions-coffee">square = (x) -> x * x
cube   = (x) -> square(x) * x
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">square</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">(</span><span class="cm-variable">x</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span> <span class="cm-variable">x</span> <span class="cm-operator">*</span> <span class="cm-variable">x</span>
<span class="cm-variable">cube</span>   <span class="cm-punctuation">=</span> <span class="cm-punctuation">(</span><span class="cm-variable">x</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span> <span class="cm-variable">square</span><span class="cm-punctuation">(</span><span class="cm-variable">x</span><span class="cm-punctuation">)</span> <span class="cm-operator">*</span> <span class="cm-variable">x</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="functions-js">var cube, square;

square = function(x) {
  return x * x;
};

cube = function(x) {
  return square(x) * x;
};
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">cube</span>, <span class="cm-def">square</span>;

<span class="cm-variable">square</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>(<span class="cm-def">x</span>) {
  <span class="cm-keyword">return</span> <span class="cm-variable-2">x</span> <span class="cm-operator">*</span> <span class="cm-variable-2">x</span>;
};

<span class="cm-variable">cube</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>(<span class="cm-def">x</span>) {
  <span class="cm-keyword">return</span> <span class="cm-variable">square</span>(<span class="cm-variable-2">x</span>) <span class="cm-operator">*</span> <span class="cm-variable-2">x</span>;
};
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="functions" data-run="cube%285%29"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>cube(5)</button>
    </div>
  </div>
  
</aside>
<p>函式的接收參數也能夠有預設值，當沒有接收到其參數（<code>undefined</code>）的話就會使用預設值，這很好用。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="default_args">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="default_args-coffee">fill = (container, liquid = "coffee") ->
  "Filling the #{container} with #{liquid}..."
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">fill</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">(</span><span class="cm-variable">container</span><span class="cm-punctuation">,</span> <span class="cm-variable">liquid</span> <span class="cm-punctuation">=</span> <span class="cm-string">"coffee"</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span>
  <span class="cm-string">"Filling the #{container} with #{liquid}..."</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="default_args-js">var fill;

fill = function(container, liquid = "coffee") {
  return `Filling the ${container} with ${liquid}...`;
};
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">fill</span>;

<span class="cm-variable">fill</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>(<span class="cm-def">container</span>, <span class="cm-def">liquid</span> <span class="cm-operator">=</span> <span class="cm-string">"coffee"</span>) {
  <span class="cm-keyword">return</span> <span class="cm-string-2">`Filling the ${</span><span class="cm-variable-2">container</span><span class="cm-string-2">}</span> <span class="cm-string-2">with ${</span><span class="cm-variable-2">liquid</span><span class="cm-string-2">}...`</span>;
};
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="default_args" data-run="fill%28%22cup%22%29"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>fill(&quot;cup&quot;)</button>
    </div>
  </div>
  
</aside>

        </section>
        <section id="strings">
          <h2>字串</h2>
<p>就像 JavaScript 還有其他語言那樣，CoffeeScript 支援以 <code>&quot;</code> 或 <code>'</code> 符號來定義字串。CoffeeScript 中，你能夠用 <code>#{ … }</code> 來在 <code>&quot;</code>（雙引號）定義的字串中進行插值。而單引號定義的字串就僅僅是普通的字串而已。在物件的鍵名中你仍可以使用雙引號進行字串插值。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="interpolation">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="interpolation-coffee">author = "Wittgenstein"
quote  = "A picture is a fact. -- #{ author }"

sentence = "#{ 22 / 7 } is a decent approximation of π"
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">author</span> <span class="cm-punctuation">=</span> <span class="cm-string">"Wittgenstein"</span>
<span class="cm-variable">quote</span>  <span class="cm-punctuation">=</span> <span class="cm-string">"A picture is a fact. -- #{ author }"</span>

<span class="cm-variable">sentence</span> <span class="cm-punctuation">=</span> <span class="cm-string">"#{ 22 / 7 } is a decent approximation of π"</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="interpolation-js">var author, quote, sentence;

author = "Wittgenstein";

quote = `A picture is a fact. -- ${author}`;

sentence = `${22 / 7} is a decent approximation of π`;
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">author</span>, <span class="cm-def">quote</span>, <span class="cm-def">sentence</span>;

<span class="cm-variable">author</span> <span class="cm-operator">=</span> <span class="cm-string">"Wittgenstein"</span>;

<span class="cm-variable">quote</span> <span class="cm-operator">=</span> <span class="cm-string-2">`A picture is a fact. -- ${</span><span class="cm-variable">author</span><span class="cm-string-2">}`</span>;

<span class="cm-variable">sentence</span> <span class="cm-operator">=</span> <span class="cm-string-2">`${</span><span class="cm-number">22</span> <span class="cm-operator">/</span> <span class="cm-number">7</span><span class="cm-string-2">}</span> <span class="cm-string-2">is a decent approximation of π`</span>;
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="interpolation" data-run="sentence"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>sentence</button>
    </div>
  </div>
  
</aside>
<p>多行字串也能夠在 CoffeeScript 中使用。在文字中插入反斜線（<code>\</code>）會移除與下一行銜接的空白間隔。文字的開頭與結尾空白對齊在這個時候會被忽略。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="strings">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="strings-coffee">mobyDick = "Call me Ishmael. Some years ago --
  never mind how long precisely -- having little
  or no money in my purse, and nothing particular
  to interest me on shore, I thought I would sail
  about a little and see the watery part of the
  world..."
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">mobyDick</span> <span class="cm-punctuation">=</span> <span class="cm-string">"Call me Ishmael. Some years ago --</span>
<span class="cm-string">  never mind how long precisely -- having little</span>
<span class="cm-string">  or no money in my purse, and nothing particular</span>
<span class="cm-string">  to interest me on shore, I thought I would sail</span>
<span class="cm-string">  about a little and see the watery part of the</span>
<span class="cm-string">  world..."</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="strings-js">var mobyDick;

mobyDick = "Call me Ishmael. Some years ago -- never mind how long precisely -- having little or no money in my purse, and nothing particular to interest me on shore, I thought I would sail about a little and see the watery part of the world...";
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">mobyDick</span>;

<span class="cm-variable">mobyDick</span> <span class="cm-operator">=</span> <span class="cm-string">"Call me Ishmael. Some years ago -- never mind how long precisely -- having little or no money in my purse, and nothing particular to interest me on shore, I thought I would sail about a little and see the watery part of the world..."</span>;
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="strings" data-run="mobyDick"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>mobyDick</button>
    </div>
  </div>
  
</aside>
<p>透過 <code>&quot;&quot;&quot;</code> 或 <code>'''</code> 建立區塊字串，這很適合用來存放已經格式化（美化）過，或者很講究對齊的文字內容（如果你不想整天脫逸雙、單引號）。內容的對齊由區塊字串開始的地方為主。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="heredocs">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="heredocs-coffee">html = """
       <strong>
         cup of coffeescript
       </strong>
       """
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">html</span> <span class="cm-punctuation">=</span> <span class="cm-string">"""</span>
<span class="cm-string">       &lt;strong></span>
<span class="cm-string">         cup of coffeescript</span>
<span class="cm-string">       &lt;/strong></span>
<span class="cm-string">       """</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="heredocs-js">var html;

html = "<strong>\n  cup of coffeescript\n</strong>";
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">html</span>;

<span class="cm-variable">html</span> <span class="cm-operator">=</span> <span class="cm-string">"&lt;strong>\n  cup of coffeescript\n&lt;/strong>"</span>;
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="heredocs" data-run="html"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>html</button>
    </div>
  </div>
  
</aside>
<p>雙引號區塊字串就像上面的所有雙引號字串那樣，允許字串插值。</p>

        </section>
        <section id="objects-and-arrays">
          <h2>物件與陣列</h2>
<p>CoffeeScript 對於物件還有陣列的使用方式就像 JavaScript 的表兄弟姐妹那樣親近。當每個屬性都自己有一行的時候，後面的逗點可以省去。物件可以由對齊而非大括號進行建立，類似 <a href="http://yaml.org">YAML</a>。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="objects_and_arrays">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="objects_and_arrays-coffee">song = ["do", "re", "mi", "fa", "so"]

singers = {Jagger: "Rock", Elvis: "Roll"}

bitlist = [
  1, 0, 1
  0, 0, 1
  1, 1, 0
]

kids =
  brother:
    name: "Max"
    age:  11
  sister:
    name: "Ida"
    age:  9
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">song</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">[</span><span class="cm-string">"do"</span><span class="cm-punctuation">,</span> <span class="cm-string">"re"</span><span class="cm-punctuation">,</span> <span class="cm-string">"mi"</span><span class="cm-punctuation">,</span> <span class="cm-string">"fa"</span><span class="cm-punctuation">,</span> <span class="cm-string">"so"</span><span class="cm-punctuation">]</span>

<span class="cm-variable">singers</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">{</span><span class="cm-variable">Jagger</span><span class="cm-punctuation">:</span> <span class="cm-string">"Rock"</span><span class="cm-punctuation">,</span> <span class="cm-variable">Elvis</span><span class="cm-punctuation">:</span> <span class="cm-string">"Roll"</span><span class="cm-punctuation">}</span>

<span class="cm-variable">bitlist</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">[</span>
  <span class="cm-number">1</span><span class="cm-punctuation">,</span> <span class="cm-number">0</span><span class="cm-punctuation">,</span> <span class="cm-number">1</span>
  <span class="cm-number">0</span><span class="cm-punctuation">,</span> <span class="cm-number">0</span><span class="cm-punctuation">,</span> <span class="cm-number">1</span>
  <span class="cm-number">1</span><span class="cm-punctuation">,</span> <span class="cm-number">1</span><span class="cm-punctuation">,</span> <span class="cm-number">0</span>
<span class="cm-punctuation">]</span>

<span class="cm-variable">kids</span> <span class="cm-punctuation">=</span>
<span class="cm-indent">  </span><span class="cm-variable">brother</span><span class="cm-punctuation">:</span>
<span class="cm-indent">    </span><span class="cm-variable">name</span><span class="cm-punctuation">:</span> <span class="cm-string">"Max"</span>
    <span class="cm-variable">age</span><span class="cm-punctuation">:</span>  <span class="cm-number">11</span>
<span class="cm-dedent">  </span><span class="cm-variable">sister</span><span class="cm-punctuation">:</span>
<span class="cm-indent">    </span><span class="cm-variable">name</span><span class="cm-punctuation">:</span> <span class="cm-string">"Ida"</span>
    <span class="cm-variable">age</span><span class="cm-punctuation">:</span>  <span class="cm-number">9</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="objects_and_arrays-js">var bitlist, kids, singers, song;

song = ["do", "re", "mi", "fa", "so"];

singers = {
  Jagger: "Rock",
  Elvis: "Roll"
};

bitlist = [1, 0, 1, 0, 0, 1, 1, 1, 0];

kids = {
  brother: {
    name: "Max",
    age: 11
  },
  sister: {
    name: "Ida",
    age: 9
  }
};
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">bitlist</span>, <span class="cm-def">kids</span>, <span class="cm-def">singers</span>, <span class="cm-def">song</span>;

<span class="cm-variable">song</span> <span class="cm-operator">=</span> [<span class="cm-string">"do"</span>, <span class="cm-string">"re"</span>, <span class="cm-string">"mi"</span>, <span class="cm-string">"fa"</span>, <span class="cm-string">"so"</span>];

<span class="cm-variable">singers</span> <span class="cm-operator">=</span> {
  <span class="cm-property">Jagger</span>: <span class="cm-string">"Rock"</span>,
  <span class="cm-property">Elvis</span>: <span class="cm-string">"Roll"</span>
};

<span class="cm-variable">bitlist</span> <span class="cm-operator">=</span> [<span class="cm-number">1</span>, <span class="cm-number">0</span>, <span class="cm-number">1</span>, <span class="cm-number">0</span>, <span class="cm-number">0</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-number">0</span>];

<span class="cm-variable">kids</span> <span class="cm-operator">=</span> {
  <span class="cm-property">brother</span>: {
    <span class="cm-property">name</span>: <span class="cm-string">"Max"</span>,
    <span class="cm-property">age</span>: <span class="cm-number">11</span>
  },
  <span class="cm-property">sister</span>: {
    <span class="cm-property">name</span>: <span class="cm-string">"Ida"</span>,
    <span class="cm-property">age</span>: <span class="cm-number">9</span>
  }
};
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="objects_and_arrays" data-run="song.join%28%22%20%u2026%20%22%29"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>song.join(&quot; … &quot;)</button>
    </div>
  </div>
  
</aside>
<p>當你要建立一個鍵名與變數名稱相同的物件時，CoffeeScript 提供了你一個簡單的用法。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="objects_shorthand">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="objects_shorthand-coffee">name = "Michelangelo"
mask = "orange"
weapon = "nunchuks"
turtle = {name, mask, weapon}
output = "#{turtle.name} wears an #{turtle.mask} mask. Watch out for his #{turtle.weapon}!"
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">name</span> <span class="cm-punctuation">=</span> <span class="cm-string">"Michelangelo"</span>
<span class="cm-variable">mask</span> <span class="cm-punctuation">=</span> <span class="cm-string">"orange"</span>
<span class="cm-variable">weapon</span> <span class="cm-punctuation">=</span> <span class="cm-string">"nunchuks"</span>
<span class="cm-variable">turtle</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">{</span><span class="cm-variable">name</span><span class="cm-punctuation">,</span> <span class="cm-variable">mask</span><span class="cm-punctuation">,</span> <span class="cm-variable">weapon</span><span class="cm-punctuation">}</span>
<span class="cm-variable">output</span> <span class="cm-punctuation">=</span> <span class="cm-string">"#{turtle.name} wears an #{turtle.mask} mask. Watch out for his #{turtle.weapon}!"</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="objects_shorthand-js">var mask, name, output, turtle, weapon;

name = "Michelangelo";

mask = "orange";

weapon = "nunchuks";

turtle = {name, mask, weapon};

output = `${turtle.name} wears an ${turtle.mask} mask. Watch out for his ${turtle.weapon}!`;
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">mask</span>, <span class="cm-def">name</span>, <span class="cm-def">output</span>, <span class="cm-def">turtle</span>, <span class="cm-def">weapon</span>;

<span class="cm-variable">name</span> <span class="cm-operator">=</span> <span class="cm-string">"Michelangelo"</span>;

<span class="cm-variable">mask</span> <span class="cm-operator">=</span> <span class="cm-string">"orange"</span>;

<span class="cm-variable">weapon</span> <span class="cm-operator">=</span> <span class="cm-string">"nunchuks"</span>;

<span class="cm-variable">turtle</span> <span class="cm-operator">=</span> {<span class="cm-property">name</span>, <span class="cm-property">mask</span>, <span class="cm-property">weapon</span>};

<span class="cm-variable">output</span> <span class="cm-operator">=</span> <span class="cm-string-2">`${</span><span class="cm-variable">turtle</span>.<span class="cm-property">name</span><span class="cm-string-2">}</span> <span class="cm-string-2">wears an ${</span><span class="cm-variable">turtle</span>.<span class="cm-property">mask</span><span class="cm-string-2">}</span> <span class="cm-string-2">mask. Watch out for his ${</span><span class="cm-variable">turtle</span>.<span class="cm-property">weapon</span><span class="cm-string-2">}!`</span>;
</pre>
    </div>
  </div>
  
</aside>

        </section>
        <section id="comments">
          <h2>註釋</h2>
<p>在 CoffeeScript 中，註釋以 <code>#</code> 符號起首，或者 <code>###</code> 到下一個 <code>###</code> 符號。註釋會被編譯器忽略，不過要是可以的話，編譯器也會自動幫你把註釋安插到輸出的 JavaScript 並找尋最適合的位置放入。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="comment">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="comment-coffee">###
Fortune Cookie Reader v1.0
Released under the MIT License
###

sayFortune = (fortune) ->
  console.log fortune # in bed!
</textarea>
      <pre class="placeholder-code"><span class="cm-comment">###</span>
<span class="cm-comment">Fortune Cookie Reader v1.0</span>
<span class="cm-comment">Released under the MIT License</span>
<span class="cm-comment">###</span>

<span class="cm-variable">sayFortune</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">(</span><span class="cm-variable">fortune</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span>
  <span class="cm-variable">console</span><span class="cm-punctuation">.</span><span class="cm-property">log</span> <span class="cm-variable">fortune</span> <span class="cm-comment"># in bed!</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="comment-js">/*
Fortune Cookie Reader v1.0
Released under the MIT License
*/
var sayFortune;

sayFortune = function(fortune) {
  return console.log(fortune); // in bed!
};
</textarea>
      <pre class="placeholder-code"><span class="cm-comment">/*</span>
<span class="cm-comment">Fortune Cookie Reader v1.0</span>
<span class="cm-comment">Released under the MIT License</span>
<span class="cm-comment">*/</span>
<span class="cm-keyword">var</span> <span class="cm-def">sayFortune</span>;

<span class="cm-variable">sayFortune</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>(<span class="cm-def">fortune</span>) {
  <span class="cm-keyword">return</span> <span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable-2">fortune</span>); <span class="cm-comment">// in bed!</span>
};
</pre>
    </div>
  </div>
  
</aside>
<p>單行的 <code>###</code> 註釋讓你能夠使用<a href="#type-annotations">型態註解</a>功能。</p>

        </section>
        <section id="lexical-scope">
          <h2>有效範圍和變數安全性</h2>
<p>CoffeeScript 編譯器能夠依照期望的方式自動宣告變數的有效範圍─這讓你不需要手動撰寫 <code>var</code> 來宣告變數。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="scope">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="scope-coffee">outer = 1
changeNumbers = ->
  inner = -1
  outer = 10
inner = changeNumbers()
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">outer</span> <span class="cm-punctuation">=</span> <span class="cm-number">1</span>
<span class="cm-variable">changeNumbers</span> <span class="cm-punctuation">=</span> <span class="cm-operator">-></span>
  <span class="cm-variable">inner</span> <span class="cm-punctuation">=</span> <span class="cm-number">-1</span>
  <span class="cm-variable">outer</span> <span class="cm-punctuation">=</span> <span class="cm-number">10</span>
<span class="cm-variable">inner</span> <span class="cm-punctuation">=</span> <span class="cm-variable">changeNumbers</span><span class="cm-punctuation">()</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="scope-js">var changeNumbers, inner, outer;

outer = 1;

changeNumbers = function() {
  var inner;
  inner = -1;
  return outer = 10;
};

inner = changeNumbers();
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">changeNumbers</span>, <span class="cm-def">inner</span>, <span class="cm-def">outer</span>;

<span class="cm-variable">outer</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>;

<span class="cm-variable">changeNumbers</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>() {
  <span class="cm-keyword">var</span> <span class="cm-def">inner</span>;
  <span class="cm-variable-2">inner</span> <span class="cm-operator">=</span> <span class="cm-operator">-</span><span class="cm-number">1</span>;
  <span class="cm-keyword">return</span> <span class="cm-variable">outer</span> <span class="cm-operator">=</span> <span class="cm-number">10</span>;
};

<span class="cm-variable">inner</span> <span class="cm-operator">=</span> <span class="cm-variable">changeNumbers</span>();
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="scope" data-run="inner"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>inner</button>
    </div>
  </div>
  
</aside>
<p>可以意識到的是：在範例中任何第一次出現的變數都會盡可能地在該範圍宣告，之後因為 <code>outer</code> 已經在父範圍被宣告過了，因此並不會在內部函式又重新宣告一次；而 <code>inner</code> 是在函式內宣告的，因此不會變更到函式外所宣告的變數。</p>
<p>由於你沒有辦法直接使用 <code>var</code> 語法，因此在巢狀函式結構中需要額外注意你不是正在修改外部所宣告的變數。</p>
<p>所有 CoffeeScript 所輸出的程式碼都會被一個匿名函式包覆著（除了 <code>import</code> 和 <code>export</code> 語法）：<code>(function(){ … })();</code>。我們稱其為「有效範圍保護函式」，這個做法能夠讓你的每個檔案都有自己的有效範圍，而不會直接暴露到全域範圍導致不同檔案都在更改同個變數。（如果你不希望有這層保護的話，可以透過 <a href="#usage"><code>bare</code> 選項</a>進行關閉。與模組系統使用時則不需要特別指定也會啟用這個選項。）</p>
<p>如果你希望能夠建立一個全域變數供其他檔案或腳本使用的話，請試圖將其變數建立於 <code>window</code> 屬性底下；或是 CommonJS 的 <code>exports</code> 物件底下；甚至是使用 <a href="#modules"><code>export</code> 語法</a>。如果希望腳本可以用於 CommonJS 和瀏覽器兩者的話，請參閱<a href="#existential-operator">存在運算子</a>章節，這讓你能夠得知目前執行的環境可用何種方法輸出：<code>exports ? this</code>。</p>
<p>理所當然地，因為 CoffeeScript 接管了所有變數的宣告，這也讓你沒辦法手動以 ES2015 的 <code>let</code> 或 <code>const</code> 來宣告片段變數。其實這早在<a href="#unsupported-let-const">我們的預料中</a>；因為我們希望能夠透過較簡單的方式來設計程式，否則就會過度思考整個有效範圍。</p>

        </section>
        <section id="conditionals">
          <h2>If、Else、Unless 與條件判斷式</h2>
<p><code>if</code>/<code>else</code> 條件判斷式撰寫的時候可以省略大括號和弧形括號。就像函式跟其他的區塊表達式一樣，只要是單行以上的條件式內容都是用對齊來搞定。順帶一提的是：你能夠把 <code>if</code> 跟 <code>unless</code> 放在最後面以便符合英文的文法。</p>
<p>CoffeeScript 可以將 <code>if</code> 條件判斷式轉換成 JavaScript 的表達式，並在可以的時候轉換成三元運算子（Ternary）；不然就以正常的大括號包覆處理。不過在 CoffeeScript 中沒有具體的三元運算子用法，使用單行的 <code>if</code> 條件判斷式即可。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="conditionals">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="conditionals-coffee">mood = greatlyImproved if singing

if happy and knowsIt
  clapsHands()
  chaChaCha()
else
  showIt()

date = if friday then sue else jill
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">mood</span> <span class="cm-punctuation">=</span> <span class="cm-variable">greatlyImproved</span> <span class="cm-keyword">if</span> <span class="cm-variable">singing</span>

<span class="cm-keyword">if</span> <span class="cm-variable">happy</span> <span class="cm-operator">and</span> <span class="cm-variable">knowsIt</span>
  <span class="cm-variable">clapsHands</span><span class="cm-punctuation">()</span>
  <span class="cm-variable">chaChaCha</span><span class="cm-punctuation">()</span>
<span class="cm-keyword">else</span>
  <span class="cm-variable">showIt</span><span class="cm-punctuation">()</span>

<span class="cm-variable">date</span> <span class="cm-punctuation">=</span> <span class="cm-keyword">if</span> <span class="cm-variable">friday</span> <span class="cm-keyword">then</span> <span class="cm-variable">sue</span> <span class="cm-keyword">else</span> <span class="cm-variable">jill</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="conditionals-js">var date, mood;

if (singing) {
  mood = greatlyImproved;
}

if (happy && knowsIt) {
  clapsHands();
  chaChaCha();
} else {
  showIt();
}

date = friday ? sue : jill;
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">date</span>, <span class="cm-def">mood</span>;

<span class="cm-keyword">if</span> (<span class="cm-variable">singing</span>) {
  <span class="cm-variable">mood</span> <span class="cm-operator">=</span> <span class="cm-variable">greatlyImproved</span>;
}

<span class="cm-keyword">if</span> (<span class="cm-variable">happy</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">knowsIt</span>) {
  <span class="cm-variable">clapsHands</span>();
  <span class="cm-variable">chaChaCha</span>();
} <span class="cm-keyword">else</span> {
  <span class="cm-variable">showIt</span>();
}

<span class="cm-variable">date</span> <span class="cm-operator">=</span> <span class="cm-variable">friday</span> <span class="cm-operator">?</span> <span class="cm-variable">sue</span> : <span class="cm-variable">jill</span>;
</pre>
    </div>
  </div>
  
</aside>

        </section>
        <section id="splats">
          <h2>變參、其餘與展開運算子</h2>
<p>JavaScript 的 <code>arguments</code> 物件在處理多個傳入參數時很方便。而 CoffeeScript 的 <code>...</code> 正因此想法而生，兩者功能皆相同。在之後的 ES2015 也有了相同的<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters">其餘運算子</a>。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="splats">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="splats-coffee">gold = silver = rest = "unknown"

awardMedals = (first, second, others...) ->
  gold   = first
  silver = second
  rest   = others

contenders = [
  "Michael Phelps"
  "Liu Xiang"
  "Yao Ming"
  "Allyson Felix"
  "Shawn Johnson"
  "Roman Sebrle"
  "Guo Jingjing"
  "Tyson Gay"
  "Asafa Powell"
  "Usain Bolt"
]

awardMedals contenders...

alert """
Gold: #{gold}
Silver: #{silver}
The Field: #{rest.join ', '}
"""
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">gold</span> <span class="cm-punctuation">=</span> <span class="cm-variable">silver</span> <span class="cm-punctuation">=</span> <span class="cm-variable">rest</span> <span class="cm-punctuation">=</span> <span class="cm-string">"unknown"</span>

<span class="cm-variable">awardMedals</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">(</span><span class="cm-variable">first</span><span class="cm-punctuation">,</span> <span class="cm-variable">second</span><span class="cm-punctuation">,</span> <span class="cm-variable">others</span><span class="cm-punctuation">...)</span> <span class="cm-operator">-></span>
  <span class="cm-variable">gold</span>   <span class="cm-punctuation">=</span> <span class="cm-variable">first</span>
  <span class="cm-variable">silver</span> <span class="cm-punctuation">=</span> <span class="cm-variable">second</span>
  <span class="cm-variable">rest</span>   <span class="cm-punctuation">=</span> <span class="cm-variable">others</span>

<span class="cm-variable">contenders</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">[</span>
  <span class="cm-string">"Michael Phelps"</span>
  <span class="cm-string">"Liu Xiang"</span>
  <span class="cm-string">"Yao Ming"</span>
  <span class="cm-string">"Allyson Felix"</span>
  <span class="cm-string">"Shawn Johnson"</span>
  <span class="cm-string">"Roman Sebrle"</span>
  <span class="cm-string">"Guo Jingjing"</span>
  <span class="cm-string">"Tyson Gay"</span>
  <span class="cm-string">"Asafa Powell"</span>
  <span class="cm-string">"Usain Bolt"</span>
<span class="cm-punctuation">]</span>

<span class="cm-variable">awardMedals</span> <span class="cm-variable">contenders</span><span class="cm-punctuation">...</span>

<span class="cm-variable">alert</span> <span class="cm-string">"""</span>
<span class="cm-string">Gold: #{gold}</span>
<span class="cm-string">Silver: #{silver}</span>
<span class="cm-string">The Field: #{rest.join ', '}</span>
<span class="cm-string">"""</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="splats-js">var awardMedals, contenders, gold, rest, silver;

gold = silver = rest = "unknown";

awardMedals = function(first, second, ...others) {
  gold = first;
  silver = second;
  return rest = others;
};

contenders = ["Michael Phelps", "Liu Xiang", "Yao Ming", "Allyson Felix", "Shawn Johnson", "Roman Sebrle", "Guo Jingjing", "Tyson Gay", "Asafa Powell", "Usain Bolt"];

awardMedals(...contenders);

alert(`Gold: ${gold}\nSilver: ${silver}\nThe Field: ${rest.join(', ')}`);
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">awardMedals</span>, <span class="cm-def">contenders</span>, <span class="cm-def">gold</span>, <span class="cm-def">rest</span>, <span class="cm-def">silver</span>;

<span class="cm-variable">gold</span> <span class="cm-operator">=</span> <span class="cm-variable">silver</span> <span class="cm-operator">=</span> <span class="cm-variable">rest</span> <span class="cm-operator">=</span> <span class="cm-string">"unknown"</span>;

<span class="cm-variable">awardMedals</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>(<span class="cm-def">first</span>, <span class="cm-def">second</span>, <span class="cm-meta">...</span><span class="cm-def">others</span>) {
  <span class="cm-variable">gold</span> <span class="cm-operator">=</span> <span class="cm-variable-2">first</span>;
  <span class="cm-variable">silver</span> <span class="cm-operator">=</span> <span class="cm-variable-2">second</span>;
  <span class="cm-keyword">return</span> <span class="cm-variable">rest</span> <span class="cm-operator">=</span> <span class="cm-variable-2">others</span>;
};

<span class="cm-variable">contenders</span> <span class="cm-operator">=</span> [<span class="cm-string">"Michael Phelps"</span>, <span class="cm-string">"Liu Xiang"</span>, <span class="cm-string">"Yao Ming"</span>, <span class="cm-string">"Allyson Felix"</span>, <span class="cm-string">"Shawn Johnson"</span>, <span class="cm-string">"Roman Sebrle"</span>, <span class="cm-string">"Guo Jingjing"</span>, <span class="cm-string">"Tyson Gay"</span>, <span class="cm-string">"Asafa Powell"</span>, <span class="cm-string">"Usain Bolt"</span>];

<span class="cm-variable">awardMedals</span>(<span class="cm-meta">...</span><span class="cm-variable">contenders</span>);

<span class="cm-variable">alert</span>(<span class="cm-string-2">`Gold: ${</span><span class="cm-variable">gold</span><span class="cm-string-2">}\nSilver: ${</span><span class="cm-variable">silver</span><span class="cm-string-2">}\nThe Field: ${</span><span class="cm-variable">rest</span>.<span class="cm-property">join</span>(<span class="cm-string">', '</span>)<span class="cm-string-2">}`</span>);
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="splats" data-run="true"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small></button>
    </div>
  </div>
  
</aside>
<div id="array-spread" class="bookmark"></div>
<p>其餘運算子同時也能夠用來讓我們「省略」陣列元素⋯</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="array_spread">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="array_spread-coffee">popular  = ['pepperoni', 'sausage', 'cheese']
unwanted = ['anchovies', 'olives']

all = [popular..., unwanted..., 'mushrooms']
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">popular</span>  <span class="cm-punctuation">=</span> <span class="cm-punctuation">[</span><span class="cm-string">'pepperoni'</span><span class="cm-punctuation">,</span> <span class="cm-string">'sausage'</span><span class="cm-punctuation">,</span> <span class="cm-string">'cheese'</span><span class="cm-punctuation">]</span>
<span class="cm-variable">unwanted</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">[</span><span class="cm-string">'anchovies'</span><span class="cm-punctuation">,</span> <span class="cm-string">'olives'</span><span class="cm-punctuation">]</span>

<span class="cm-variable">all</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">[</span><span class="cm-variable">popular</span><span class="cm-punctuation">...,</span> <span class="cm-variable">unwanted</span><span class="cm-punctuation">...,</span> <span class="cm-string">'mushrooms'</span><span class="cm-punctuation">]</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="array_spread-js">var all, popular, unwanted;

popular = ['pepperoni', 'sausage', 'cheese'];

unwanted = ['anchovies', 'olives'];

all = [...popular, ...unwanted, 'mushrooms'];
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">all</span>, <span class="cm-def">popular</span>, <span class="cm-def">unwanted</span>;

<span class="cm-variable">popular</span> <span class="cm-operator">=</span> [<span class="cm-string">'pepperoni'</span>, <span class="cm-string">'sausage'</span>, <span class="cm-string">'cheese'</span>];

<span class="cm-variable">unwanted</span> <span class="cm-operator">=</span> [<span class="cm-string">'anchovies'</span>, <span class="cm-string">'olives'</span>];

<span class="cm-variable">all</span> <span class="cm-operator">=</span> [<span class="cm-meta">...</span><span class="cm-variable">popular</span>, <span class="cm-meta">...</span><span class="cm-variable">unwanted</span>, <span class="cm-string">'mushrooms'</span>];
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="array_spread" data-run="all"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>all</button>
    </div>
  </div>
  
</aside>
<div id="object-spread" class="bookmark"></div>
<p>⋯還有物件屬性。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="object_spread">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="object_spread-coffee">user =
  name: 'Werner Heisenberg'
  occupation: 'theoretical physicist'

currentUser = { user..., status: 'Uncertain' }
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">user</span> <span class="cm-punctuation">=</span>
<span class="cm-indent">  </span><span class="cm-variable">name</span><span class="cm-punctuation">:</span> <span class="cm-string">'Werner Heisenberg'</span>
  <span class="cm-variable">occupation</span><span class="cm-punctuation">:</span> <span class="cm-string">'theoretical physicist'</span>

<span class="cm-variable">currentUser</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">{</span> <span class="cm-variable">user</span><span class="cm-punctuation">...,</span> <span class="cm-variable">status</span><span class="cm-punctuation">:</span> <span class="cm-string">'Uncertain'</span> <span class="cm-punctuation">}</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="object_spread-js">var currentUser, user;

user = {
  name: 'Werner Heisenberg',
  occupation: 'theoretical physicist'
};

currentUser = {
  ...user,
  status: 'Uncertain'
};
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">currentUser</span>, <span class="cm-def">user</span>;

<span class="cm-variable">user</span> <span class="cm-operator">=</span> {
  <span class="cm-property">name</span>: <span class="cm-string">'Werner Heisenberg'</span>,
  <span class="cm-property">occupation</span>: <span class="cm-string">'theoretical physicist'</span>
};

<span class="cm-variable">currentUser</span> <span class="cm-operator">=</span> {
  <span class="cm-meta">...</span><span class="cm-variable">user</span>,
  <span class="cm-property">status</span>: <span class="cm-string">'Uncertain'</span>
};
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="object_spread" data-run="JSON.stringify%28currentUser%29"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>JSON.stringify(currentUser)</button>
    </div>
  </div>
  
</aside>
<p>這功能在 ECMAScript 中稱之為<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator">展開運算子</a>，並且在 ES2015 時就支援展開陣列、而 ES2018 時支援展開物件。</p>

        </section>
        <section id="loops">
          <h2>迴圈與推導</h2>
<p>在 CoffeeScript 裡，多數的迴圈寫法都是以 <strong>推導</strong> 的方式來遍歷整個陣列、物件。推導會被編譯成標準的 <code>for</code> 迴圈，且可以選擇性地取得迴圈索引和其現有值。和普通迴圈不一樣的的在於：陣列推導是表達式，這讓你能夠將其迴圈作為值回傳或賦予給某個變數。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="array_comprehensions">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="array_comprehensions-coffee"># 吃早餐。
eat = (food) -> "#{food} eaten."
eat food for food in ['toast', 'cheese', 'wine']

# 來點甜點。
courses = ['greens', 'caviar', 'truffles', 'roast', 'cake']
menu = (i, dish) -> "Menu Item #{i}: #{dish}"
menu i + 1, dish for dish, i in courses

# 健康的一餐。
foods = ['broccoli', 'spinach', 'chocolate']
eat food for food in foods when food isnt 'chocolate'
</textarea>
      <pre class="placeholder-code"><span class="cm-comment"># 吃早餐。</span>
<span class="cm-variable">eat</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">(</span><span class="cm-variable">food</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span> <span class="cm-string">"#{food} eaten."</span>
<span class="cm-variable">eat</span> <span class="cm-variable">food</span> <span class="cm-keyword">for</span> <span class="cm-variable">food</span> <span class="cm-operator">in</span> <span class="cm-punctuation">[</span><span class="cm-string">'toast'</span><span class="cm-punctuation">,</span> <span class="cm-string">'cheese'</span><span class="cm-punctuation">,</span> <span class="cm-string">'wine'</span><span class="cm-punctuation">]</span>

<span class="cm-comment"># 來點甜點。</span>
<span class="cm-variable">courses</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">[</span><span class="cm-string">'greens'</span><span class="cm-punctuation">,</span> <span class="cm-string">'caviar'</span><span class="cm-punctuation">,</span> <span class="cm-string">'truffles'</span><span class="cm-punctuation">,</span> <span class="cm-string">'roast'</span><span class="cm-punctuation">,</span> <span class="cm-string">'cake'</span><span class="cm-punctuation">]</span>
<span class="cm-variable">menu</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">(</span><span class="cm-variable">i</span><span class="cm-punctuation">,</span> <span class="cm-variable">dish</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span> <span class="cm-string">"Menu Item #{i}: #{dish}"</span>
<span class="cm-variable">menu</span> <span class="cm-variable">i</span> <span class="cm-operator">+</span> <span class="cm-number">1</span><span class="cm-punctuation">,</span> <span class="cm-variable">dish</span> <span class="cm-keyword">for</span> <span class="cm-variable">dish</span><span class="cm-punctuation">,</span> <span class="cm-variable">i</span> <span class="cm-operator">in</span> <span class="cm-variable">courses</span>

<span class="cm-comment"># 健康的一餐。</span>
<span class="cm-variable">foods</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">[</span><span class="cm-string">'broccoli'</span><span class="cm-punctuation">,</span> <span class="cm-string">'spinach'</span><span class="cm-punctuation">,</span> <span class="cm-string">'chocolate'</span><span class="cm-punctuation">]</span>
<span class="cm-variable">eat</span> <span class="cm-variable">food</span> <span class="cm-keyword">for</span> <span class="cm-variable">food</span> <span class="cm-operator">in</span> <span class="cm-variable">foods</span> <span class="cm-keyword">when</span> <span class="cm-variable">food</span> <span class="cm-operator">isnt</span> <span class="cm-string">'chocolate'</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="array_comprehensions-js">// 吃早餐。
var courses, dish, eat, food, foods, i, j, k, l, len, len1, len2, menu, ref;

eat = function(food) {
  return `${food} eaten.`;
};

ref = ['toast', 'cheese', 'wine'];
for (j = 0, len = ref.length; j < len; j++) {
  food = ref[j];
  eat(food);
}

// 來點甜點。
courses = ['greens', 'caviar', 'truffles', 'roast', 'cake'];

menu = function(i, dish) {
  return `Menu Item ${i}: ${dish}`;
};

for (i = k = 0, len1 = courses.length; k < len1; i = ++k) {
  dish = courses[i];
  menu(i + 1, dish);
}

// 健康的一餐。
foods = ['broccoli', 'spinach', 'chocolate'];

for (l = 0, len2 = foods.length; l < len2; l++) {
  food = foods[l];
  if (food !== 'chocolate') {
    eat(food);
  }
}
</textarea>
      <pre class="placeholder-code"><span class="cm-comment">// 吃早餐。</span>
<span class="cm-keyword">var</span> <span class="cm-def">courses</span>, <span class="cm-def">dish</span>, <span class="cm-def">eat</span>, <span class="cm-def">food</span>, <span class="cm-def">foods</span>, <span class="cm-def">i</span>, <span class="cm-def">j</span>, <span class="cm-def">k</span>, <span class="cm-def">l</span>, <span class="cm-def">len</span>, <span class="cm-def">len1</span>, <span class="cm-def">len2</span>, <span class="cm-def">menu</span>, <span class="cm-def">ref</span>;

<span class="cm-variable">eat</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>(<span class="cm-def">food</span>) {
  <span class="cm-keyword">return</span> <span class="cm-string-2">`${</span><span class="cm-variable-2">food</span><span class="cm-string-2">}</span> <span class="cm-string-2">eaten.`</span>;
};

<span class="cm-variable">ref</span> <span class="cm-operator">=</span> [<span class="cm-string">'toast'</span>, <span class="cm-string">'cheese'</span>, <span class="cm-string">'wine'</span>];
<span class="cm-keyword">for</span> (<span class="cm-variable">j</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>, <span class="cm-variable">len</span> <span class="cm-operator">=</span> <span class="cm-variable">ref</span>.<span class="cm-property">length</span>; <span class="cm-variable">j</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">len</span>; <span class="cm-variable">j</span><span class="cm-operator">++</span>) {
  <span class="cm-variable">food</span> <span class="cm-operator">=</span> <span class="cm-variable">ref</span>[<span class="cm-variable">j</span>];
  <span class="cm-variable">eat</span>(<span class="cm-variable">food</span>);
}

<span class="cm-comment">// 來點甜點。</span>
<span class="cm-variable">courses</span> <span class="cm-operator">=</span> [<span class="cm-string">'greens'</span>, <span class="cm-string">'caviar'</span>, <span class="cm-string">'truffles'</span>, <span class="cm-string">'roast'</span>, <span class="cm-string">'cake'</span>];

<span class="cm-variable">menu</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>(<span class="cm-def">i</span>, <span class="cm-def">dish</span>) {
  <span class="cm-keyword">return</span> <span class="cm-string-2">`Menu Item ${</span><span class="cm-variable-2">i</span><span class="cm-string-2">}: ${</span><span class="cm-variable-2">dish</span><span class="cm-string-2">}`</span>;
};

<span class="cm-keyword">for</span> (<span class="cm-variable">i</span> <span class="cm-operator">=</span> <span class="cm-variable">k</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>, <span class="cm-variable">len1</span> <span class="cm-operator">=</span> <span class="cm-variable">courses</span>.<span class="cm-property">length</span>; <span class="cm-variable">k</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">len1</span>; <span class="cm-variable">i</span> <span class="cm-operator">=</span> <span class="cm-operator">++</span><span class="cm-variable">k</span>) {
  <span class="cm-variable">dish</span> <span class="cm-operator">=</span> <span class="cm-variable">courses</span>[<span class="cm-variable">i</span>];
  <span class="cm-variable">menu</span>(<span class="cm-variable">i</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>, <span class="cm-variable">dish</span>);
}

<span class="cm-comment">// 健康的一餐。</span>
<span class="cm-variable">foods</span> <span class="cm-operator">=</span> [<span class="cm-string">'broccoli'</span>, <span class="cm-string">'spinach'</span>, <span class="cm-string">'chocolate'</span>];

<span class="cm-keyword">for</span> (<span class="cm-variable">l</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>, <span class="cm-variable">len2</span> <span class="cm-operator">=</span> <span class="cm-variable">foods</span>.<span class="cm-property">length</span>; <span class="cm-variable">l</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">len2</span>; <span class="cm-variable">l</span><span class="cm-operator">++</span>) {
  <span class="cm-variable">food</span> <span class="cm-operator">=</span> <span class="cm-variable">foods</span>[<span class="cm-variable">l</span>];
  <span class="cm-keyword">if</span> (<span class="cm-variable">food</span> <span class="cm-operator">!==</span> <span class="cm-string">'chocolate'</span>) {
    <span class="cm-variable">eat</span>(<span class="cm-variable">food</span>);
  }
}
</pre>
    </div>
  </div>
  
</aside>
<p>陣列推導能夠符合你通常會用上迴圈、<code>each</code> 或 <code>forEach</code>、<code>map</code> 和 <code>select</code> 與 <code>filter</code> 的地方：<br>
<code>shortNames = (name for name in list when name.length &lt; 5)</code><br></p>
<p>如果你知道迴圈的起始和結束點在哪裡、或者希望固定迴圈長度的話，就可以替推導來指定一個範圍。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="range_comprehensions">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="range_comprehensions-coffee">countdown = (num for num in [10..1])
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">countdown</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">(</span><span class="cm-variable">num</span> <span class="cm-keyword">for</span> <span class="cm-variable">num</span> <span class="cm-operator">in</span> <span class="cm-punctuation">[</span><span class="cm-number">10..1</span><span class="cm-punctuation">])</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="range_comprehensions-js">var countdown, num;

countdown = (function() {
  var i, results;
  results = [];
  for (num = i = 10; i >= 1; num = --i) {
    results.push(num);
  }
  return results;
})();
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">countdown</span>, <span class="cm-def">num</span>;

<span class="cm-variable">countdown</span> <span class="cm-operator">=</span> (<span class="cm-keyword">function</span>() {
  <span class="cm-keyword">var</span> <span class="cm-def">i</span>, <span class="cm-def">results</span>;
  <span class="cm-variable-2">results</span> <span class="cm-operator">=</span> [];
  <span class="cm-keyword">for</span> (<span class="cm-variable">num</span> <span class="cm-operator">=</span> <span class="cm-variable-2">i</span> <span class="cm-operator">=</span> <span class="cm-number">10</span>; <span class="cm-variable-2">i</span> <span class="cm-operator">>=</span> <span class="cm-number">1</span>; <span class="cm-variable">num</span> <span class="cm-operator">=</span> <span class="cm-operator">--</span><span class="cm-variable-2">i</span>) {
    <span class="cm-variable-2">results</span>.<span class="cm-property">push</span>(<span class="cm-variable">num</span>);
  }
  <span class="cm-keyword">return</span> <span class="cm-variable-2">results</span>;
})();
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="range_comprehensions" data-run="countdown"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>countdown</button>
    </div>
  </div>
  
</aside>
<p>在上述範例中可以看到的是：我們正要將一個陣列推導的結果賦予到變數中，所以 CoffeeScript 會自動收集其迴圈的結果並傳到該變數。雖然說這很方便，但多數時候還是要注意推導有時候可能會因此而自動在某個函式中回傳了不必要的數值，這個時候請記得要在函式底部手動回傳一些像是 <code>true</code>、<code>null</code> 等資料來避免推導結果被回傳。</p>
<p>如果要在固定長度的陣列推導中跨階，可以使用 <code>by</code> 關鍵字，像是：
<code>evens = (x for x in [0..10] by 2)</code></p>
<p>如果你不需要目前遍歷的內容值，你可以直接省略它：
<code>browser.closeCurrentTab() for [0...count]</code></p>
<p>推導也能夠用於物件的鍵名和內容值。透過 <code>of</code> 來遍歷一個物件。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="object_comprehensions">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="object_comprehensions-coffee">yearsOld = max: 10, ida: 9, tim: 11

ages = for child, age of yearsOld
  "#{child} is #{age}"
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">yearsOld</span> <span class="cm-punctuation">=</span> <span class="cm-variable">max</span><span class="cm-punctuation">:</span> <span class="cm-number">10</span><span class="cm-punctuation">,</span> <span class="cm-variable">ida</span><span class="cm-punctuation">:</span> <span class="cm-number">9</span><span class="cm-punctuation">,</span> <span class="cm-variable">tim</span><span class="cm-punctuation">:</span> <span class="cm-number">11</span>

<span class="cm-variable">ages</span> <span class="cm-punctuation">=</span> <span class="cm-keyword">for</span> <span class="cm-variable">child</span><span class="cm-punctuation">,</span> <span class="cm-variable">age</span> <span class="cm-keyword">of</span> <span class="cm-variable">yearsOld</span>
  <span class="cm-string">"#{child} is #{age}"</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="object_comprehensions-js">var age, ages, child, yearsOld;

yearsOld = {
  max: 10,
  ida: 9,
  tim: 11
};

ages = (function() {
  var results;
  results = [];
  for (child in yearsOld) {
    age = yearsOld[child];
    results.push(`${child} is ${age}`);
  }
  return results;
})();
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">age</span>, <span class="cm-def">ages</span>, <span class="cm-def">child</span>, <span class="cm-def">yearsOld</span>;

<span class="cm-variable">yearsOld</span> <span class="cm-operator">=</span> {
  <span class="cm-property">max</span>: <span class="cm-number">10</span>,
  <span class="cm-property">ida</span>: <span class="cm-number">9</span>,
  <span class="cm-property">tim</span>: <span class="cm-number">11</span>
};

<span class="cm-variable">ages</span> <span class="cm-operator">=</span> (<span class="cm-keyword">function</span>() {
  <span class="cm-keyword">var</span> <span class="cm-def">results</span>;
  <span class="cm-variable-2">results</span> <span class="cm-operator">=</span> [];
  <span class="cm-keyword">for</span> (<span class="cm-variable">child</span> <span class="cm-keyword">in</span> <span class="cm-variable">yearsOld</span>) {
    <span class="cm-variable">age</span> <span class="cm-operator">=</span> <span class="cm-variable">yearsOld</span>[<span class="cm-variable">child</span>];
    <span class="cm-variable-2">results</span>.<span class="cm-property">push</span>(<span class="cm-string-2">`${</span><span class="cm-variable">child</span><span class="cm-string-2">}</span> <span class="cm-string-2">is ${</span><span class="cm-variable">age</span><span class="cm-string-2">}`</span>);
  }
  <span class="cm-keyword">return</span> <span class="cm-variable-2">results</span>;
})();
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="object_comprehensions" data-run="ages.join%28%22%2C%20%22%29"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>ages.join(&quot;, &quot;)</button>
    </div>
  </div>
  
</aside>
<p>如果你想要透過 <code>hasOwnProperty</code> 這種方式來遍歷並檢查物件的某些屬性（用以避免取得原型鏈底層的屬性），可以用上像是 <code>for own key, value of object</code> 的方法。</p>
<p>如果要遍歷一個產生器函式，則是使用 <code>from</code> 關鍵字。請參閱<a href="#generator-iteration">產生器函式</a>。</p>
<p><code>while</code> 是 CoffeeScript 中最底層的迴圈。和 JavaScript 的 <code>while</code> 迴圈不太一樣的地方在於你能夠將其當作表達式使用，並且遍歷其內容且將結果作為陣列型態回傳。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="while">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="while-coffee"># 經濟大哉問
if this.studyingEconomics
  buy()  while supply > demand
  sell() until supply > demand

# 童謠
num = 6
lyrics = while num -= 1
  "#{num} little monkeys, jumping on the bed.
    One fell out and bumped his head."
</textarea>
      <pre class="placeholder-code"><span class="cm-comment"># 經濟大哉問</span>
<span class="cm-keyword">if</span> <span class="cm-keyword">this</span><span class="cm-punctuation">.</span><span class="cm-property">studyingEconomics</span>
  <span class="cm-variable">buy</span><span class="cm-punctuation">()</span>  <span class="cm-keyword">while</span> <span class="cm-variable">supply</span> <span class="cm-operator">></span> <span class="cm-variable">demand</span>
<span class="cm-dedent">  </span><span class="cm-variable">sell</span><span class="cm-punctuation">()</span> <span class="cm-keyword">until</span> <span class="cm-variable">supply</span> <span class="cm-operator">></span> <span class="cm-variable">demand</span>

<span class="cm-comment"># 童謠</span>
<span class="cm-variable">num</span> <span class="cm-punctuation">=</span> <span class="cm-number">6</span>
<span class="cm-variable">lyrics</span> <span class="cm-punctuation">=</span> <span class="cm-keyword">while</span> <span class="cm-variable">num</span> <span class="cm-operator">-=</span> <span class="cm-number">1</span>
  <span class="cm-string">"#{num} little monkeys, jumping on the bed.</span>
<span class="cm-string">    One fell out and bumped his head."</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="while-js">// 經濟大哉問
var lyrics, num;

if (this.studyingEconomics) {
  while (supply > demand) {
    buy();
  }
  while (!(supply > demand)) {
    sell();
  }
}

// 童謠
num = 6;

lyrics = (function() {
  var results;
  results = [];
  while (num -= 1) {
    results.push(`${num} little monkeys, jumping on the bed. One fell out and bumped his head.`);
  }
  return results;
})();
</textarea>
      <pre class="placeholder-code"><span class="cm-comment">// 經濟大哉問</span>
<span class="cm-keyword">var</span> <span class="cm-def">lyrics</span>, <span class="cm-def">num</span>;

<span class="cm-keyword">if</span> (<span class="cm-keyword">this</span>.<span class="cm-property">studyingEconomics</span>) {
  <span class="cm-keyword">while</span> (<span class="cm-variable">supply</span> <span class="cm-operator">></span> <span class="cm-variable">demand</span>) {
    <span class="cm-variable">buy</span>();
  }
  <span class="cm-keyword">while</span> (<span class="cm-operator">!</span>(<span class="cm-variable">supply</span> <span class="cm-operator">></span> <span class="cm-variable">demand</span>)) {
    <span class="cm-variable">sell</span>();
  }
}

<span class="cm-comment">// 童謠</span>
<span class="cm-variable">num</span> <span class="cm-operator">=</span> <span class="cm-number">6</span>;

<span class="cm-variable">lyrics</span> <span class="cm-operator">=</span> (<span class="cm-keyword">function</span>() {
  <span class="cm-keyword">var</span> <span class="cm-def">results</span>;
  <span class="cm-variable-2">results</span> <span class="cm-operator">=</span> [];
  <span class="cm-keyword">while</span> (<span class="cm-variable">num</span> <span class="cm-operator">-=</span> <span class="cm-number">1</span>) {
    <span class="cm-variable-2">results</span>.<span class="cm-property">push</span>(<span class="cm-string-2">`${</span><span class="cm-variable">num</span><span class="cm-string-2">}</span> <span class="cm-string-2">little monkeys, jumping on the bed. One fell out and bumped his head.`</span>);
  }
  <span class="cm-keyword">return</span> <span class="cm-variable-2">results</span>;
})();
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="while" data-run="lyrics.join%28%22%5Cn%22%29"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>lyrics.join(&quot;\n&quot;)</button>
    </div>
  </div>
  
</aside>
<p>為了閱讀起來符合相關文法，<code>until</code> 關鍵字與 <code>while not</code> 是相同的，而 <code>loop</code> 也等同於 <code>while true</code>。</p>
<p>若要將 JavaScript 的迴圈值傳入其迴圈中的函式，我們通常都會建立閉包函式來確保這個函式所接收到的值、參數是來自於目前的這一個迴圈，避免值被下個迴圈洗刷掉。CoffeeScript 提供了 <code>do</code> 關鍵字，這能夠直接將目前的迴圈值、變數自動以閉包的方式傳入迴圈中的函式。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="do">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="do-coffee">for filename in list
  do (filename) ->
    if filename not in ['.DS_Store', 'Thumbs.db', 'ehthumbs.db']
      fs.readFile filename, (err, contents) ->
        compile filename, contents.toString()
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">for</span> <span class="cm-variable">filename</span> <span class="cm-operator">in</span> <span class="cm-variable">list</span>
  <span class="cm-keyword">do</span> <span class="cm-punctuation">(</span><span class="cm-variable">filename</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span>
    <span class="cm-keyword">if</span> <span class="cm-variable">filename</span> <span class="cm-operator">not</span> <span class="cm-operator">in</span> <span class="cm-punctuation">[</span><span class="cm-string">'.DS_Store'</span><span class="cm-punctuation">,</span> <span class="cm-string">'Thumbs.db'</span><span class="cm-punctuation">,</span> <span class="cm-string">'ehthumbs.db'</span><span class="cm-punctuation">]</span>
      <span class="cm-variable">fs</span><span class="cm-punctuation">.</span><span class="cm-property">readFile</span> <span class="cm-variable">filename</span><span class="cm-punctuation">,</span> <span class="cm-punctuation">(</span><span class="cm-variable">err</span><span class="cm-punctuation">,</span> <span class="cm-variable">contents</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span>
        <span class="cm-variable">compile</span> <span class="cm-variable">filename</span><span class="cm-punctuation">,</span> <span class="cm-variable">contents</span><span class="cm-punctuation">.</span><span class="cm-property">toString</span><span class="cm-punctuation">()</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="do-js">var filename, i, len;

for (i = 0, len = list.length; i < len; i++) {
  filename = list[i];
  (function(filename) {
    if (filename !== '.DS_Store' && filename !== 'Thumbs.db' && filename !== 'ehthumbs.db') {
      return fs.readFile(filename, function(err, contents) {
        return compile(filename, contents.toString());
      });
    }
  })(filename);
}
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">filename</span>, <span class="cm-def">i</span>, <span class="cm-def">len</span>;

<span class="cm-keyword">for</span> (<span class="cm-variable">i</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>, <span class="cm-variable">len</span> <span class="cm-operator">=</span> <span class="cm-variable">list</span>.<span class="cm-property">length</span>; <span class="cm-variable">i</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">len</span>; <span class="cm-variable">i</span><span class="cm-operator">++</span>) {
  <span class="cm-variable">filename</span> <span class="cm-operator">=</span> <span class="cm-variable">list</span>[<span class="cm-variable">i</span>];
  (<span class="cm-keyword">function</span>(<span class="cm-def">filename</span>) {
    <span class="cm-keyword">if</span> (<span class="cm-variable-2">filename</span> <span class="cm-operator">!==</span> <span class="cm-string">'.DS_Store'</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable-2">filename</span> <span class="cm-operator">!==</span> <span class="cm-string">'Thumbs.db'</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable-2">filename</span> <span class="cm-operator">!==</span> <span class="cm-string">'ehthumbs.db'</span>) {
      <span class="cm-keyword">return</span> <span class="cm-variable">fs</span>.<span class="cm-property">readFile</span>(<span class="cm-variable-2">filename</span>, <span class="cm-keyword">function</span>(<span class="cm-def">err</span>, <span class="cm-def">contents</span>) {
        <span class="cm-keyword">return</span> <span class="cm-variable">compile</span>(<span class="cm-variable-2">filename</span>, <span class="cm-variable-2">contents</span>.<span class="cm-property">toString</span>());
      });
    }
  })(<span class="cm-variable">filename</span>);
}
</pre>
    </div>
  </div>
  
</aside>

        </section>
        <section id="slices">
          <h2>陣列切片與範圍</h2>
<p>你能夠在陣列索引中指定一個範圍。主要透過兩個點符號（像是：<code>3..6</code>），而其範圍會是（<code>3, 4, 5, 6</code>）；然而用上三個點符號的時候（<code>3...6</code>）其範圍則會排除最後一個元素而結果會是（<code>3, 4, 5</code>）。若切片沒有指定起始範圍，預設會是從零開始，而沒有結束範圍則是會以陣列的長度為主。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="slices">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="slices-coffee">numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9]

start   = numbers[0..2]

middle  = numbers[3...-2]

end     = numbers[-2..]

copy    = numbers[..]
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">numbers</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">[</span><span class="cm-number">1</span><span class="cm-punctuation">,</span> <span class="cm-number">2</span><span class="cm-punctuation">,</span> <span class="cm-number">3</span><span class="cm-punctuation">,</span> <span class="cm-number">4</span><span class="cm-punctuation">,</span> <span class="cm-number">5</span><span class="cm-punctuation">,</span> <span class="cm-number">6</span><span class="cm-punctuation">,</span> <span class="cm-number">7</span><span class="cm-punctuation">,</span> <span class="cm-number">8</span><span class="cm-punctuation">,</span> <span class="cm-number">9</span><span class="cm-punctuation">]</span>

<span class="cm-variable">start</span>   <span class="cm-punctuation">=</span> <span class="cm-variable">numbers</span><span class="cm-punctuation">[</span><span class="cm-number">0..2</span><span class="cm-punctuation">]</span>

<span class="cm-variable">middle</span>  <span class="cm-punctuation">=</span> <span class="cm-variable">numbers</span><span class="cm-punctuation">[</span><span class="cm-number">3</span><span class="cm-punctuation">...</span><span class="cm-number">-2</span><span class="cm-punctuation">]</span>

<span class="cm-variable">end</span>     <span class="cm-punctuation">=</span> <span class="cm-variable">numbers</span><span class="cm-punctuation">[</span><span class="cm-number">-2</span><span class="cm-punctuation">..]</span>

<span class="cm-variable">copy</span>    <span class="cm-punctuation">=</span> <span class="cm-variable">numbers</span><span class="cm-punctuation">[..]</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="slices-js">var copy, end, middle, numbers, start;

numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9];

start = numbers.slice(0, 3);

middle = numbers.slice(3, -2);

end = numbers.slice(-2);

copy = numbers.slice(0);
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">copy</span>, <span class="cm-def">end</span>, <span class="cm-def">middle</span>, <span class="cm-def">numbers</span>, <span class="cm-def">start</span>;

<span class="cm-variable">numbers</span> <span class="cm-operator">=</span> [<span class="cm-number">1</span>, <span class="cm-number">2</span>, <span class="cm-number">3</span>, <span class="cm-number">4</span>, <span class="cm-number">5</span>, <span class="cm-number">6</span>, <span class="cm-number">7</span>, <span class="cm-number">8</span>, <span class="cm-number">9</span>];

<span class="cm-variable">start</span> <span class="cm-operator">=</span> <span class="cm-variable">numbers</span>.<span class="cm-property">slice</span>(<span class="cm-number">0</span>, <span class="cm-number">3</span>);

<span class="cm-variable">middle</span> <span class="cm-operator">=</span> <span class="cm-variable">numbers</span>.<span class="cm-property">slice</span>(<span class="cm-number">3</span>, <span class="cm-operator">-</span><span class="cm-number">2</span>);

<span class="cm-variable">end</span> <span class="cm-operator">=</span> <span class="cm-variable">numbers</span>.<span class="cm-property">slice</span>(<span class="cm-operator">-</span><span class="cm-number">2</span>);

<span class="cm-variable">copy</span> <span class="cm-operator">=</span> <span class="cm-variable">numbers</span>.<span class="cm-property">slice</span>(<span class="cm-number">0</span>);
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="slices" data-run="middle"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>middle</button>
    </div>
  </div>
  
</aside>
<p>相同的手法可以用在陣列賦值中，以新的值來取代陣列中的特定範圍值。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="splices">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="splices-coffee">numbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

numbers[3..6] = [-3, -4, -5, -6]
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">numbers</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">[</span><span class="cm-number">0</span><span class="cm-punctuation">,</span> <span class="cm-number">1</span><span class="cm-punctuation">,</span> <span class="cm-number">2</span><span class="cm-punctuation">,</span> <span class="cm-number">3</span><span class="cm-punctuation">,</span> <span class="cm-number">4</span><span class="cm-punctuation">,</span> <span class="cm-number">5</span><span class="cm-punctuation">,</span> <span class="cm-number">6</span><span class="cm-punctuation">,</span> <span class="cm-number">7</span><span class="cm-punctuation">,</span> <span class="cm-number">8</span><span class="cm-punctuation">,</span> <span class="cm-number">9</span><span class="cm-punctuation">]</span>

<span class="cm-variable">numbers</span><span class="cm-punctuation">[</span><span class="cm-number">3..6</span><span class="cm-punctuation">]</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">[</span><span class="cm-number">-3</span><span class="cm-punctuation">,</span> <span class="cm-number">-4</span><span class="cm-punctuation">,</span> <span class="cm-number">-5</span><span class="cm-punctuation">,</span> <span class="cm-number">-6</span><span class="cm-punctuation">]</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="splices-js">var numbers, ref,
  splice = [].splice;

numbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];

splice.apply(numbers, [3, 4].concat(ref = [-3, -4, -5, -6])), ref;
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">numbers</span>, <span class="cm-def">ref</span>,
  <span class="cm-def">splice</span> <span class="cm-operator">=</span> [].<span class="cm-property">splice</span>;

<span class="cm-variable">numbers</span> <span class="cm-operator">=</span> [<span class="cm-number">0</span>, <span class="cm-number">1</span>, <span class="cm-number">2</span>, <span class="cm-number">3</span>, <span class="cm-number">4</span>, <span class="cm-number">5</span>, <span class="cm-number">6</span>, <span class="cm-number">7</span>, <span class="cm-number">8</span>, <span class="cm-number">9</span>];

<span class="cm-variable">splice</span>.<span class="cm-property">apply</span>(<span class="cm-variable">numbers</span>, [<span class="cm-number">3</span>, <span class="cm-number">4</span>].<span class="cm-property">concat</span>(<span class="cm-variable">ref</span> <span class="cm-operator">=</span> [<span class="cm-operator">-</span><span class="cm-number">3</span>, <span class="cm-operator">-</span><span class="cm-number">4</span>, <span class="cm-operator">-</span><span class="cm-number">5</span>, <span class="cm-operator">-</span><span class="cm-number">6</span>])), <span class="cm-variable">ref</span>;
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="splices" data-run="numbers"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>numbers</button>
    </div>
  </div>
  
</aside>
<p>注意的是 JavaScript 的字串是不可更改且無法被切片的。</p>

        </section>
        <section id="expressions">
          <h2>所有東西都是表達式（差不多啦）</h2>
<p>你也許會注意到為什麼 CoffeeScript 的函式最終都不用加個回傳陳述式，但函式卻還是會有回傳值。其實 CoffeeScript 會試圖將所有語句視為表達式。看好下面的範例，其函式的任何一項內容都會盡可能地加上回傳陳述式。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="expressions">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="expressions-coffee">grade = (student) ->
  if student.excellentWork
    "A+"
  else if student.okayStuff
    if student.triedHard then "B" else "B-"
  else
    "C"

eldest = if 24 > 21 then "Liz" else "Ike"
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">grade</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">(</span><span class="cm-variable">student</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span>
  <span class="cm-keyword">if</span> <span class="cm-variable">student</span><span class="cm-punctuation">.</span><span class="cm-property">excellentWork</span>
    <span class="cm-string">"A+"</span>
<span class="cm-dedent">  </span><span class="cm-keyword">else</span> <span class="cm-keyword">if</span> <span class="cm-variable">student</span><span class="cm-punctuation">.</span><span class="cm-property">okayStuff</span>
<span class="cm-dedent">    </span><span class="cm-keyword">if</span> <span class="cm-variable">student</span><span class="cm-punctuation">.</span><span class="cm-property">triedHard</span> <span class="cm-keyword">then</span> <span class="cm-string">"B"</span> <span class="cm-keyword">else</span> <span class="cm-string">"B-"</span>
<span class="cm-dedent">  </span><span class="cm-keyword">else</span>
    <span class="cm-string">"C"</span>

<span class="cm-variable">eldest</span> <span class="cm-punctuation">=</span> <span class="cm-keyword">if</span> <span class="cm-number">24</span> <span class="cm-operator">></span> <span class="cm-number">21</span> <span class="cm-keyword">then</span> <span class="cm-string">"Liz"</span> <span class="cm-keyword">else</span> <span class="cm-string">"Ike"</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="expressions-js">var eldest, grade;

grade = function(student) {
  if (student.excellentWork) {
    return "A+";
  } else if (student.okayStuff) {
    if (student.triedHard) {
      return "B";
    } else {
      return "B-";
    }
  } else {
    return "C";
  }
};

eldest = 24 > 21 ? "Liz" : "Ike";
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">eldest</span>, <span class="cm-def">grade</span>;

<span class="cm-variable">grade</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>(<span class="cm-def">student</span>) {
  <span class="cm-keyword">if</span> (<span class="cm-variable-2">student</span>.<span class="cm-property">excellentWork</span>) {
    <span class="cm-keyword">return</span> <span class="cm-string">"A+"</span>;
  } <span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable-2">student</span>.<span class="cm-property">okayStuff</span>) {
    <span class="cm-keyword">if</span> (<span class="cm-variable-2">student</span>.<span class="cm-property">triedHard</span>) {
      <span class="cm-keyword">return</span> <span class="cm-string">"B"</span>;
    } <span class="cm-keyword">else</span> {
      <span class="cm-keyword">return</span> <span class="cm-string">"B-"</span>;
    }
  } <span class="cm-keyword">else</span> {
    <span class="cm-keyword">return</span> <span class="cm-string">"C"</span>;
  }
};

<span class="cm-variable">eldest</span> <span class="cm-operator">=</span> <span class="cm-number">24</span> <span class="cm-operator">></span> <span class="cm-number">21</span> <span class="cm-operator">?</span> <span class="cm-string">"Liz"</span> : <span class="cm-string">"Ike"</span>;
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="expressions" data-run="eldest"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>eldest</button>
    </div>
  </div>
  
</aside>
<p>雖然說函式最終都會自動回傳其值，但我們還是鼓勵你：當函式該結束的時候就自己直接手動加上回傳（<code>return value</code>）陳述式來結束函式。</p>
<p>對了，連沒有定義過的變數也可以直接當成表達式邊宣告邊使用。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="expressions_assignment">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="expressions_assignment-coffee">six = (one = 1) + (two = 2) + (three = 3)
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">six</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">(</span><span class="cm-variable">one</span> <span class="cm-punctuation">=</span> <span class="cm-number">1</span><span class="cm-punctuation">)</span> <span class="cm-operator">+</span> <span class="cm-punctuation">(</span><span class="cm-variable">two</span> <span class="cm-punctuation">=</span> <span class="cm-number">2</span><span class="cm-punctuation">)</span> <span class="cm-operator">+</span> <span class="cm-punctuation">(</span><span class="cm-variable">three</span> <span class="cm-punctuation">=</span> <span class="cm-number">3</span><span class="cm-punctuation">)</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="expressions_assignment-js">var one, six, three, two;

six = (one = 1) + (two = 2) + (three = 3);
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">one</span>, <span class="cm-def">six</span>, <span class="cm-def">three</span>, <span class="cm-def">two</span>;

<span class="cm-variable">six</span> <span class="cm-operator">=</span> (<span class="cm-variable">one</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>) <span class="cm-operator">+</span> (<span class="cm-variable">two</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>) <span class="cm-operator">+</span> (<span class="cm-variable">three</span> <span class="cm-operator">=</span> <span class="cm-number">3</span>);
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="expressions_assignment" data-run="six"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>six</button>
    </div>
  </div>
  
</aside>
<p>在 JavaScript 必須是陳述式的東西，CoffeeScript 能夠將其以閉包函式包覆著並且當成表達式使用並賦值給某個變數：</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="expressions_comprehension">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="expressions_comprehension-coffee"># 前十個全域屬性。

globals = (name for name of window)[0...10]
</textarea>
      <pre class="placeholder-code"><span class="cm-comment"># 前十個全域屬性。</span>

<span class="cm-variable">globals</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">(</span><span class="cm-variable">name</span> <span class="cm-keyword">for</span> <span class="cm-variable">name</span> <span class="cm-keyword">of</span> <span class="cm-variable">window</span><span class="cm-punctuation">)[</span><span class="cm-number">0</span><span class="cm-punctuation">...</span><span class="cm-number">10</span><span class="cm-punctuation">]</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="expressions_comprehension-js">// 前十個全域屬性。
var globals, name;

globals = ((function() {
  var results;
  results = [];
  for (name in window) {
    results.push(name);
  }
  return results;
})()).slice(0, 10);
</textarea>
      <pre class="placeholder-code"><span class="cm-comment">// 前十個全域屬性。</span>
<span class="cm-keyword">var</span> <span class="cm-def">globals</span>, <span class="cm-def">name</span>;

<span class="cm-variable">globals</span> <span class="cm-operator">=</span> ((<span class="cm-keyword">function</span>() {
  <span class="cm-keyword">var</span> <span class="cm-def">results</span>;
  <span class="cm-variable-2">results</span> <span class="cm-operator">=</span> [];
  <span class="cm-keyword">for</span> (<span class="cm-variable">name</span> <span class="cm-keyword">in</span> <span class="cm-variable">window</span>) {
    <span class="cm-variable-2">results</span>.<span class="cm-property">push</span>(<span class="cm-variable">name</span>);
  }
  <span class="cm-keyword">return</span> <span class="cm-variable-2">results</span>;
})()).<span class="cm-property">slice</span>(<span class="cm-number">0</span>, <span class="cm-number">10</span>);
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="expressions_comprehension" data-run="globals"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>globals</button>
    </div>
  </div>
  
</aside>
<p>還有個很有趣的是：像 <code>try</code> 和 <code>catch</code> 可以直接被塞進一個函式呼叫中進行使用。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="expressions_try">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="expressions_try-coffee">alert(
  try
    nonexistent / undefined
  catch error
    "And the error is ... #{error}"
)
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">alert</span><span class="cm-punctuation">(</span>
  <span class="cm-keyword">try</span>
<span class="cm-indent">    </span><span class="cm-variable">nonexistent</span> <span class="cm-operator">/</span> <span class="cm-atom">undefined</span>
<span class="cm-dedent">  </span><span class="cm-keyword">catch</span> <span class="cm-variable">error</span>
    <span class="cm-string">"And the error is ... #{error}"</span>
<span class="cm-punctuation">)</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="expressions_try-js">var error;

alert((function() {
  try {
    return nonexistent / void 0;
  } catch (error1) {
    error = error1;
    return `And the error is ... ${error}`;
  }
})());
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">error</span>;

<span class="cm-variable">alert</span>((<span class="cm-keyword">function</span>() {
  <span class="cm-keyword">try</span> {
    <span class="cm-keyword">return</span> <span class="cm-variable">nonexistent</span> <span class="cm-operator">/</span> <span class="cm-keyword">void</span> <span class="cm-number">0</span>;
  } <span class="cm-keyword">catch</span> (<span class="cm-def">error1</span>) {
    <span class="cm-variable">error</span> <span class="cm-operator">=</span> <span class="cm-variable-2">error1</span>;
    <span class="cm-keyword">return</span> <span class="cm-string-2">`And the error is ... ${</span><span class="cm-variable">error</span><span class="cm-string-2">}`</span>;
  }
})());
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="expressions_try" data-run="true"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small></button>
    </div>
  </div>
  
</aside>
<p>不過仍有許多無法轉換成表達式的 JavaScript 陳述式（例如：<code>break</code>、<code>continue</code>、<code>return</code>）。所以當你要用上他們當作表達式的時候，CoffeeScript 可沒辦法幫你。</p>

        </section>
        <section id="operators">
          <h2>運算子與歧義</h2>
<p>由於 <code>==</code> 運算子常常發生令人不愉快的小意外、而且和其他語言有著不太ㄧ樣的意思。為此，CoffeeScript 將 <code>==</code> 編譯為 <code>===</code>，而 <code>!=</code> 將會編譯成 <code>!==</code>。額外一點，<code>is</code> 會被編譯成 <code>===</code>，而 <code>isnt</code> 編譯為 <code>!==</code>。</p>
<p>你可以把 <code>not</code> 當作 <code>!</code> 使用。</p>
<p>有關邏輯上的運算子，<code>and</code> 會編譯成 <code>&amp;&amp;</code>，而 <code>or</code> 則是 <code>||</code>。</p>
<p>在 <code>while</code>、<code>if</code>/<code>else</code> 和 <code>switch</code>/<code>when</code> 之中，透過 <code>then</code> 來從表達式中區分條件式，而不是換行或是使用分號。</p>
<p>和 <a href="http://yaml.org/">YAML</a> 類似，<code>on</code> 和 <code>yes</code> 會被視為布林值的 <code>true</code>，而 <code>off</code> 和 <code>no</code> 會被當作 <code>false</code> 處理。</p>
<p><code>unless</code> 簡單說就是和 <code>if</code> 相反。</p>
<p>你能夠用 <code>@property</code> 當作 <code>this.property</code> 的縮寫。</p>
<p>你可以用 <code>in</code> 來測試陣列裡是否有某個值，然後 <code>of</code> 來測試物件中是否有某個屬性。</p>
<p>在 <code>for</code> 迴圈裡，<code>from</code> 會被編譯成 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of">ES2015 的 <code>of</code></a>。（對，很不幸地；當初設計 CoffeeScript 時的 <code>of</code> 跟 ES2015 的 <code>of</code> 名稱相衝。）</p>
<p>欲簡化數學表達式，<code>**</code> 可以用來乘冪，而 <code>//</code> 用來整除。<code>%</code> 跟 JavaScript 的沒差異，不過 <code>%%</code> 則提供了<a href="https://en.wikipedia.org/wiki/Modulo_operation">「模除」</a>功能：</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="modulo">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="modulo-coffee">-7 % 5 == -2 # 取得 7 / 5 的餘數
-7 %% 5 == 3 # n %% 5 的答案會在 0 和 4 之間

tabs.selectTabAtIndex((tabs.currentIndex - count) %% tabs.length)
</textarea>
      <pre class="placeholder-code"><span class="cm-number">-7</span> <span class="cm-operator">%</span> <span class="cm-number">5</span> <span class="cm-operator">==</span> <span class="cm-number">-2</span> <span class="cm-comment"># 取得 7 / 5 的餘數</span>
<span class="cm-number">-7</span> <span class="cm-operator">%%</span> <span class="cm-number">5</span> <span class="cm-operator">==</span> <span class="cm-number">3</span> <span class="cm-comment"># n %% 5 的答案會在 0 和 4 之間</span>

<span class="cm-variable">tabs</span><span class="cm-punctuation">.</span><span class="cm-property">selectTabAtIndex</span><span class="cm-punctuation">((</span><span class="cm-variable">tabs</span><span class="cm-punctuation">.</span><span class="cm-property">currentIndex</span> <span class="cm-operator">-</span> <span class="cm-variable">count</span><span class="cm-punctuation">)</span> <span class="cm-operator">%%</span> <span class="cm-variable">tabs</span><span class="cm-punctuation">.</span><span class="cm-property">length</span><span class="cm-punctuation">)</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="modulo-js">var modulo = function(a, b) { return (+a % (b = +b) + b) % b; };

-7 % 5 === -2; // 取得 7 / 5 的餘數

modulo(-7, 5) === 3; // n %% 5 的答案會在 0 和 4 之間

tabs.selectTabAtIndex(modulo(tabs.currentIndex - count, tabs.length));
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">modulo</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>(<span class="cm-def">a</span>, <span class="cm-def">b</span>) { <span class="cm-keyword">return</span> (<span class="cm-operator">+</span><span class="cm-variable-2">a</span> <span class="cm-operator">%</span> (<span class="cm-variable-2">b</span> <span class="cm-operator">=</span> <span class="cm-operator">+</span><span class="cm-variable-2">b</span>) <span class="cm-operator">+</span> <span class="cm-variable-2">b</span>) <span class="cm-operator">%</span> <span class="cm-variable-2">b</span>; };

<span class="cm-operator">-</span><span class="cm-number">7</span> <span class="cm-operator">%</span> <span class="cm-number">5</span> <span class="cm-operator">===</span> <span class="cm-operator">-</span><span class="cm-number">2</span>; <span class="cm-comment">// 取得 7 / 5 的餘數</span>

<span class="cm-variable">modulo</span>(<span class="cm-operator">-</span><span class="cm-number">7</span>, <span class="cm-number">5</span>) <span class="cm-operator">===</span> <span class="cm-number">3</span>; <span class="cm-comment">// n %% 5 的答案會在 0 和 4 之間</span>

<span class="cm-variable">tabs</span>.<span class="cm-property">selectTabAtIndex</span>(<span class="cm-variable">modulo</span>(<span class="cm-variable">tabs</span>.<span class="cm-property">currentIndex</span> <span class="cm-operator">-</span> <span class="cm-variable">count</span>, <span class="cm-variable">tabs</span>.<span class="cm-property">length</span>));
</pre>
    </div>
  </div>
  
</aside>
<p>總而言之，就是這樣：</p>
<table>
<thead>
<tr>
<th>CoffeeScript</th>
<th>JavaScript</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>is</code></td>
<td><code>===</code></td>
</tr>
<tr>
<td><code>isnt</code></td>
<td><code>!==</code></td>
</tr>
<tr>
<td><code>not</code></td>
<td><code>!</code></td>
</tr>
<tr>
<td><code>and</code></td>
<td><code>&amp;&amp;</code></td>
</tr>
<tr>
<td><code>or</code></td>
<td><code>||</code></td>
</tr>
<tr>
<td><code>true</code>, <code>yes</code>, <code>on</code></td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>false</code>, <code>no</code>, <code>off</code> </td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>@</code>, <code>this</code></td>
<td><code>this</code></td>
</tr>
<tr>
<td><code>a in b</code></td>
<td><code>[].indexOf.call(b, a) &gt;= 0</code></td>
</tr>
<tr>
<td><code>a of b</code></td>
<td><code>a in b</code></td>
</tr>
<tr>
<td><code>for a from b</code></td>
<td><code>for (a of b)</code></td>
</tr>
<tr>
<td><code>a ** b</code></td>
<td><code>Math.pow(a, b)</code></td>
</tr>
<tr>
<td><code>a // b</code></td>
<td><code>Math.floor(a / b)</code></td>
</tr>
<tr>
<td><code>a %% b</code></td>
<td><code>(a % b + b) % b</code></td>
</tr>
</tbody>
</table>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="aliases">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="aliases-coffee">launch() if ignition is on

volume = 10 if band isnt SpinalTap

letTheWildRumpusBegin() unless answer is no

if car.speed < limit then accelerate()

winner = yes if pick in [47, 92, 13]

print inspect "My name is #{@name}"
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">launch</span><span class="cm-punctuation">()</span> <span class="cm-keyword">if</span> <span class="cm-variable">ignition</span> <span class="cm-operator">is</span> <span class="cm-atom">on</span>

<span class="cm-variable">volume</span> <span class="cm-punctuation">=</span> <span class="cm-number">10</span> <span class="cm-keyword">if</span> <span class="cm-variable">band</span> <span class="cm-operator">isnt</span> <span class="cm-variable">SpinalTap</span>

<span class="cm-variable">letTheWildRumpusBegin</span><span class="cm-punctuation">()</span> <span class="cm-keyword">unless</span> <span class="cm-variable">answer</span> <span class="cm-operator">is</span> <span class="cm-atom">no</span>

<span class="cm-keyword">if</span> <span class="cm-variable">car</span><span class="cm-punctuation">.</span><span class="cm-property">speed</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">limit</span> <span class="cm-keyword">then</span> <span class="cm-variable">accelerate</span><span class="cm-punctuation">()</span>

<span class="cm-variable">winner</span> <span class="cm-punctuation">=</span> <span class="cm-atom">yes</span> <span class="cm-keyword">if</span> <span class="cm-variable">pick</span> <span class="cm-operator">in</span> <span class="cm-punctuation">[</span><span class="cm-number">47</span><span class="cm-punctuation">,</span> <span class="cm-number">92</span><span class="cm-punctuation">,</span> <span class="cm-number">13</span><span class="cm-punctuation">]</span>

<span class="cm-variable">print</span> <span class="cm-variable">inspect</span> <span class="cm-string">"My name is #{@name}"</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="aliases-js">var volume, winner;

if (ignition === true) {
  launch();
}

if (band !== SpinalTap) {
  volume = 10;
}

if (answer !== false) {
  letTheWildRumpusBegin();
}

if (car.speed < limit) {
  accelerate();
}

if (pick === 47 || pick === 92 || pick === 13) {
  winner = true;
}

print(inspect(`My name is ${this.name}`));
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">volume</span>, <span class="cm-def">winner</span>;

<span class="cm-keyword">if</span> (<span class="cm-variable">ignition</span> <span class="cm-operator">===</span> <span class="cm-atom">true</span>) {
  <span class="cm-variable">launch</span>();
}

<span class="cm-keyword">if</span> (<span class="cm-variable">band</span> <span class="cm-operator">!==</span> <span class="cm-variable">SpinalTap</span>) {
  <span class="cm-variable">volume</span> <span class="cm-operator">=</span> <span class="cm-number">10</span>;
}

<span class="cm-keyword">if</span> (<span class="cm-variable">answer</span> <span class="cm-operator">!==</span> <span class="cm-atom">false</span>) {
  <span class="cm-variable">letTheWildRumpusBegin</span>();
}

<span class="cm-keyword">if</span> (<span class="cm-variable">car</span>.<span class="cm-property">speed</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">limit</span>) {
  <span class="cm-variable">accelerate</span>();
}

<span class="cm-keyword">if</span> (<span class="cm-variable">pick</span> <span class="cm-operator">===</span> <span class="cm-number">47</span> <span class="cm-operator">||</span> <span class="cm-variable">pick</span> <span class="cm-operator">===</span> <span class="cm-number">92</span> <span class="cm-operator">||</span> <span class="cm-variable">pick</span> <span class="cm-operator">===</span> <span class="cm-number">13</span>) {
  <span class="cm-variable">winner</span> <span class="cm-operator">=</span> <span class="cm-atom">true</span>;
}

<span class="cm-variable">print</span>(<span class="cm-variable">inspect</span>(<span class="cm-string-2">`My name is ${</span><span class="cm-keyword">this</span>.<span class="cm-property">name</span><span class="cm-string-2">}`</span>));
</pre>
    </div>
  </div>
  
</aside>

        </section>
        <section id="existential-operator">
          <h2>存在運算子</h2>
<p>在 JavaScript 要檢查一個變數是否存在其實有點小聒噪。<code>if (變數) ...</code> 什麼的，然後就跟一些資料型態有關，像是：零值、空字串、假值（有很多不同的檢測方式）。所以 CoffeeScript 的 <code>?</code> 存在運算子就這樣產生了。除非一個變數是 <code>null</code> 或者 <code>undefined</code> 甚至尚未定義，否則都會回傳 <code>true</code>。這有點像是 Ruby 的 <code>nil?</code> 用法。</p>
<p>這個方式也能夠被用在 JavaScript 中類似 <code>a = a || value</code> 的場景作為更安全的條件式比較，不然通常來說都需要額外檢查數值或字串實在是有點麻煩。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="existence">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="existence-coffee">solipsism = true if mind? and not world?

speed = 0
speed ?= 15

footprints = yeti ? "bear"
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">solipsism</span> <span class="cm-punctuation">=</span> <span class="cm-atom">true</span> <span class="cm-keyword">if</span> <span class="cm-variable">mind</span><span class="cm-operator">?</span> <span class="cm-operator">and</span> <span class="cm-operator">not</span> <span class="cm-variable">world</span><span class="cm-operator">?</span>

<span class="cm-variable">speed</span> <span class="cm-punctuation">=</span> <span class="cm-number">0</span>
<span class="cm-variable">speed</span> <span class="cm-operator">?</span><span class="cm-punctuation">=</span> <span class="cm-number">15</span>

<span class="cm-variable">footprints</span> <span class="cm-punctuation">=</span> <span class="cm-variable">yeti</span> <span class="cm-operator">?</span> <span class="cm-string">"bear"</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="existence-js">var footprints, solipsism, speed;

if ((typeof mind !== "undefined" && mind !== null) && (typeof world === "undefined" || world === null)) {
  solipsism = true;
}

speed = 0;

if (speed == null) {
  speed = 15;
}

footprints = typeof yeti !== "undefined" && yeti !== null ? yeti : "bear";
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">footprints</span>, <span class="cm-def">solipsism</span>, <span class="cm-def">speed</span>;

<span class="cm-keyword">if</span> ((<span class="cm-keyword">typeof</span> <span class="cm-variable">mind</span> <span class="cm-operator">!==</span> <span class="cm-string">"undefined"</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">mind</span> <span class="cm-operator">!==</span> <span class="cm-atom">null</span>) <span class="cm-operator">&amp;&amp;</span> (<span class="cm-keyword">typeof</span> <span class="cm-variable">world</span> <span class="cm-operator">===</span> <span class="cm-string">"undefined"</span> <span class="cm-operator">||</span> <span class="cm-variable">world</span> <span class="cm-operator">===</span> <span class="cm-atom">null</span>)) {
  <span class="cm-variable">solipsism</span> <span class="cm-operator">=</span> <span class="cm-atom">true</span>;
}

<span class="cm-variable">speed</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;

<span class="cm-keyword">if</span> (<span class="cm-variable">speed</span> <span class="cm-operator">==</span> <span class="cm-atom">null</span>) {
  <span class="cm-variable">speed</span> <span class="cm-operator">=</span> <span class="cm-number">15</span>;
}

<span class="cm-variable">footprints</span> <span class="cm-operator">=</span> <span class="cm-keyword">typeof</span> <span class="cm-variable">yeti</span> <span class="cm-operator">!==</span> <span class="cm-string">"undefined"</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">yeti</span> <span class="cm-operator">!==</span> <span class="cm-atom">null</span> <span class="cm-operator">?</span> <span class="cm-variable">yeti</span> : <span class="cm-string">"bear"</span>;
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="existence" data-run="footprints"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>footprints</button>
    </div>
  </div>
  
</aside>
<p>不過要注意的是：當編譯器得知 <code>a</code> 已經在有效範圍中被定義時，<code>a?</code> 會被編譯成 <code>a != null</code> <em>而不是</em> <code>a !== null</code>。因為 <code>!=</code> 能夠以較寬鬆的方式檢查該變數是否與 <code>null</code> 相符，這同時也能夠雙重保障該變數並不是一個 <code>undefined</code>。這個道理同樣適用於 <code>not a?</code> 和 <code>unless a?</code> 語法。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="existence_declared">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="existence_declared-coffee">major = 'Computer Science'

unless major?
  signUpForClass 'Introduction to Wines'
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">major</span> <span class="cm-punctuation">=</span> <span class="cm-string">'Computer Science'</span>

<span class="cm-keyword">unless</span> <span class="cm-variable">major</span><span class="cm-operator">?</span>
  <span class="cm-variable">signUpForClass</span> <span class="cm-string">'Introduction to Wines'</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="existence_declared-js">var major;

major = 'Computer Science';

if (major == null) {
  signUpForClass('Introduction to Wines');
}
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">major</span>;

<span class="cm-variable">major</span> <span class="cm-operator">=</span> <span class="cm-string">'Computer Science'</span>;

<span class="cm-keyword">if</span> (<span class="cm-variable">major</span> <span class="cm-operator">==</span> <span class="cm-atom">null</span>) {
  <span class="cm-variable">signUpForClass</span>(<span class="cm-string">'Introduction to Wines'</span>);
}
</pre>
    </div>
  </div>
  
</aside>
<p>當一個變數可能不會被定義時，JavaScript 工程師 <em>應該</em> 要寫得像下面一樣來檢查該變數到底存不存在。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="existence_undeclared">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="existence_undeclared-coffee">if window?
  environment = 'browser (probably)'
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">if</span> <span class="cm-variable">window</span><span class="cm-operator">?</span>
  <span class="cm-variable">environment</span> <span class="cm-punctuation">=</span> <span class="cm-string">'browser (probably)'</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="existence_undeclared-js">var environment;

if (typeof window !== "undefined" && window !== null) {
  environment = 'browser (probably)';
}
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">environment</span>;

<span class="cm-keyword">if</span> (<span class="cm-keyword">typeof</span> <span class="cm-variable">window</span> <span class="cm-operator">!==</span> <span class="cm-string">"undefined"</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">window</span> <span class="cm-operator">!==</span> <span class="cm-atom">null</span>) {
  <span class="cm-variable">environment</span> <span class="cm-operator">=</span> <span class="cm-string">'browser (probably)'</span>;
}
</pre>
    </div>
  </div>
  
</aside>
<p>存在運算子 <code>?.</code> 也可以用於一個可能是空值物件的方法鏈中。如果想要避免呼叫到 <code>null</code> 或 <code>undefined</code> 物件方法就可以透過 <code>?.</code> 來取代普通的 <code>.</code> 作為串連符號。當連結鏈因為前一個物件不存在而錯誤時，就會回傳一個·<code>undefined</code> 而不是發生 <code>TypeError</code> 錯誤。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="soaks">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="soaks-coffee">zip = lottery.drawWinner?().address?.zipcode
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">zip</span> <span class="cm-punctuation">=</span> <span class="cm-variable">lottery</span><span class="cm-punctuation">.</span><span class="cm-property">drawWinner</span><span class="cm-operator">?</span><span class="cm-punctuation">().</span><span class="cm-property">address</span><span class="cm-operator">?</span><span class="cm-punctuation">.</span><span class="cm-property">zipcode</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="soaks-js">var ref, zip;

zip = typeof lottery.drawWinner === "function" ? (ref = lottery.drawWinner().address) != null ? ref.zipcode : void 0 : void 0;
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">ref</span>, <span class="cm-def">zip</span>;

<span class="cm-variable">zip</span> <span class="cm-operator">=</span> <span class="cm-keyword">typeof</span> <span class="cm-variable">lottery</span>.<span class="cm-property">drawWinner</span> <span class="cm-operator">===</span> <span class="cm-string">"function"</span> <span class="cm-operator">?</span> (<span class="cm-variable">ref</span> <span class="cm-operator">=</span> <span class="cm-variable">lottery</span>.<span class="cm-property">drawWinner</span>().<span class="cm-property">address</span>) <span class="cm-operator">!=</span> <span class="cm-atom">null</span> <span class="cm-operator">?</span> <span class="cm-variable">ref</span>.<span class="cm-property">zipcode</span> : <span class="cm-keyword">void</span> <span class="cm-number">0</span> : <span class="cm-keyword">void</span> <span class="cm-number">0</span>;
</pre>
    </div>
  </div>
  
</aside>
<p>具體來說：</p>
<table>
<thead>
<tr>
<th>範例</th>
<th>定義</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>a?</code></td>
<td>確保 <code>a</code> 處於有效範圍中並且 <code>a != null</code></td>
</tr>
<tr>
<td><code>a ? b</code></td>
<td>如果 <code>a</code> 存在且 <code>a != null</code> 的話則回傳 <code>a</code>；否則就回傳 <code>b</code></td>
</tr>
<tr>
<td><code>a?.b</code> 或 <code>a?['b']</code></td>
<td>如果 <code>a</code> 存在且 <code>a != null</code> 的話就回傳 <code>a.b</code>；否則就回傳 <code>undefined</code></td>
</tr>
<tr>
<td><code>a?(b, c)</code> 或 <code>a? b, c</code> </td>
<td>如果 <code>a</code> 存在並且是可供呼叫的話則將參數 <code>b</code> 和 <code>c</code> 傳入並呼叫；否則回傳 <code>undefined</code></td>
</tr>
<tr>
<td><code>a ?= b</code></td>
<td>如果 <code>a</code> 不存在於有效範圍內或者 <code>a == null</code> 的話就將 <code>b</code> 的值賦予給 <code>a</code>；簡單說就是不存在就定義 <code>a</code> 變數</td>
</tr>
</tbody>
</table>

        </section>
        <section id="chaining">
          <h2>函式呼叫鏈</h2>
<p>以 <code>.</code> 開頭能讓你用更簡單的方式串連並呼叫多個函式。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="chaining">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="chaining-coffee">$ 'body'
.click (e) ->
  $ '.box'
  .fadeIn 'fast'
  .addClass 'show'
.css 'background', 'white'
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">$</span> <span class="cm-string">'body'</span>
<span class="cm-punctuation">.</span><span class="cm-property">click</span> <span class="cm-punctuation">(</span><span class="cm-variable">e</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span>
  <span class="cm-variable">$</span> <span class="cm-string">'.box'</span>
  <span class="cm-punctuation">.</span><span class="cm-property">fadeIn</span> <span class="cm-string">'fast'</span>
  <span class="cm-punctuation">.</span><span class="cm-property">addClass</span> <span class="cm-string">'show'</span>
<span class="cm-punctuation">.</span><span class="cm-property">css</span> <span class="cm-string">'background'</span><span class="cm-punctuation">,</span> <span class="cm-string">'white'</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="chaining-js">$('body').click(function(e) {
  return $('.box').fadeIn('fast').addClass('show');
}).css('background', 'white');
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">$</span>(<span class="cm-string">'body'</span>).<span class="cm-property">click</span>(<span class="cm-keyword">function</span>(<span class="cm-def">e</span>) {
  <span class="cm-keyword">return</span> <span class="cm-variable">$</span>(<span class="cm-string">'.box'</span>).<span class="cm-property">fadeIn</span>(<span class="cm-string">'fast'</span>).<span class="cm-property">addClass</span>(<span class="cm-string">'show'</span>);
}).<span class="cm-property">css</span>(<span class="cm-string">'background'</span>, <span class="cm-string">'white'</span>);
</pre>
    </div>
  </div>
  
</aside>

        </section>
        <section id="destructuring">
          <h2>解構賦值</h2>
<p>和 JavaScript（從 ES2015 開始）一樣的是，CoffeeScript 也支援解構賦值語法。當你試圖賦予一個陣列或物件某個值時，CoffeeScript 會試圖拆解值的內容，並且將右側的值賦予到左側。最直接的範例莫過於此：</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="parallel_assignment">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="parallel_assignment-coffee">theBait   = 1000
theSwitch = 0

[theBait, theSwitch] = [theSwitch, theBait]
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">theBait</span>   <span class="cm-punctuation">=</span> <span class="cm-number">1000</span>
<span class="cm-variable">theSwitch</span> <span class="cm-punctuation">=</span> <span class="cm-number">0</span>

<span class="cm-punctuation">[</span><span class="cm-variable">theBait</span><span class="cm-punctuation">,</span> <span class="cm-variable">theSwitch</span><span class="cm-punctuation">]</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">[</span><span class="cm-variable">theSwitch</span><span class="cm-punctuation">,</span> <span class="cm-variable">theBait</span><span class="cm-punctuation">]</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="parallel_assignment-js">var theBait, theSwitch;

theBait = 1000;

theSwitch = 0;

[theBait, theSwitch] = [theSwitch, theBait];
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">theBait</span>, <span class="cm-def">theSwitch</span>;

<span class="cm-variable">theBait</span> <span class="cm-operator">=</span> <span class="cm-number">1000</span>;

<span class="cm-variable">theSwitch</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;

[<span class="cm-variable">theBait</span>, <span class="cm-variable">theSwitch</span>] <span class="cm-operator">=</span> [<span class="cm-variable">theSwitch</span>, <span class="cm-variable">theBait</span>];
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="parallel_assignment" data-run="theBait"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>theBait</button>
    </div>
  </div>
  
</aside>
<p>想要重新命名函式回傳的多值內容也可以變得很簡單。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="multiple_return_values">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="multiple_return_values-coffee">weatherReport = (location) ->
  # 透過 Ajax 請求來取得天氣資料…
  [location, 72, "Mostly Sunny"]

[city, temp, forecast] = weatherReport "Berkeley, CA"
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">weatherReport</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">(</span><span class="cm-variable">location</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span>
  <span class="cm-comment"># 透過 Ajax 請求來取得天氣資料…</span>
  <span class="cm-punctuation">[</span><span class="cm-variable">location</span><span class="cm-punctuation">,</span> <span class="cm-number">72</span><span class="cm-punctuation">,</span> <span class="cm-string">"Mostly Sunny"</span><span class="cm-punctuation">]</span>

<span class="cm-punctuation">[</span><span class="cm-variable">city</span><span class="cm-punctuation">,</span> <span class="cm-variable">temp</span><span class="cm-punctuation">,</span> <span class="cm-variable">forecast</span><span class="cm-punctuation">]</span> <span class="cm-punctuation">=</span> <span class="cm-variable">weatherReport</span> <span class="cm-string">"Berkeley, CA"</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="multiple_return_values-js">var city, forecast, temp, weatherReport;

weatherReport = function(location) {
  // 透過 Ajax 請求來取得天氣資料…
  return [location, 72, "Mostly Sunny"];
};

[city, temp, forecast] = weatherReport("Berkeley, CA");
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">city</span>, <span class="cm-def">forecast</span>, <span class="cm-def">temp</span>, <span class="cm-def">weatherReport</span>;

<span class="cm-variable">weatherReport</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>(<span class="cm-def">location</span>) {
  <span class="cm-comment">// 透過 Ajax 請求來取得天氣資料…</span>
  <span class="cm-keyword">return</span> [<span class="cm-variable-2">location</span>, <span class="cm-number">72</span>, <span class="cm-string">"Mostly Sunny"</span>];
};

[<span class="cm-variable">city</span>, <span class="cm-variable">temp</span>, <span class="cm-variable">forecast</span>] <span class="cm-operator">=</span> <span class="cm-variable">weatherReport</span>(<span class="cm-string">"Berkeley, CA"</span>);
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="multiple_return_values" data-run="forecast"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>forecast</button>
    </div>
  </div>
  
</aside>
<p>解構賦值不僅支援單層，還支援巢狀式的結構。這讓你能夠在解構極具深度的物件內容時得心應手。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="object_extraction">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="object_extraction-coffee">futurists =
  sculptor: "Umberto Boccioni"
  painter:  "Vladimir Burliuk"
  poet:
    name:   "F.T. Marinetti"
    address: [
      "Via Roma 42R"
      "Bellagio, Italy 22021"
    ]

{sculptor} = futurists

{poet: {name, address: [street, city]}} = futurists
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">futurists</span> <span class="cm-punctuation">=</span>
<span class="cm-indent">  </span><span class="cm-variable">sculptor</span><span class="cm-punctuation">:</span> <span class="cm-string">"Umberto Boccioni"</span>
  <span class="cm-variable">painter</span><span class="cm-punctuation">:</span>  <span class="cm-string">"Vladimir Burliuk"</span>
  <span class="cm-variable">poet</span><span class="cm-punctuation">:</span>
<span class="cm-indent">    </span><span class="cm-variable">name</span><span class="cm-punctuation">:</span>   <span class="cm-string">"F.T. Marinetti"</span>
    <span class="cm-variable">address</span><span class="cm-punctuation">:</span> <span class="cm-punctuation">[</span>
      <span class="cm-string">"Via Roma 42R"</span>
      <span class="cm-string">"Bellagio, Italy 22021"</span>
<span class="cm-dedent">    </span><span class="cm-punctuation">]</span>

<span class="cm-punctuation">{</span><span class="cm-variable">sculptor</span><span class="cm-punctuation">}</span> <span class="cm-punctuation">=</span> <span class="cm-variable">futurists</span>

<span class="cm-punctuation">{</span><span class="cm-variable">poet</span><span class="cm-punctuation">:</span> <span class="cm-punctuation">{</span><span class="cm-variable">name</span><span class="cm-punctuation">,</span> <span class="cm-variable">address</span><span class="cm-punctuation">:</span> <span class="cm-punctuation">[</span><span class="cm-variable">street</span><span class="cm-punctuation">,</span> <span class="cm-variable">city</span><span class="cm-punctuation">]}}</span> <span class="cm-punctuation">=</span> <span class="cm-variable">futurists</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="object_extraction-js">var city, futurists, name, sculptor, street;

futurists = {
  sculptor: "Umberto Boccioni",
  painter: "Vladimir Burliuk",
  poet: {
    name: "F.T. Marinetti",
    address: ["Via Roma 42R", "Bellagio, Italy 22021"]
  }
};

({sculptor} = futurists);

({
  poet: {
    name,
    address: [street, city]
  }
} = futurists);
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">city</span>, <span class="cm-def">futurists</span>, <span class="cm-def">name</span>, <span class="cm-def">sculptor</span>, <span class="cm-def">street</span>;

<span class="cm-variable">futurists</span> <span class="cm-operator">=</span> {
  <span class="cm-property">sculptor</span>: <span class="cm-string">"Umberto Boccioni"</span>,
  <span class="cm-property">painter</span>: <span class="cm-string">"Vladimir Burliuk"</span>,
  <span class="cm-property">poet</span>: {
    <span class="cm-property">name</span>: <span class="cm-string">"F.T. Marinetti"</span>,
    <span class="cm-property">address</span>: [<span class="cm-string">"Via Roma 42R"</span>, <span class="cm-string">"Bellagio, Italy 22021"</span>]
  }
};

({<span class="cm-property">sculptor</span>} <span class="cm-operator">=</span> <span class="cm-variable">futurists</span>);

({
  <span class="cm-property">poet</span>: {
    <span class="cm-property">name</span>,
    <span class="cm-property">address</span>: [<span class="cm-variable">street</span>, <span class="cm-variable">city</span>]
  }
} <span class="cm-operator">=</span> <span class="cm-variable">futurists</span>);
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="object_extraction" data-run="name%20+%20%22-%22%20+%20street"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>name + &quot;-&quot; + street</button>
    </div>
  </div>
  
</aside>
<p>然後你也可以在解構賦值時用上展開語法。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="patterns_and_splats">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="patterns_and_splats-coffee">tag = "<impossible>"

[open, contents..., close] = tag.split("")
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">tag</span> <span class="cm-punctuation">=</span> <span class="cm-string">"&lt;impossible>"</span>

<span class="cm-punctuation">[</span><span class="cm-variable">open</span><span class="cm-punctuation">,</span> <span class="cm-variable">contents</span><span class="cm-punctuation">...,</span> <span class="cm-variable">close</span><span class="cm-punctuation">]</span> <span class="cm-punctuation">=</span> <span class="cm-variable">tag</span><span class="cm-punctuation">.</span><span class="cm-property">split</span><span class="cm-punctuation">(</span><span class="cm-string">""</span><span class="cm-punctuation">)</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="patterns_and_splats-js">var close, contents, open, ref, tag,
  splice = [].splice;

tag = "<impossible>";

ref = tag.split(""), [open, ...contents] = ref, [close] = splice.call(contents, -1);
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">close</span>, <span class="cm-def">contents</span>, <span class="cm-def">open</span>, <span class="cm-def">ref</span>, <span class="cm-def">tag</span>,
  <span class="cm-def">splice</span> <span class="cm-operator">=</span> [].<span class="cm-property">splice</span>;

<span class="cm-variable">tag</span> <span class="cm-operator">=</span> <span class="cm-string">"&lt;impossible>"</span>;

<span class="cm-variable">ref</span> <span class="cm-operator">=</span> <span class="cm-variable">tag</span>.<span class="cm-property">split</span>(<span class="cm-string">""</span>), [<span class="cm-variable">open</span>, <span class="cm-meta">...</span><span class="cm-variable">contents</span>] <span class="cm-operator">=</span> <span class="cm-variable">ref</span>, [<span class="cm-variable">close</span>] <span class="cm-operator">=</span> <span class="cm-variable">splice</span>.<span class="cm-property">call</span>(<span class="cm-variable">contents</span>, <span class="cm-operator">-</span><span class="cm-number">1</span>);
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="patterns_and_splats" data-run="contents.join%28%22%22%29"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>contents.join(&quot;&quot;)</button>
    </div>
  </div>
  
</aside>
<p>展開語法也可以省略變數名稱，這樣就可以在解構陣列的時候只取得起首和尾部的元素。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="expansion">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="expansion-coffee">text = "Every literary critic believes he will
        outwit history and have the last word"

[first, ..., last] = text.split " "
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">text</span> <span class="cm-punctuation">=</span> <span class="cm-string">"Every literary critic believes he will</span>
<span class="cm-string">        outwit history and have the last word"</span>

<span class="cm-punctuation">[</span><span class="cm-variable">first</span><span class="cm-punctuation">,</span> <span class="cm-punctuation">...,</span> <span class="cm-variable">last</span><span class="cm-punctuation">]</span> <span class="cm-punctuation">=</span> <span class="cm-variable">text</span><span class="cm-punctuation">.</span><span class="cm-property">split</span> <span class="cm-string">" "</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="expansion-js">var first, last, ref, text,
  slice = [].slice;

text = "Every literary critic believes he will outwit history and have the last word";

ref = text.split(" "), [first] = ref, [last] = slice.call(ref, -1);
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">first</span>, <span class="cm-def">last</span>, <span class="cm-def">ref</span>, <span class="cm-def">text</span>,
  <span class="cm-def">slice</span> <span class="cm-operator">=</span> [].<span class="cm-property">slice</span>;

<span class="cm-variable">text</span> <span class="cm-operator">=</span> <span class="cm-string">"Every literary critic believes he will outwit history and have the last word"</span>;

<span class="cm-variable">ref</span> <span class="cm-operator">=</span> <span class="cm-variable">text</span>.<span class="cm-property">split</span>(<span class="cm-string">" "</span>), [<span class="cm-variable">first</span>] <span class="cm-operator">=</span> <span class="cm-variable">ref</span>, [<span class="cm-variable">last</span>] <span class="cm-operator">=</span> <span class="cm-variable">slice</span>.<span class="cm-property">call</span>(<span class="cm-variable">ref</span>, <span class="cm-operator">-</span><span class="cm-number">1</span>);
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="expansion" data-run="first%20+%20%22%20%22%20+%20last"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>first + &quot; &quot; + last</button>
    </div>
  </div>
  
</aside>
<p>初始化一個類別的時候，其建構子也能用上解構賦值來直接將接收到的選項解構成類別中的選項並保存。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="constructor_destructuring">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="constructor_destructuring-coffee">class Person
  constructor: (options) ->
    {@name, @age, @height = 'average'} = options

tim = new Person name: 'Tim', age: 4
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">class</span> <span class="cm-variable">Person</span>
  <span class="cm-variable">constructor</span><span class="cm-punctuation">:</span> <span class="cm-punctuation">(</span><span class="cm-variable">options</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span>
    <span class="cm-punctuation">{</span><span class="cm-property">@name</span><span class="cm-punctuation">,</span> <span class="cm-property">@age</span><span class="cm-punctuation">,</span> <span class="cm-property">@height</span> <span class="cm-punctuation">=</span> <span class="cm-string">'average'</span><span class="cm-punctuation">}</span> <span class="cm-punctuation">=</span> <span class="cm-variable">options</span>

<span class="cm-variable">tim</span> <span class="cm-punctuation">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Person</span> <span class="cm-variable">name</span><span class="cm-punctuation">:</span> <span class="cm-string">'Tim'</span><span class="cm-punctuation">,</span> <span class="cm-variable">age</span><span class="cm-punctuation">:</span> <span class="cm-number">4</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="constructor_destructuring-js">var Person, tim;

Person = class Person {
  constructor(options) {
    ({name: this.name, age: this.age, height: this.height = 'average'} = options);
  }

};

tim = new Person({
  name: 'Tim',
  age: 4
});
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">Person</span>, <span class="cm-def">tim</span>;

<span class="cm-variable">Person</span> <span class="cm-operator">=</span> <span class="cm-keyword">class</span> <span class="cm-def">Person</span> {
  <span class="cm-property">constructor</span>(<span class="cm-def">options</span>) {
    ({<span class="cm-property">name</span>: <span class="cm-keyword">this</span>.<span class="cm-property">name</span>, <span class="cm-property">age</span>: <span class="cm-keyword">this</span>.<span class="cm-property">age</span>, <span class="cm-property">height</span>: <span class="cm-keyword">this</span>.<span class="cm-property">height</span> <span class="cm-operator">=</span> <span class="cm-string">'average'</span>} <span class="cm-operator">=</span> <span class="cm-variable-2">options</span>);
  }

};

<span class="cm-variable">tim</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Person</span>({
  <span class="cm-property">name</span>: <span class="cm-string">'Tim'</span>,
  <span class="cm-property">age</span>: <span class="cm-number">4</span>
});
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="constructor_destructuring" data-run="tim.age%20+%20%22%20%22%20+%20tim.height"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>tim.age + &quot; &quot; + tim.height</button>
    </div>
  </div>
  
</aside>
<p>上面的範例同時也展示了：當解構的物件中缺少了某個屬性的時候，要如何自動補上預設值。不過有點該注意的是：預設值只會在屬性是 <code>undefined</code> 或者是無定義的時候才會套用─當該屬性為<a href="#breaking-changes-default-values"><code>null</code> 的時候則其值會保留為 <code>null</code></a>，而非採用預設值。</p>

        </section>
        <section id="fat-arrow">
          <h2>有界（胖箭頭）函式</h2>
<p>在 JavaScript 中，<code>this</code> 關鍵字會以動態的方式而指向到不同的物件或函式。當你試圖將一個函式當作回呼函式傳入到不同的物件或有效範圍時，原本的 <code>this</code> 會因此而異動。如果你對此狀況不太清楚，可以參考這份<a href="https://web.archive.org/web/20150316122013/http://www.digital-web.com/articles/scope_in_javascript">數位內容</a>來稍微理解一下大概發生了什麼事情。</p>
<p>胖箭頭 <code>=&gt;</code> 可以用來定義一個函式並且將其 <code>this</code> 固定住。當設計一個像 Prototype 或 jQuery 那樣基於回呼函式的函式庫時，這種做法會十分有用。而且將函式傳入進一個 <code>each</code> 疊代器或者像事件監聽器 <code>on</code> 的時候都能確保這個函式內的 <code>this</code> 都指向原本的地方。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="fat_arrow">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="fat_arrow-coffee">Account = (customer, cart) ->
  @customer = customer
  @cart = cart

  $('.shopping_cart').on 'click', (event) =>
    @customer.purchase @cart
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">Account</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">(</span><span class="cm-variable">customer</span><span class="cm-punctuation">,</span> <span class="cm-variable">cart</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span>
  <span class="cm-property">@customer</span> <span class="cm-punctuation">=</span> <span class="cm-variable">customer</span>
  <span class="cm-property">@cart</span> <span class="cm-punctuation">=</span> <span class="cm-variable">cart</span>

  <span class="cm-variable">$</span><span class="cm-punctuation">(</span><span class="cm-string">'.shopping_cart'</span><span class="cm-punctuation">).</span><span class="cm-atom">on</span> <span class="cm-string">'click'</span><span class="cm-punctuation">,</span> <span class="cm-punctuation">(</span><span class="cm-variable">event</span><span class="cm-punctuation">)</span> <span class="cm-operator">=></span>
    <span class="cm-property">@customer</span><span class="cm-punctuation">.</span><span class="cm-property">purchase</span> <span class="cm-property">@cart</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="fat_arrow-js">var Account;

Account = function(customer, cart) {
  this.customer = customer;
  this.cart = cart;
  return $('.shopping_cart').on('click', (event) => {
    return this.customer.purchase(this.cart);
  });
};
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">Account</span>;

<span class="cm-variable">Account</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>(<span class="cm-def">customer</span>, <span class="cm-def">cart</span>) {
  <span class="cm-keyword">this</span>.<span class="cm-property">customer</span> <span class="cm-operator">=</span> <span class="cm-variable-2">customer</span>;
  <span class="cm-keyword">this</span>.<span class="cm-property">cart</span> <span class="cm-operator">=</span> <span class="cm-variable-2">cart</span>;
  <span class="cm-keyword">return</span> <span class="cm-variable">$</span>(<span class="cm-string">'.shopping_cart'</span>).<span class="cm-property">on</span>(<span class="cm-string">'click'</span>, (<span class="cm-def">event</span>) <span class="cm-operator">=></span> {
    <span class="cm-keyword">return</span> <span class="cm-keyword">this</span>.<span class="cm-property">customer</span>.<span class="cm-property">purchase</span>(<span class="cm-keyword">this</span>.<span class="cm-property">cart</span>);
  });
};
</pre>
    </div>
  </div>
  
</aside>
<p>如果我們在上述範例中使用 <code>-&gt;</code> 來定義函式，<code>@customer</code> 會被指向到 DOM 中的 <code>customer</code> 屬性且該屬性會找不到。這個時候還會試圖呼叫不存在的 <code>purchase()</code> 函式而導致錯誤。</p>
<p>胖箭頭可以說是 CoffeeScript 中最多人使用的功能之一，而 ES2015 也在<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions">之後加入</a>了這項功能；所以現在 CoffeeScript 2 會將 <code>=&gt;</code> 編譯成 ES 的 <code>=&gt;</code>。</p>

        </section>
        <section id="generators">
          <h2>產生器函式</h2>
<p>CoffeeScript 能夠以 <code>yield</code> 關鍵字使用 ES2015 的 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*">產生器函式</a>，而不是使用 <code>function*(){}</code> 這種沒意義的東西－因為在 CoffeeScript 裡：有產生（<code>yield</code>）關鍵字的函式就是產生器函式。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="generators">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="generators-coffee">perfectSquares = ->
  num = 0
  loop
    num += 1
    yield num * num
  return

window.ps or= perfectSquares()
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">perfectSquares</span> <span class="cm-punctuation">=</span> <span class="cm-operator">-></span>
  <span class="cm-variable">num</span> <span class="cm-punctuation">=</span> <span class="cm-number">0</span>
  <span class="cm-keyword">loop</span>
    <span class="cm-variable">num</span> <span class="cm-operator">+=</span> <span class="cm-number">1</span>
    <span class="cm-variable">yield</span> <span class="cm-variable">num</span> <span class="cm-operator">*</span> <span class="cm-variable">num</span>
<span class="cm-dedent">  </span><span class="cm-keyword">return</span>

<span class="cm-variable">window</span><span class="cm-punctuation">.</span><span class="cm-property">ps</span> <span class="cm-operator">or=</span> <span class="cm-variable">perfectSquares</span><span class="cm-punctuation">()</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="generators-js">var perfectSquares;

perfectSquares = function*() {
  var num;
  num = 0;
  while (true) {
    num += 1;
    yield num * num;
  }
};

window.ps || (window.ps = perfectSquares());
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">perfectSquares</span>;

<span class="cm-variable">perfectSquares</span> <span class="cm-operator">=</span> <span class="cm-keyword">function*</span>() {
  <span class="cm-keyword">var</span> <span class="cm-def">num</span>;
  <span class="cm-variable-2">num</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;
  <span class="cm-keyword">while</span> (<span class="cm-atom">true</span>) {
    <span class="cm-variable-2">num</span> <span class="cm-operator">+=</span> <span class="cm-number">1</span>;
    <span class="cm-keyword">yield</span> <span class="cm-variable-2">num</span> <span class="cm-operator">*</span> <span class="cm-variable-2">num</span>;
  }
};

<span class="cm-variable">window</span>.<span class="cm-property">ps</span> <span class="cm-operator">||</span> (<span class="cm-variable">window</span>.<span class="cm-property">ps</span> <span class="cm-operator">=</span> <span class="cm-variable">perfectSquares</span>());
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="generators" data-run="ps.next%28%29.value"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>ps.next().value</button>
    </div>
  </div>
  
</aside>
<p><code>yield*</code> 被稱為 <code>yield from</code>，而當你想建立一個不會產生的產生器函式時，用上 <code>yield return</code> 就可以了。</p>
<div id="generator-iteration" class="bookmark"></div>
<p>你可以透過 <code>for...from</code>方法來遍歷一個產生器函式。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="generator_iteration">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="generator_iteration-coffee">fibonacci = ->
  [previous, current] = [1, 1]
  loop
    [previous, current] = [current, previous + current]
    yield current
  return

getFibonacciNumbers = (length) ->
  results = [1]
  for n from fibonacci()
    results.push n
    break if results.length is length
  results
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">fibonacci</span> <span class="cm-punctuation">=</span> <span class="cm-operator">-></span>
  <span class="cm-punctuation">[</span><span class="cm-variable">previous</span><span class="cm-punctuation">,</span> <span class="cm-variable">current</span><span class="cm-punctuation">]</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">[</span><span class="cm-number">1</span><span class="cm-punctuation">,</span> <span class="cm-number">1</span><span class="cm-punctuation">]</span>
  <span class="cm-keyword">loop</span>
    <span class="cm-punctuation">[</span><span class="cm-variable">previous</span><span class="cm-punctuation">,</span> <span class="cm-variable">current</span><span class="cm-punctuation">]</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">[</span><span class="cm-variable">current</span><span class="cm-punctuation">,</span> <span class="cm-variable">previous</span> <span class="cm-operator">+</span> <span class="cm-variable">current</span><span class="cm-punctuation">]</span>
    <span class="cm-variable">yield</span> <span class="cm-variable">current</span>
<span class="cm-dedent">  </span><span class="cm-keyword">return</span>

<span class="cm-variable">getFibonacciNumbers</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">(</span><span class="cm-variable">length</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span>
  <span class="cm-variable">results</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">[</span><span class="cm-number">1</span><span class="cm-punctuation">]</span>
  <span class="cm-keyword">for</span> <span class="cm-variable">n</span> <span class="cm-variable">from</span> <span class="cm-variable">fibonacci</span><span class="cm-punctuation">()</span>
    <span class="cm-variable">results</span><span class="cm-punctuation">.</span><span class="cm-property">push</span> <span class="cm-variable">n</span>
    <span class="cm-keyword">break</span> <span class="cm-keyword">if</span> <span class="cm-variable">results</span><span class="cm-punctuation">.</span><span class="cm-property">length</span> <span class="cm-operator">is</span> <span class="cm-variable">length</span>
<span class="cm-dedent">  </span><span class="cm-variable">results</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="generator_iteration-js">var fibonacci, getFibonacciNumbers;

fibonacci = function*() {
  var current, previous;
  [previous, current] = [1, 1];
  while (true) {
    [previous, current] = [current, previous + current];
    yield current;
  }
};

getFibonacciNumbers = function(length) {
  var n, ref, results;
  results = [1];
  ref = fibonacci();
  for (n of ref) {
    results.push(n);
    if (results.length === length) {
      break;
    }
  }
  return results;
};
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">fibonacci</span>, <span class="cm-def">getFibonacciNumbers</span>;

<span class="cm-variable">fibonacci</span> <span class="cm-operator">=</span> <span class="cm-keyword">function*</span>() {
  <span class="cm-keyword">var</span> <span class="cm-def">current</span>, <span class="cm-def">previous</span>;
  [<span class="cm-variable-2">previous</span>, <span class="cm-variable-2">current</span>] <span class="cm-operator">=</span> [<span class="cm-number">1</span>, <span class="cm-number">1</span>];
  <span class="cm-keyword">while</span> (<span class="cm-atom">true</span>) {
    [<span class="cm-variable-2">previous</span>, <span class="cm-variable-2">current</span>] <span class="cm-operator">=</span> [<span class="cm-variable-2">current</span>, <span class="cm-variable-2">previous</span> <span class="cm-operator">+</span> <span class="cm-variable-2">current</span>];
    <span class="cm-keyword">yield</span> <span class="cm-variable-2">current</span>;
  }
};

<span class="cm-variable">getFibonacciNumbers</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>(<span class="cm-def">length</span>) {
  <span class="cm-keyword">var</span> <span class="cm-def">n</span>, <span class="cm-def">ref</span>, <span class="cm-def">results</span>;
  <span class="cm-variable-2">results</span> <span class="cm-operator">=</span> [<span class="cm-number">1</span>];
  <span class="cm-variable-2">ref</span> <span class="cm-operator">=</span> <span class="cm-variable">fibonacci</span>();
  <span class="cm-keyword">for</span> (<span class="cm-variable-2">n</span> <span class="cm-keyword">of</span> <span class="cm-variable-2">ref</span>) {
    <span class="cm-variable-2">results</span>.<span class="cm-property">push</span>(<span class="cm-variable-2">n</span>);
    <span class="cm-keyword">if</span> (<span class="cm-variable-2">results</span>.<span class="cm-property">length</span> <span class="cm-operator">===</span> <span class="cm-variable-2">length</span>) {
      <span class="cm-keyword">break</span>;
    }
  }
  <span class="cm-keyword">return</span> <span class="cm-variable-2">results</span>;
};
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="generator_iteration" data-run="getFibonacciNumbers%2810%29"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>getFibonacciNumbers(10)</button>
    </div>
  </div>
  
</aside>

        </section>
        <section id="async-functions">
          <h2>非同步函式</h2>
<p>ES2017 的<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function">非同步函式</a>現在能夠透過 <code>await</code> 關鍵字進行使用了。就像產生器函式那樣，不需要額外使用 <code>async</code> 關鍵字；非同步函式在 CoffeeScript 中寫起來就像一般的函式。</p>
<p><code>yield return</code> 可以強迫函式成為一個產生器函式，而 <code>await return</code> 則能夠強迫讓一個函式成為非同步函式。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="async">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="async-coffee"># 你的瀏覽器必須支援 async/await 和文字朗讀程式
# 才能夠正常執行此範例。

sleep = (ms) ->
  new Promise (resolve) ->
    window.setTimeout resolve, ms

say = (text) ->
  window.speechSynthesis.cancel()
  window.speechSynthesis.speak new SpeechSynthesisUtterance text

countdown = (seconds) ->
  for i in [seconds..1]
    say i
    await sleep 1000 # 等個一秒
  say "Blastoff!"

countdown 3
</textarea>
      <pre class="placeholder-code"><span class="cm-comment"># 你的瀏覽器必須支援 async/await 和文字朗讀程式</span>
<span class="cm-comment"># 才能夠正常執行此範例。</span>

<span class="cm-variable">sleep</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">(</span><span class="cm-variable">ms</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span>
  <span class="cm-keyword">new</span> <span class="cm-variable">Promise</span> <span class="cm-punctuation">(</span><span class="cm-variable">resolve</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span>
    <span class="cm-variable">window</span><span class="cm-punctuation">.</span><span class="cm-property">setTimeout</span> <span class="cm-variable">resolve</span><span class="cm-punctuation">,</span> <span class="cm-variable">ms</span>

<span class="cm-variable">say</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">(</span><span class="cm-variable">text</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span>
  <span class="cm-variable">window</span><span class="cm-punctuation">.</span><span class="cm-property">speechSynthesis</span><span class="cm-punctuation">.</span><span class="cm-property">cancel</span><span class="cm-punctuation">()</span>
  <span class="cm-variable">window</span><span class="cm-punctuation">.</span><span class="cm-property">speechSynthesis</span><span class="cm-punctuation">.</span><span class="cm-property">speak</span> <span class="cm-keyword">new</span> <span class="cm-variable">SpeechSynthesisUtterance</span> <span class="cm-variable">text</span>

<span class="cm-variable">countdown</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">(</span><span class="cm-variable">seconds</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span>
  <span class="cm-keyword">for</span> <span class="cm-variable">i</span> <span class="cm-operator">in</span> <span class="cm-punctuation">[</span><span class="cm-variable">seconds</span><span class="cm-punctuation">..</span><span class="cm-number">1</span><span class="cm-punctuation">]</span>
    <span class="cm-variable">say</span> <span class="cm-variable">i</span>
    <span class="cm-variable">await</span> <span class="cm-variable">sleep</span> <span class="cm-number">1000</span> <span class="cm-comment"># 等個一秒</span>
<span class="cm-dedent">  </span><span class="cm-variable">say</span> <span class="cm-string">"Blastoff!"</span>

<span class="cm-variable">countdown</span> <span class="cm-number">3</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="async-js">// 你的瀏覽器必須支援 async/await 和文字朗讀程式
// 才能夠正常執行此範例。
var countdown, say, sleep;

sleep = function(ms) {
  return new Promise(function(resolve) {
    return window.setTimeout(resolve, ms);
  });
};

say = function(text) {
  window.speechSynthesis.cancel();
  return window.speechSynthesis.speak(new SpeechSynthesisUtterance(text));
};

countdown = async function(seconds) {
  var i, j, ref;
  for (i = j = ref = seconds; (ref <= 1 ? j <= 1 : j >= 1); i = ref <= 1 ? ++j : --j) {
    say(i);
    await sleep(1000); // 等個一秒
  }
  return say("Blastoff!");
};

countdown(3);
</textarea>
      <pre class="placeholder-code"><span class="cm-comment">// 你的瀏覽器必須支援 async/await 和文字朗讀程式</span>
<span class="cm-comment">// 才能夠正常執行此範例。</span>
<span class="cm-keyword">var</span> <span class="cm-def">countdown</span>, <span class="cm-def">say</span>, <span class="cm-def">sleep</span>;

<span class="cm-variable">sleep</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>(<span class="cm-def">ms</span>) {
  <span class="cm-keyword">return</span> <span class="cm-keyword">new</span> <span class="cm-variable">Promise</span>(<span class="cm-keyword">function</span>(<span class="cm-def">resolve</span>) {
    <span class="cm-keyword">return</span> <span class="cm-variable">window</span>.<span class="cm-property">setTimeout</span>(<span class="cm-variable-2">resolve</span>, <span class="cm-variable-2">ms</span>);
  });
};

<span class="cm-variable">say</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>(<span class="cm-def">text</span>) {
  <span class="cm-variable">window</span>.<span class="cm-property">speechSynthesis</span>.<span class="cm-property">cancel</span>();
  <span class="cm-keyword">return</span> <span class="cm-variable">window</span>.<span class="cm-property">speechSynthesis</span>.<span class="cm-property">speak</span>(<span class="cm-keyword">new</span> <span class="cm-variable">SpeechSynthesisUtterance</span>(<span class="cm-variable-2">text</span>));
};

<span class="cm-variable">countdown</span> <span class="cm-operator">=</span> <span class="cm-keyword">async</span> <span class="cm-keyword">function</span>(<span class="cm-def">seconds</span>) {
  <span class="cm-keyword">var</span> <span class="cm-def">i</span>, <span class="cm-def">j</span>, <span class="cm-def">ref</span>;
  <span class="cm-keyword">for</span> (<span class="cm-variable-2">i</span> <span class="cm-operator">=</span> <span class="cm-variable-2">j</span> <span class="cm-operator">=</span> <span class="cm-variable-2">ref</span> <span class="cm-operator">=</span> <span class="cm-variable-2">seconds</span>; (<span class="cm-variable-2">ref</span> <span class="cm-operator">&lt;=</span> <span class="cm-number">1</span> <span class="cm-operator">?</span> <span class="cm-variable-2">j</span> <span class="cm-operator">&lt;=</span> <span class="cm-number">1</span> : <span class="cm-variable-2">j</span> <span class="cm-operator">>=</span> <span class="cm-number">1</span>); <span class="cm-variable-2">i</span> <span class="cm-operator">=</span> <span class="cm-variable-2">ref</span> <span class="cm-operator">&lt;=</span> <span class="cm-number">1</span> <span class="cm-operator">?</span> <span class="cm-operator">++</span><span class="cm-variable-2">j</span> : <span class="cm-operator">--</span><span class="cm-variable-2">j</span>) {
    <span class="cm-variable">say</span>(<span class="cm-variable-2">i</span>);
    <span class="cm-keyword">await</span> <span class="cm-variable">sleep</span>(<span class="cm-number">1000</span>); <span class="cm-comment">// 等個一秒</span>
  }
  <span class="cm-keyword">return</span> <span class="cm-variable">say</span>(<span class="cm-string">"Blastoff!"</span>);
};

<span class="cm-variable">countdown</span>(<span class="cm-number">3</span>);
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="async" data-run="true"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small></button>
    </div>
  </div>
  
</aside>

        </section>
        <section id="classes">
          <h2>類別</h2>
<p>CoffeeScript 1 提供了 <code>class</code> 和 <code>extends</code> 關鍵字來作為原型鏈函式的糖衣語法。不過在 ES2015 的時候，JavaScript 已經官方地支援了這些關鍵字；所以 CoffeeScript 2 現在會將 <code>class</code> 和 <code>extends</code> 關鍵字直接編譯成 ES2015 類別。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="classes">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="classes-coffee">class Animal
  constructor: (@name) ->

  move: (meters) ->
    alert @name + " moved #{meters}m."

class Snake extends Animal
  move: ->
    alert "Slithering..."
    super 5

class Horse extends Animal
  move: ->
    alert "Galloping..."
    super 45

sam = new Snake "Sammy the Python"
tom = new Horse "Tommy the Palomino"

sam.move()
tom.move()
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">class</span> <span class="cm-variable">Animal</span>
  <span class="cm-variable">constructor</span><span class="cm-punctuation">:</span> <span class="cm-punctuation">(</span><span class="cm-property">@name</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span>

<span class="cm-dedent">  </span><span class="cm-variable">move</span><span class="cm-punctuation">:</span> <span class="cm-punctuation">(</span><span class="cm-variable">meters</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span>
    <span class="cm-variable">alert</span> <span class="cm-property">@name</span> <span class="cm-operator">+</span> <span class="cm-string">" moved #{meters}m."</span>

<span class="cm-keyword">class</span> <span class="cm-variable">Snake</span> <span class="cm-keyword">extends</span> <span class="cm-variable">Animal</span>
  <span class="cm-variable">move</span><span class="cm-punctuation">:</span> <span class="cm-operator">-></span>
    <span class="cm-variable">alert</span> <span class="cm-string">"Slithering..."</span>
    <span class="cm-variable">super</span> <span class="cm-number">5</span>

<span class="cm-keyword">class</span> <span class="cm-variable">Horse</span> <span class="cm-keyword">extends</span> <span class="cm-variable">Animal</span>
  <span class="cm-variable">move</span><span class="cm-punctuation">:</span> <span class="cm-operator">-></span>
    <span class="cm-variable">alert</span> <span class="cm-string">"Galloping..."</span>
    <span class="cm-variable">super</span> <span class="cm-number">45</span>

<span class="cm-variable">sam</span> <span class="cm-punctuation">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Snake</span> <span class="cm-string">"Sammy the Python"</span>
<span class="cm-variable">tom</span> <span class="cm-punctuation">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Horse</span> <span class="cm-string">"Tommy the Palomino"</span>

<span class="cm-variable">sam</span><span class="cm-punctuation">.</span><span class="cm-property">move</span><span class="cm-punctuation">()</span>
<span class="cm-variable">tom</span><span class="cm-punctuation">.</span><span class="cm-property">move</span><span class="cm-punctuation">()</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="classes-js">var Animal, Horse, Snake, sam, tom;

Animal = class Animal {
  constructor(name) {
    this.name = name;
  }

  move(meters) {
    return alert(this.name + ` moved ${meters}m.`);
  }

};

Snake = class Snake extends Animal {
  move() {
    alert("Slithering...");
    return super.move(5);
  }

};

Horse = class Horse extends Animal {
  move() {
    alert("Galloping...");
    return super.move(45);
  }

};

sam = new Snake("Sammy the Python");

tom = new Horse("Tommy the Palomino");

sam.move();

tom.move();
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">Animal</span>, <span class="cm-def">Horse</span>, <span class="cm-def">Snake</span>, <span class="cm-def">sam</span>, <span class="cm-def">tom</span>;

<span class="cm-variable">Animal</span> <span class="cm-operator">=</span> <span class="cm-keyword">class</span> <span class="cm-def">Animal</span> {
  <span class="cm-property">constructor</span>(<span class="cm-def">name</span>) {
    <span class="cm-keyword">this</span>.<span class="cm-property">name</span> <span class="cm-operator">=</span> <span class="cm-variable-2">name</span>;
  }

  <span class="cm-property">move</span>(<span class="cm-def">meters</span>) {
    <span class="cm-keyword">return</span> <span class="cm-variable">alert</span>(<span class="cm-keyword">this</span>.<span class="cm-property">name</span> <span class="cm-operator">+</span> <span class="cm-string-2">` moved ${</span><span class="cm-variable-2">meters</span><span class="cm-string-2">}m.`</span>);
  }

};

<span class="cm-variable">Snake</span> <span class="cm-operator">=</span> <span class="cm-keyword">class</span> <span class="cm-def">Snake</span> <span class="cm-keyword">extends</span> <span class="cm-variable">Animal</span> {
  <span class="cm-property">move</span>() {
    <span class="cm-variable">alert</span>(<span class="cm-string">"Slithering..."</span>);
    <span class="cm-keyword">return</span> <span class="cm-keyword">super</span>.<span class="cm-property">move</span>(<span class="cm-number">5</span>);
  }

};

<span class="cm-variable">Horse</span> <span class="cm-operator">=</span> <span class="cm-keyword">class</span> <span class="cm-def">Horse</span> <span class="cm-keyword">extends</span> <span class="cm-variable">Animal</span> {
  <span class="cm-property">move</span>() {
    <span class="cm-variable">alert</span>(<span class="cm-string">"Galloping..."</span>);
    <span class="cm-keyword">return</span> <span class="cm-keyword">super</span>.<span class="cm-property">move</span>(<span class="cm-number">45</span>);
  }

};

<span class="cm-variable">sam</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Snake</span>(<span class="cm-string">"Sammy the Python"</span>);

<span class="cm-variable">tom</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Horse</span>(<span class="cm-string">"Tommy the Palomino"</span>);

<span class="cm-variable">sam</span>.<span class="cm-property">move</span>();

<span class="cm-variable">tom</span>.<span class="cm-property">move</span>();
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="classes" data-run="true"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small></button>
    </div>
  </div>
  
</aside>
<p>在方法前新增 <code>@</code> 符號可以定義成靜態方法：</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="static">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="static-coffee">class Teenager
  @say: (speech) ->
    words = speech.split ' '
    fillers = ['uh', 'um', 'like', 'actually', 'so', 'maybe']
    output = []
    for word, index in words
      output.push word
      output.push fillers[Math.floor(Math.random() * fillers.length)] unless index is words.length - 1
    output.join ', '
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">class</span> <span class="cm-variable">Teenager</span>
  <span class="cm-property">@say</span><span class="cm-punctuation">:</span> <span class="cm-punctuation">(</span><span class="cm-variable">speech</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span>
    <span class="cm-variable">words</span> <span class="cm-punctuation">=</span> <span class="cm-variable">speech</span><span class="cm-punctuation">.</span><span class="cm-property">split</span> <span class="cm-string">' '</span>
    <span class="cm-variable">fillers</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">[</span><span class="cm-string">'uh'</span><span class="cm-punctuation">,</span> <span class="cm-string">'um'</span><span class="cm-punctuation">,</span> <span class="cm-string">'like'</span><span class="cm-punctuation">,</span> <span class="cm-string">'actually'</span><span class="cm-punctuation">,</span> <span class="cm-string">'so'</span><span class="cm-punctuation">,</span> <span class="cm-string">'maybe'</span><span class="cm-punctuation">]</span>
    <span class="cm-variable">output</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">[]</span>
    <span class="cm-keyword">for</span> <span class="cm-variable">word</span><span class="cm-punctuation">,</span> <span class="cm-variable">index</span> <span class="cm-operator">in</span> <span class="cm-variable">words</span>
      <span class="cm-variable">output</span><span class="cm-punctuation">.</span><span class="cm-property">push</span> <span class="cm-variable">word</span>
      <span class="cm-variable">output</span><span class="cm-punctuation">.</span><span class="cm-property">push</span> <span class="cm-variable">fillers</span><span class="cm-punctuation">[</span><span class="cm-variable">Math</span><span class="cm-punctuation">.</span><span class="cm-property">floor</span><span class="cm-punctuation">(</span><span class="cm-variable">Math</span><span class="cm-punctuation">.</span><span class="cm-property">random</span><span class="cm-punctuation">()</span> <span class="cm-operator">*</span> <span class="cm-variable">fillers</span><span class="cm-punctuation">.</span><span class="cm-property">length</span><span class="cm-punctuation">)]</span> <span class="cm-keyword">unless</span> <span class="cm-variable">index</span> <span class="cm-operator">is</span> <span class="cm-variable">words</span><span class="cm-punctuation">.</span><span class="cm-property">length</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>
<span class="cm-dedent">    </span><span class="cm-variable">output</span><span class="cm-punctuation">.</span><span class="cm-property">join</span> <span class="cm-string">', '</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="static-js">var Teenager;

Teenager = class Teenager {
  static say(speech) {
    var fillers, i, index, len, output, word, words;
    words = speech.split(' ');
    fillers = ['uh', 'um', 'like', 'actually', 'so', 'maybe'];
    output = [];
    for (index = i = 0, len = words.length; i < len; index = ++i) {
      word = words[index];
      output.push(word);
      if (index !== words.length - 1) {
        output.push(fillers[Math.floor(Math.random() * fillers.length)]);
      }
    }
    return output.join(', ');
  }

};
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">Teenager</span>;

<span class="cm-variable">Teenager</span> <span class="cm-operator">=</span> <span class="cm-keyword">class</span> <span class="cm-def">Teenager</span> {
  <span class="cm-keyword">static</span> <span class="cm-property">say</span>(<span class="cm-def">speech</span>) {
    <span class="cm-keyword">var</span> <span class="cm-def">fillers</span>, <span class="cm-def">i</span>, <span class="cm-def">index</span>, <span class="cm-def">len</span>, <span class="cm-def">output</span>, <span class="cm-def">word</span>, <span class="cm-def">words</span>;
    <span class="cm-variable-2">words</span> <span class="cm-operator">=</span> <span class="cm-variable-2">speech</span>.<span class="cm-property">split</span>(<span class="cm-string">' '</span>);
    <span class="cm-variable-2">fillers</span> <span class="cm-operator">=</span> [<span class="cm-string">'uh'</span>, <span class="cm-string">'um'</span>, <span class="cm-string">'like'</span>, <span class="cm-string">'actually'</span>, <span class="cm-string">'so'</span>, <span class="cm-string">'maybe'</span>];
    <span class="cm-variable-2">output</span> <span class="cm-operator">=</span> [];
    <span class="cm-keyword">for</span> (<span class="cm-variable-2">index</span> <span class="cm-operator">=</span> <span class="cm-variable-2">i</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>, <span class="cm-variable-2">len</span> <span class="cm-operator">=</span> <span class="cm-variable-2">words</span>.<span class="cm-property">length</span>; <span class="cm-variable-2">i</span> <span class="cm-operator">&lt;</span> <span class="cm-variable-2">len</span>; <span class="cm-variable-2">index</span> <span class="cm-operator">=</span> <span class="cm-operator">++</span><span class="cm-variable-2">i</span>) {
      <span class="cm-variable-2">word</span> <span class="cm-operator">=</span> <span class="cm-variable-2">words</span>[<span class="cm-variable-2">index</span>];
      <span class="cm-variable-2">output</span>.<span class="cm-property">push</span>(<span class="cm-variable-2">word</span>);
      <span class="cm-keyword">if</span> (<span class="cm-variable-2">index</span> <span class="cm-operator">!==</span> <span class="cm-variable-2">words</span>.<span class="cm-property">length</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>) {
        <span class="cm-variable-2">output</span>.<span class="cm-property">push</span>(<span class="cm-variable-2">fillers</span>[<span class="cm-variable">Math</span>.<span class="cm-property">floor</span>(<span class="cm-variable">Math</span>.<span class="cm-property">random</span>() <span class="cm-operator">*</span> <span class="cm-variable-2">fillers</span>.<span class="cm-property">length</span>)]);
      }
    }
    <span class="cm-keyword">return</span> <span class="cm-variable-2">output</span>.<span class="cm-property">join</span>(<span class="cm-string">', '</span>);
  }

};
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="static" data-run="Teenager.say%28%22Are%20we%20there%20yet%3F%22%29"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>Teenager.say(&quot;Are we there yet?&quot;)</button>
    </div>
  </div>
  
</aside>
<p>最後，類別的定義區塊能夠擺放程式碼，這讓你有更大的自由度在設計一個類別上。在這個區塊中 <code>this</code> 會指向到類別自身；所以你就可以透過像 <code>@屬性: 值</code> 的方式來定義類別的屬性內容。</p>

        </section>
        <section id="prototypal-inheritance">
          <h2>原型鏈繼承</h2>
<p>除了支援 ES2015 的類別用法外，CoffeeScript 還讓你能夠有更簡單的方式和原型鏈互動。以 <code>::</code> 運算子你可以快速地修改一個物件的原型：</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="prototypes">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="prototypes-coffee">String::dasherize = ->
  this.replace /_/g, "-"
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">String</span><span class="cm-punctuation">::</span><span class="cm-variable">dasherize</span> <span class="cm-punctuation">=</span> <span class="cm-operator">-></span>
  <span class="cm-keyword">this</span><span class="cm-punctuation">.</span><span class="cm-property">replace</span> <span class="cm-string-2">/_/</span><span class="cm-variable">g</span><span class="cm-punctuation">,</span> <span class="cm-string">"-"</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="prototypes-js">String.prototype.dasherize = function() {
  return this.replace(/_/g, "-");
};
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">String</span>.<span class="cm-property">prototype</span>.<span class="cm-property">dasherize</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>() {
  <span class="cm-keyword">return</span> <span class="cm-keyword">this</span>.<span class="cm-property">replace</span>(<span class="cm-string-2">/_/g</span>, <span class="cm-string">"-"</span>);
};
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="prototypes" data-run="%22one_two%22.dasherize%28%29"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>&quot;one_two&quot;.dasherize()</button>
    </div>
  </div>
  
</aside>

        </section>
        <section id="switch">
          <h2>Switch 條件判斷式</h2>
<p><code>switch</code> 條件判斷式在 JavaScript 不得不說是有點尷尬。因為你必須在每個 <code>case</code> 條件分句裡的最後加上 <code>break</code> 來避免整個程式直接執行到最後一個條件分句。CoffeeScript 決定解決這個窘境，並且允許 <code>switch</code> 作為回傳的表達式。其格式為：<code>switch</code> 作主體、<code>when</code> 為條件分句、<code>else</code> 則是預設的處理方法。</p>
<p>就和 Ruby 的寫法差不多，CoffeeScript 的 <code>switch</code> 條件判斷式的單個 <code>when</code> 條件分句可以用上多個值。如果符合其中一個值則執行該條件分句的程式碼。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="switch">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="switch-coffee">switch day
  when "Mon" then go work
  when "Tue" then go relax
  when "Thu" then go iceFishing
  when "Fri", "Sat"
    if day is bingoDay
      go bingo
      go dancing
  when "Sun" then go church
  else go work
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">switch</span> <span class="cm-variable">day</span>
  <span class="cm-keyword">when</span> <span class="cm-string">"Mon"</span> <span class="cm-keyword">then</span> <span class="cm-variable">go</span> <span class="cm-variable">work</span>
  <span class="cm-keyword">when</span> <span class="cm-string">"Tue"</span> <span class="cm-keyword">then</span> <span class="cm-variable">go</span> <span class="cm-variable">relax</span>
  <span class="cm-keyword">when</span> <span class="cm-string">"Thu"</span> <span class="cm-keyword">then</span> <span class="cm-variable">go</span> <span class="cm-variable">iceFishing</span>
  <span class="cm-keyword">when</span> <span class="cm-string">"Fri"</span><span class="cm-punctuation">,</span> <span class="cm-string">"Sat"</span>
<span class="cm-indent">    </span><span class="cm-keyword">if</span> <span class="cm-variable">day</span> <span class="cm-operator">is</span> <span class="cm-variable">bingoDay</span>
      <span class="cm-variable">go</span> <span class="cm-variable">bingo</span>
      <span class="cm-variable">go</span> <span class="cm-variable">dancing</span>
<span class="cm-dedent">  </span><span class="cm-keyword">when</span> <span class="cm-string">"Sun"</span> <span class="cm-keyword">then</span> <span class="cm-variable">go</span> <span class="cm-variable">church</span>
  <span class="cm-keyword">else</span> <span class="cm-variable">go</span> <span class="cm-variable">work</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="switch-js">switch (day) {
  case "Mon":
    go(work);
    break;
  case "Tue":
    go(relax);
    break;
  case "Thu":
    go(iceFishing);
    break;
  case "Fri":
  case "Sat":
    if (day === bingoDay) {
      go(bingo);
      go(dancing);
    }
    break;
  case "Sun":
    go(church);
    break;
  default:
    go(work);
}
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">switch</span> (<span class="cm-variable">day</span>) {
  <span class="cm-keyword">case</span> <span class="cm-string">"Mon"</span>:
    <span class="cm-variable">go</span>(<span class="cm-variable">work</span>);
    <span class="cm-keyword">break</span>;
  <span class="cm-keyword">case</span> <span class="cm-string">"Tue"</span>:
    <span class="cm-variable">go</span>(<span class="cm-variable">relax</span>);
    <span class="cm-keyword">break</span>;
  <span class="cm-keyword">case</span> <span class="cm-string">"Thu"</span>:
    <span class="cm-variable">go</span>(<span class="cm-variable">iceFishing</span>);
    <span class="cm-keyword">break</span>;
  <span class="cm-keyword">case</span> <span class="cm-string">"Fri"</span>:
  <span class="cm-keyword">case</span> <span class="cm-string">"Sat"</span>:
    <span class="cm-keyword">if</span> (<span class="cm-variable">day</span> <span class="cm-operator">===</span> <span class="cm-variable">bingoDay</span>) {
      <span class="cm-variable">go</span>(<span class="cm-variable">bingo</span>);
      <span class="cm-variable">go</span>(<span class="cm-variable">dancing</span>);
    }
    <span class="cm-keyword">break</span>;
  <span class="cm-keyword">case</span> <span class="cm-string">"Sun"</span>:
    <span class="cm-variable">go</span>(<span class="cm-variable">church</span>);
    <span class="cm-keyword">break</span>;
  <span class="cm-keyword">default</span>:
    <span class="cm-variable">go</span>(<span class="cm-variable">work</span>);
}
</pre>
    </div>
  </div>
  
</aside>
<p><code>switch</code> 也能夠直接當作值使用，就像更簡潔的 <code>if / else</code> 條件判斷鏈。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="switch_with_no_expression">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="switch_with_no_expression-coffee">score = 76
grade = switch
  when score < 60 then 'F'
  when score < 70 then 'D'
  when score < 80 then 'C'
  when score < 90 then 'B'
  else 'A'
# grade == 'C'
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">score</span> <span class="cm-punctuation">=</span> <span class="cm-number">76</span>
<span class="cm-variable">grade</span> <span class="cm-punctuation">=</span> <span class="cm-keyword">switch</span>
  <span class="cm-keyword">when</span> <span class="cm-variable">score</span> <span class="cm-operator">&lt;</span> <span class="cm-number">60</span> <span class="cm-keyword">then</span> <span class="cm-string">'F'</span>
  <span class="cm-keyword">when</span> <span class="cm-variable">score</span> <span class="cm-operator">&lt;</span> <span class="cm-number">70</span> <span class="cm-keyword">then</span> <span class="cm-string">'D'</span>
  <span class="cm-keyword">when</span> <span class="cm-variable">score</span> <span class="cm-operator">&lt;</span> <span class="cm-number">80</span> <span class="cm-keyword">then</span> <span class="cm-string">'C'</span>
  <span class="cm-keyword">when</span> <span class="cm-variable">score</span> <span class="cm-operator">&lt;</span> <span class="cm-number">90</span> <span class="cm-keyword">then</span> <span class="cm-string">'B'</span>
  <span class="cm-keyword">else</span> <span class="cm-string">'A'</span>
<span class="cm-comment"># grade == 'C'</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="switch_with_no_expression-js">var grade, score;

score = 76;

grade = (function() {
  switch (false) {
    case !(score < 60):
      return 'F';
    case !(score < 70):
      return 'D';
    case !(score < 80):
      return 'C';
    case !(score < 90):
      return 'B';
    default:
      return 'A';
  }
})();

// grade == 'C'
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">grade</span>, <span class="cm-def">score</span>;

<span class="cm-variable">score</span> <span class="cm-operator">=</span> <span class="cm-number">76</span>;

<span class="cm-variable">grade</span> <span class="cm-operator">=</span> (<span class="cm-keyword">function</span>() {
  <span class="cm-keyword">switch</span> (<span class="cm-atom">false</span>) {
    <span class="cm-keyword">case</span> <span class="cm-operator">!</span>(<span class="cm-variable">score</span> <span class="cm-operator">&lt;</span> <span class="cm-number">60</span>):
      <span class="cm-keyword">return</span> <span class="cm-string">'F'</span>;
    <span class="cm-keyword">case</span> <span class="cm-operator">!</span>(<span class="cm-variable">score</span> <span class="cm-operator">&lt;</span> <span class="cm-number">70</span>):
      <span class="cm-keyword">return</span> <span class="cm-string">'D'</span>;
    <span class="cm-keyword">case</span> <span class="cm-operator">!</span>(<span class="cm-variable">score</span> <span class="cm-operator">&lt;</span> <span class="cm-number">80</span>):
      <span class="cm-keyword">return</span> <span class="cm-string">'C'</span>;
    <span class="cm-keyword">case</span> <span class="cm-operator">!</span>(<span class="cm-variable">score</span> <span class="cm-operator">&lt;</span> <span class="cm-number">90</span>):
      <span class="cm-keyword">return</span> <span class="cm-string">'B'</span>;
    <span class="cm-keyword">default</span>:
      <span class="cm-keyword">return</span> <span class="cm-string">'A'</span>;
  }
})();

<span class="cm-comment">// grade == 'C'</span>
</pre>
    </div>
  </div>
  
</aside>

        </section>
        <section id="try">
          <h2>例外處理</h2>
<p><code>try</code> 表達式與 JavaScript 的 <code>try</code> 可以說是完全一樣。不過在 CoffeeScript 中，你可以 <em>省略</em> catch 和 finally 的部分。在可能的時候 catch 會自動省略不必要的接收參數。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="try">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="try-coffee">try
  allHellBreaksLoose()
  catsAndDogsLivingTogether()
catch error
  print error
finally
  cleanUp()
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">try</span>
  <span class="cm-variable">allHellBreaksLoose</span><span class="cm-punctuation">()</span>
  <span class="cm-variable">catsAndDogsLivingTogether</span><span class="cm-punctuation">()</span>
<span class="cm-keyword">catch</span> <span class="cm-variable">error</span>
  <span class="cm-variable">print</span> <span class="cm-variable">error</span>
<span class="cm-keyword">finally</span>
  <span class="cm-variable">cleanUp</span><span class="cm-punctuation">()</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="try-js">var error;

try {
  allHellBreaksLoose();
  catsAndDogsLivingTogether();
} catch (error1) {
  error = error1;
  print(error);
} finally {
  cleanUp();
}
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">error</span>;

<span class="cm-keyword">try</span> {
  <span class="cm-variable">allHellBreaksLoose</span>();
  <span class="cm-variable">catsAndDogsLivingTogether</span>();
} <span class="cm-keyword">catch</span> (<span class="cm-def">error1</span>) {
  <span class="cm-variable">error</span> <span class="cm-operator">=</span> <span class="cm-variable-2">error1</span>;
  <span class="cm-variable">print</span>(<span class="cm-variable">error</span>);
} <span class="cm-keyword">finally</span> {
  <span class="cm-variable">cleanUp</span>();
}
</pre>
    </div>
  </div>
  
</aside>

        </section>
        <section id="comparisons">
          <h2>比較鏈</h2>
<p>CoffeeScript 從 <a href="https://docs.python.org/3/reference/expressions.html#not-in">Python 的</a>比較鏈借了點東西來—這讓你能夠更簡單的測試某個值是否落在指定範圍中。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="comparisons">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="comparisons-coffee">cholesterol = 127

healthy = 200 > cholesterol > 60
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">cholesterol</span> <span class="cm-punctuation">=</span> <span class="cm-number">127</span>

<span class="cm-variable">healthy</span> <span class="cm-punctuation">=</span> <span class="cm-number">200</span> <span class="cm-operator">></span> <span class="cm-variable">cholesterol</span> <span class="cm-operator">></span> <span class="cm-number">60</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="comparisons-js">var cholesterol, healthy;

cholesterol = 127;

healthy = (200 > cholesterol && cholesterol > 60);
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">cholesterol</span>, <span class="cm-def">healthy</span>;

<span class="cm-variable">cholesterol</span> <span class="cm-operator">=</span> <span class="cm-number">127</span>;

<span class="cm-variable">healthy</span> <span class="cm-operator">=</span> (<span class="cm-number">200</span> <span class="cm-operator">></span> <span class="cm-variable">cholesterol</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">cholesterol</span> <span class="cm-operator">></span> <span class="cm-number">60</span>);
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="comparisons" data-run="healthy"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>healthy</button>
    </div>
  </div>
  
</aside>

        </section>
        <section id="regexes">
          <h2>正規表達式區塊</h2>
<p>和字串、註釋區塊相同的是，CoffeeScript 支援正規表達式區塊－這能夠忽略部分的空白並且讓你可以在正規表達式的規則中安插註釋。這個功能的靈感來自於 Perl 的 <code>/x</code> 修飾子，但 CoffeeScript 的正規表達式區塊是以 <code>///</code> 作為開頭與結尾，這樣令正規表達式比較好閱讀。讓我們來實際在 CoffeeScript 操演一遍：</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="heregexes">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="heregexes-coffee">NUMBER     = ///
  ^ 0b[01]+    |              # 二進制
  ^ 0o[0-7]+   |              # 八進制
  ^ 0x[\da-f]+ |              # 十六進制
  ^ \d*\.?\d+ (?:e[+-]?\d+)?  # 十進制
///i
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">NUMBER</span>     <span class="cm-punctuation">=</span> <span class="cm-string-2">///</span>
<span class="cm-indent">  </span><span class="cm-operator">^</span> <span class="cm-number">0</span><span class="cm-variable">b</span><span class="cm-punctuation">[</span><span class="cm-error">0</span><span class="cm-number">1</span><span class="cm-punctuation">]</span><span class="cm-operator">+</span>    <span class="cm-operator">|</span>              <span class="cm-comment"># 二進制</span>
  <span class="cm-operator">^</span> <span class="cm-number">0</span><span class="cm-variable">o</span><span class="cm-punctuation">[</span><span class="cm-number">0-7</span><span class="cm-punctuation">]</span><span class="cm-operator">+</span>   <span class="cm-operator">|</span>              <span class="cm-comment"># 八進制</span>
  <span class="cm-operator">^</span> <span class="cm-error">0</span><span class="cm-variable">x</span><span class="cm-punctuation">[</span><span class="cm-error">\</span><span class="cm-variable">da</span><span class="cm-operator">-</span><span class="cm-variable">f</span><span class="cm-punctuation">]</span><span class="cm-operator">+</span> <span class="cm-operator">|</span>              <span class="cm-comment"># 十六進制</span>
  <span class="cm-operator">^</span> <span class="cm-error">\</span><span class="cm-variable">d</span><span class="cm-operator">*</span><span class="cm-error">\</span><span class="cm-punctuation">.</span><span class="cm-operator">?</span><span class="cm-error">\</span><span class="cm-variable">d</span><span class="cm-operator">+</span> <span class="cm-punctuation">(</span><span class="cm-operator">?</span><span class="cm-punctuation">:</span><span class="cm-variable">e</span><span class="cm-punctuation">[</span><span class="cm-operator">+-</span><span class="cm-punctuation">]</span><span class="cm-operator">?</span><span class="cm-error">\</span><span class="cm-variable">d</span><span class="cm-operator">+</span><span class="cm-punctuation">)</span><span class="cm-operator">?</span>  <span class="cm-comment"># 十進制</span>
<span class="cm-string-2">///i</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="heregexes-js">var NUMBER;

NUMBER = /^0b[01]+|^0o[0-7]+|^0x[\da-f]+|^\d*\.?\d+(?:e[+-]?\d+)?/i; // 二進制
// 八進制
// 十六進制
// 十進制
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">NUMBER</span>;

<span class="cm-variable">NUMBER</span> <span class="cm-operator">=</span> <span class="cm-string-2">/^0b[01]+|^0o[0-7]+|^0x[\da-f]+|^\d*\.?\d+(?:e[+-]?\d+)?/i</span>; <span class="cm-comment">// 二進制</span>
<span class="cm-comment">// 八進制</span>
<span class="cm-comment">// 十六進制</span>
<span class="cm-comment">// 十進制</span>
</pre>
    </div>
  </div>
  
</aside>

        </section>
        <section id="tagged-template-literals">
          <h2>模板字串</h2>
<p>CoffeeScript 支援 <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Template_literals#Tagged_template_literals">ES2015 的模板字串</a>，這讓你能夠編輯、更改字串插值的內容。如果你在字串前直接寫上一個函式名稱（中間沒有空格）的話，CoffeeScript 就會直接將其輸出為 ES2015 的模板字串，而<a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Template_literals#Tagged_template_literals">這會造成</a>：字串內的插值都會變成參數傳遞至該函式，並且以該函式所回傳的值作為實際插值內容。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="tagged_template_literals">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="tagged_template_literals-coffee">upperCaseExpr = (textParts, expressions...) ->
  textParts.reduce (text, textPart, i) ->
    text + expressions[i - 1].toUpperCase() + textPart

greet = (name, adjective) ->
  upperCaseExpr"""
               Hi #{name}. You look #{adjective}!
               """
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">upperCaseExpr</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">(</span><span class="cm-variable">textParts</span><span class="cm-punctuation">,</span> <span class="cm-variable">expressions</span><span class="cm-punctuation">...)</span> <span class="cm-operator">-></span>
  <span class="cm-variable">textParts</span><span class="cm-punctuation">.</span><span class="cm-property">reduce</span> <span class="cm-punctuation">(</span><span class="cm-variable">text</span><span class="cm-punctuation">,</span> <span class="cm-variable">textPart</span><span class="cm-punctuation">,</span> <span class="cm-variable">i</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span>
    <span class="cm-variable">text</span> <span class="cm-operator">+</span> <span class="cm-variable">expressions</span><span class="cm-punctuation">[</span><span class="cm-variable">i</span> <span class="cm-operator">-</span> <span class="cm-number">1</span><span class="cm-punctuation">].</span><span class="cm-property">toUpperCase</span><span class="cm-punctuation">()</span> <span class="cm-operator">+</span> <span class="cm-variable">textPart</span>

<span class="cm-variable">greet</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">(</span><span class="cm-variable">name</span><span class="cm-punctuation">,</span> <span class="cm-variable">adjective</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span>
  <span class="cm-variable">upperCaseExpr</span><span class="cm-string">"""</span>
<span class="cm-string">               Hi #{name}. You look #{adjective}!</span>
<span class="cm-string">               """</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="tagged_template_literals-js">var greet, upperCaseExpr;

upperCaseExpr = function(textParts, ...expressions) {
  return textParts.reduce(function(text, textPart, i) {
    return text + expressions[i - 1].toUpperCase() + textPart;
  });
};

greet = function(name, adjective) {
  return upperCaseExpr`Hi ${name}. You look ${adjective}!`;
};
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">greet</span>, <span class="cm-def">upperCaseExpr</span>;

<span class="cm-variable">upperCaseExpr</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>(<span class="cm-def">textParts</span>, <span class="cm-meta">...</span><span class="cm-def">expressions</span>) {
  <span class="cm-keyword">return</span> <span class="cm-variable-2">textParts</span>.<span class="cm-property">reduce</span>(<span class="cm-keyword">function</span>(<span class="cm-def">text</span>, <span class="cm-def">textPart</span>, <span class="cm-def">i</span>) {
    <span class="cm-keyword">return</span> <span class="cm-variable-2">text</span> <span class="cm-operator">+</span> <span class="cm-variable-2">expressions</span>[<span class="cm-variable-2">i</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>].<span class="cm-property">toUpperCase</span>() <span class="cm-operator">+</span> <span class="cm-variable-2">textPart</span>;
  });
};

<span class="cm-variable">greet</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>(<span class="cm-def">name</span>, <span class="cm-def">adjective</span>) {
  <span class="cm-keyword">return</span> <span class="cm-variable">upperCaseExpr</span><span class="cm-string-2">`Hi ${</span><span class="cm-variable-2">name</span><span class="cm-string-2">}. You look ${</span><span class="cm-variable-2">adjective</span><span class="cm-string-2">}!`</span>;
};
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="tagged_template_literals" data-run="greet%28%22greg%22%2C%20%22awesome%22%29"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>greet(&quot;greg&quot;, &quot;awesome&quot;)</button>
    </div>
  </div>
  
</aside>

        </section>
        <section id="modules">
          <h2>模組系統</h2>
<p>CoffeeScript 支援 ES2015 的模組，其 <code>import</code> 和 <code>export</code> 的使用方法都非常相似：</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="modules">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="modules-coffee">import 'local-file.coffee'
import 'coffeescript'

import _ from 'underscore'
import * as underscore from 'underscore'

import { now } from 'underscore'
import { now as currentTimestamp } from 'underscore'
import { first, last } from 'underscore'
import utilityBelt, { each } from 'underscore'

export default Math
export square = (x) -> x * x
export class Mathematics
  least: (x, y) -> if x < y then x else y

export { sqrt }
export { sqrt as squareRoot }
export { Mathematics as default, sqrt as squareRoot }

export * from 'underscore'
export { max, min } from 'underscore'
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">import</span> <span class="cm-string">'local-file.coffee'</span>
<span class="cm-variable">import</span> <span class="cm-string">'coffeescript'</span>

<span class="cm-variable">import</span> <span class="cm-variable">_</span> <span class="cm-variable">from</span> <span class="cm-string">'underscore'</span>
<span class="cm-variable">import</span> <span class="cm-operator">*</span> <span class="cm-variable">as</span> <span class="cm-variable">underscore</span> <span class="cm-variable">from</span> <span class="cm-string">'underscore'</span>

<span class="cm-variable">import</span> <span class="cm-punctuation">{</span> <span class="cm-variable">now</span> <span class="cm-punctuation">}</span> <span class="cm-variable">from</span> <span class="cm-string">'underscore'</span>
<span class="cm-variable">import</span> <span class="cm-punctuation">{</span> <span class="cm-variable">now</span> <span class="cm-variable">as</span> <span class="cm-variable">currentTimestamp</span> <span class="cm-punctuation">}</span> <span class="cm-variable">from</span> <span class="cm-string">'underscore'</span>
<span class="cm-variable">import</span> <span class="cm-punctuation">{</span> <span class="cm-variable">first</span><span class="cm-punctuation">,</span> <span class="cm-variable">last</span> <span class="cm-punctuation">}</span> <span class="cm-variable">from</span> <span class="cm-string">'underscore'</span>
<span class="cm-variable">import</span> <span class="cm-variable">utilityBelt</span><span class="cm-punctuation">,</span> <span class="cm-punctuation">{</span> <span class="cm-variable">each</span> <span class="cm-punctuation">}</span> <span class="cm-variable">from</span> <span class="cm-string">'underscore'</span>

<span class="cm-variable">export</span> <span class="cm-variable">default</span> <span class="cm-variable">Math</span>
<span class="cm-variable">export</span> <span class="cm-variable">square</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">(</span><span class="cm-variable">x</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span> <span class="cm-variable">x</span> <span class="cm-operator">*</span> <span class="cm-variable">x</span>
<span class="cm-variable">export</span> <span class="cm-keyword">class</span> <span class="cm-variable">Mathematics</span>
  <span class="cm-variable">least</span><span class="cm-punctuation">:</span> <span class="cm-punctuation">(</span><span class="cm-variable">x</span><span class="cm-punctuation">,</span> <span class="cm-variable">y</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span> <span class="cm-keyword">if</span> <span class="cm-variable">x</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">y</span> <span class="cm-keyword">then</span> <span class="cm-variable">x</span> <span class="cm-keyword">else</span> <span class="cm-variable">y</span>

<span class="cm-variable">export</span> <span class="cm-punctuation">{</span> <span class="cm-variable">sqrt</span> <span class="cm-punctuation">}</span>
<span class="cm-variable">export</span> <span class="cm-punctuation">{</span> <span class="cm-variable">sqrt</span> <span class="cm-variable">as</span> <span class="cm-variable">squareRoot</span> <span class="cm-punctuation">}</span>
<span class="cm-variable">export</span> <span class="cm-punctuation">{</span> <span class="cm-variable">Mathematics</span> <span class="cm-variable">as</span> <span class="cm-variable">default</span><span class="cm-punctuation">,</span> <span class="cm-variable">sqrt</span> <span class="cm-variable">as</span> <span class="cm-variable">squareRoot</span> <span class="cm-punctuation">}</span>

<span class="cm-variable">export</span> <span class="cm-operator">*</span> <span class="cm-variable">from</span> <span class="cm-string">'underscore'</span>
<span class="cm-variable">export</span> <span class="cm-punctuation">{</span> <span class="cm-variable">max</span><span class="cm-punctuation">,</span> <span class="cm-variable">min</span> <span class="cm-punctuation">}</span> <span class="cm-variable">from</span> <span class="cm-string">'underscore'</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="modules-js">import 'local-file.coffee';

import 'coffeescript';

import _ from 'underscore';

import * as underscore from 'underscore';

import {
  now
} from 'underscore';

import {
  now as currentTimestamp
} from 'underscore';

import {
  first,
  last
} from 'underscore';

import utilityBelt, {
  each
} from 'underscore';

export default Math;

export var square = function(x) {
  return x * x;
};

export var Mathematics = class Mathematics {
  least(x, y) {
    if (x < y) {
      return x;
    } else {
      return y;
    }
  }

};

export {
  sqrt
};

export {
  sqrt as squareRoot
};

export {
  Mathematics as default,
  sqrt as squareRoot
};

export * from 'underscore';

export {
  max,
  min
} from 'underscore';
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">import</span> <span class="cm-string">'local-file.coffee'</span>;

<span class="cm-keyword">import</span> <span class="cm-string">'coffeescript'</span>;

<span class="cm-keyword">import</span> <span class="cm-def">_</span> <span class="cm-keyword">from</span> <span class="cm-string">'underscore'</span>;

<span class="cm-keyword">import</span> <span class="cm-keyword">*</span> <span class="cm-keyword">as</span> <span class="cm-def">underscore</span> <span class="cm-keyword">from</span> <span class="cm-string">'underscore'</span>;

<span class="cm-keyword">import</span> {
  <span class="cm-def">now</span>
} <span class="cm-keyword">from</span> <span class="cm-string">'underscore'</span>;

<span class="cm-keyword">import</span> {
  <span class="cm-def">now</span> <span class="cm-keyword">as</span> <span class="cm-def">currentTimestamp</span>
} <span class="cm-keyword">from</span> <span class="cm-string">'underscore'</span>;

<span class="cm-keyword">import</span> {
  <span class="cm-def">first</span>,
  <span class="cm-def">last</span>
} <span class="cm-keyword">from</span> <span class="cm-string">'underscore'</span>;

<span class="cm-keyword">import</span> <span class="cm-def">utilityBelt</span>, {
  <span class="cm-def">each</span>
} <span class="cm-keyword">from</span> <span class="cm-string">'underscore'</span>;

<span class="cm-keyword">export</span> <span class="cm-keyword">default</span> <span class="cm-variable">Math</span>;

<span class="cm-keyword">export</span> <span class="cm-keyword">var</span> <span class="cm-def">square</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>(<span class="cm-def">x</span>) {
  <span class="cm-keyword">return</span> <span class="cm-variable-2">x</span> <span class="cm-operator">*</span> <span class="cm-variable-2">x</span>;
};

<span class="cm-keyword">export</span> <span class="cm-keyword">var</span> <span class="cm-def">Mathematics</span> <span class="cm-operator">=</span> <span class="cm-keyword">class</span> <span class="cm-def">Mathematics</span> {
  <span class="cm-property">least</span>(<span class="cm-def">x</span>, <span class="cm-def">y</span>) {
    <span class="cm-keyword">if</span> (<span class="cm-variable-2">x</span> <span class="cm-operator">&lt;</span> <span class="cm-variable-2">y</span>) {
      <span class="cm-keyword">return</span> <span class="cm-variable-2">x</span>;
    } <span class="cm-keyword">else</span> {
      <span class="cm-keyword">return</span> <span class="cm-variable-2">y</span>;
    }
  }

};

<span class="cm-keyword">export</span> {
  <span class="cm-variable">sqrt</span>
};

<span class="cm-keyword">export</span> {
  <span class="cm-variable">sqrt</span> <span class="cm-keyword">as</span> <span class="cm-variable">squareRoot</span>
};

<span class="cm-keyword">export</span> {
  <span class="cm-variable">Mathematics</span> <span class="cm-keyword">as</span> <span class="cm-keyword">default</span>,
  <span class="cm-variable">sqrt</span> <span class="cm-variable">as</span> <span class="cm-variable">squareRoot</span>
};

<span class="cm-keyword">export</span> <span class="cm-keyword">*</span> <span class="cm-keyword">from</span> <span class="cm-string">'underscore'</span>;

<span class="cm-keyword">export</span> {
  <span class="cm-variable">max</span>,
  <span class="cm-variable">min</span>
} <span class="cm-keyword">from</span> <span class="cm-string">'underscore'</span>;
</pre>
    </div>
  </div>
  
</aside>
<div id="modules-note" class="bookmark"></div>
<p>不過要注意的是 CoffeeScript 編譯器並不會幫你<strong>解析相關模組</strong>；在 CoffeeScript 裡撰寫 <code>import</code> 或 <code>export</code> 只會產生有關 <code>import</code> 和 <code>export</code> 的結果。你需要自行結合相關的轉譯介面或建置工具，例如 <a href="https://github.com/google/traceur-compiler">Traceur Compiler</a>、<a href="http://babeljs.io/">Babel</a> 或 <a href="https://github.com/rollup/rollup">Rollup</a> 來將 ES2015 的模組用法轉譯成真的引用相關模組的程式碼。</p>
<p>還有一點，那就是任何有使用到 <code>import</code> 或 <code>export</code> 的檔案都會自動移除<a href="#lexical-scope">安全作用域</a>，這原本能確保每個檔案擁有自己的作用域而不會和其他檔案相衝；換句話說，只要在程式碼裡有輸入或輸出的用法，就會觸發<a href="#usage">暴露</a>模式。因為 ES2015 的規範強迫 <code>import</code> 或 <code>export</code> 必須在最頂域中宣告。</p>

        </section>
        <section id="embedded">
          <h2>嵌入式 JavaScript</h2>
<p>希望你永遠也不會用到這功能，倘若真有那麼一天，你需要在 CoffeeScript 裡插入原生 JavaScript 用法的話，你可以使用重音符包住那部份的程式碼。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="embedded">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="embedded-coffee">hi = `function() {
  return [document.title, "Hello JavaScript"].join(": ");
}`
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">hi</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">`</span><span class="cm-variable">function</span><span class="cm-punctuation">()</span> <span class="cm-punctuation">{</span>
  <span class="cm-keyword">return</span> <span class="cm-punctuation">[</span><span class="cm-variable">document</span><span class="cm-punctuation">.</span><span class="cm-property">title</span><span class="cm-punctuation">,</span> <span class="cm-string">"Hello JavaScript"</span><span class="cm-punctuation">].</span><span class="cm-property">join</span><span class="cm-punctuation">(</span><span class="cm-string">": "</span><span class="cm-punctuation">);</span>
<span class="cm-punctuation">}`</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="embedded-js">var hi;

hi = function() {
  return [document.title, "Hello JavaScript"].join(": ");
};
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">hi</span>;

<span class="cm-variable">hi</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>() {
  <span class="cm-keyword">return</span> [<span class="cm-variable">document</span>.<span class="cm-property">title</span>, <span class="cm-string">"Hello JavaScript"</span>].<span class="cm-property">join</span>(<span class="cm-string">": "</span>);
};
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="embedded" data-run="hi%28%29"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>hi()</button>
    </div>
  </div>
  
</aside>
<p>透過反斜線脫逸重音符像這樣：<code>\`​</code> 就會輸出成 <code>`​</code>。</p>
<p>脫逸重音符之前的反斜線會需要更多反斜線：<code>\\\`​</code> 則會輸出為 <code>\`​</code>。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="embedded_escaped">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="embedded_escaped-coffee">markdown = `function () {
  return \`In Markdown, write code like \\\`this\\\`\`;
}`
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">markdown</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">`</span><span class="cm-variable">function</span> <span class="cm-punctuation">()</span> <span class="cm-punctuation">{</span>
  <span class="cm-keyword">return</span> <span class="cm-error">\</span><span class="cm-punctuation">`</span><span class="cm-variable">In</span> <span class="cm-variable">Markdown</span><span class="cm-punctuation">,</span> <span class="cm-variable">write</span> <span class="cm-variable">code</span> <span class="cm-variable">like</span> <span class="cm-error">\\\</span><span class="cm-punctuation">`</span><span class="cm-keyword">this</span><span class="cm-error">\\\</span><span class="cm-punctuation">`</span><span class="cm-error">\</span><span class="cm-punctuation">`;</span>
<span class="cm-punctuation">}`</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="embedded_escaped-js">var markdown;

markdown = function () {
  return `In Markdown, write code like \`this\``;
};
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">markdown</span>;

<span class="cm-variable">markdown</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span> () {
  <span class="cm-keyword">return</span> <span class="cm-string-2">`In Markdown, write code like \`this\``</span>;
};
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="embedded_escaped" data-run="markdown%28%29"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>markdown()</button>
    </div>
  </div>
  
</aside>
<p>你也能透過三個重音符來建立嵌入區塊。這樣你就不用整天脫逸重音符。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="embedded_block">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="embedded_block-coffee">```
function time() {
  return `The time is ${new Date().toLocaleTimeString()}`;
}
```
</textarea>
      <pre class="placeholder-code"><span class="cm-punctuation">```</span>
<span class="cm-variable">function</span> <span class="cm-variable">time</span><span class="cm-punctuation">()</span> <span class="cm-punctuation">{</span>
  <span class="cm-keyword">return</span> <span class="cm-punctuation">`</span><span class="cm-variable">The</span> <span class="cm-variable">time</span> <span class="cm-operator">is</span> <span class="cm-variable">$</span><span class="cm-punctuation">{</span><span class="cm-keyword">new</span> <span class="cm-variable">Date</span><span class="cm-punctuation">().</span><span class="cm-property">toLocaleTimeString</span><span class="cm-punctuation">()}`;</span>
<span class="cm-punctuation">}</span>
<span class="cm-punctuation">```</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="embedded_block-js">
function time() {
  return `The time is ${new Date().toLocaleTimeString()}`;
}
;

</textarea>
      <pre class="placeholder-code">
<span class="cm-keyword">function</span> <span class="cm-def">time</span>() {
  <span class="cm-keyword">return</span> <span class="cm-string-2">`The time is ${</span><span class="cm-keyword">new</span> <span class="cm-variable">Date</span>().<span class="cm-property">toLocaleTimeString</span>()<span class="cm-string-2">}`</span>;
}
;

</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="embedded_block" data-run="time%28%29"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>time()</button>
    </div>
  </div>
  
</aside>

        </section>
        <section id="jsx">
          <h2>JSX</h2>
<p><a href="https://facebook.github.io/react/docs/introducing-jsx.html">JSX</a> 是能夠帶有類 XML 元素結構的 JavaScript。雖然初期是為了 <a href="https://facebook.github.io/react/">React</a> 所設計的，但這並不是一個框架或者函式庫。</p>
<p>CoffeeScript 不需要任何的額外擴充套件或設定，就能夠支援類 XML 元素。XML 元素會被編譯並輸出成一般的 JSX 結果，就像 <a href="https://babeljs.io/docs/plugins/transform-react-jsx/">Babel 與 React JSX 的轉化</a>。不過 CoffeeScript 並 <em>不會</em> 輸出用以呼叫 <code>React.createElement</code> 的函式，亦不會有任何與 React 和其他框架有關的程式碼。這部分取決於你的建置鏈要如何轉譯這份 JSX。</p>
<p>就像 JSX 和 HTML 那樣，你可以使用 <code>&lt;</code> 與 <code>&gt;</code> 符號。你也能在 <code>{</code> 和 <code>}</code> 標籤中使用 CoffeeScript。為了避免編譯器錯誤，當 <code>&lt;</code> 和 <code>&gt;</code> 是用作「小於」或「大於」符號時，你應該透過空白來避免它們被誤認為 XML 標籤。所以你該使用 <code>i &lt; len</code> 而不是 <code>i&lt;len</code>。雖然說編譯器會盡可能地猜測你真正的意圖，但在使用「小於」和「大於」的符號時加上空白還是會令人更安心些。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="jsx">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="jsx-coffee">renderStarRating = ({ rating, maxStars }) ->
  <aside title={"Rating: #{rating} of #{maxStars} stars"}>
    {for wholeStar in [0...Math.floor(rating)]
      <Star className="wholeStar" key={wholeStar} />}
    {if rating % 1 isnt 0
      <Star className="halfStar" />}
    {for emptyStar in [Math.ceil(rating)...maxStars]
      <Star className="emptyStar" key={emptyStar} />}
  </aside>
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">renderStarRating</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">({</span> <span class="cm-variable">rating</span><span class="cm-punctuation">,</span> <span class="cm-variable">maxStars</span> <span class="cm-punctuation">})</span> <span class="cm-operator">-></span>
  <span class="cm-operator">&lt;</span><span class="cm-variable">aside</span> <span class="cm-variable">title</span><span class="cm-punctuation">={</span><span class="cm-string">"Rating: #{rating} of #{maxStars} stars"</span><span class="cm-punctuation">}</span><span class="cm-operator">></span>
<span class="cm-indent">    </span><span class="cm-punctuation">{</span><span class="cm-keyword">for</span> <span class="cm-variable">wholeStar</span> <span class="cm-operator">in</span> <span class="cm-punctuation">[</span><span class="cm-number">0</span><span class="cm-punctuation">...</span><span class="cm-variable">Math</span><span class="cm-punctuation">.</span><span class="cm-property">floor</span><span class="cm-punctuation">(</span><span class="cm-variable">rating</span><span class="cm-punctuation">)]</span>
<span class="cm-dedent">      </span><span class="cm-operator">&lt;</span><span class="cm-variable">Star</span> <span class="cm-variable">className</span><span class="cm-punctuation">=</span><span class="cm-string">"wholeStar"</span> <span class="cm-variable">key</span><span class="cm-punctuation">={</span><span class="cm-variable">wholeStar</span><span class="cm-punctuation">}</span> <span class="cm-operator">/></span><span class="cm-punctuation">}</span>
    <span class="cm-punctuation">{</span><span class="cm-keyword">if</span> <span class="cm-variable">rating</span> <span class="cm-operator">%</span> <span class="cm-number">1</span> <span class="cm-operator">isnt</span> <span class="cm-number">0</span>
<span class="cm-dedent">      </span><span class="cm-operator">&lt;</span><span class="cm-variable">Star</span> <span class="cm-variable">className</span><span class="cm-punctuation">=</span><span class="cm-string">"halfStar"</span> <span class="cm-operator">/></span><span class="cm-punctuation">}</span>
    <span class="cm-punctuation">{</span><span class="cm-keyword">for</span> <span class="cm-variable">emptyStar</span> <span class="cm-operator">in</span> <span class="cm-punctuation">[</span><span class="cm-variable">Math</span><span class="cm-punctuation">.</span><span class="cm-property">ceil</span><span class="cm-punctuation">(</span><span class="cm-variable">rating</span><span class="cm-punctuation">)...</span><span class="cm-variable">maxStars</span><span class="cm-punctuation">]</span>
<span class="cm-dedent">      </span><span class="cm-operator">&lt;</span><span class="cm-variable">Star</span> <span class="cm-variable">className</span><span class="cm-punctuation">=</span><span class="cm-string">"emptyStar"</span> <span class="cm-variable">key</span><span class="cm-punctuation">={</span><span class="cm-variable">emptyStar</span><span class="cm-punctuation">}</span> <span class="cm-operator">/></span><span class="cm-punctuation">}</span>
<span class="cm-dedent">  </span><span class="cm-operator">&lt;/</span><span class="cm-variable">aside</span><span class="cm-operator">></span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="jsx-js">var renderStarRating;

renderStarRating = function({rating, maxStars}) {
  var emptyStar, wholeStar;
  return <aside title={`Rating: ${rating} of ${maxStars} stars`}>
    {(function() {
    var i, ref, results;
    results = [];
    for (wholeStar = i = 0, ref = Math.floor(rating); (0 <= ref ? i < ref : i > ref); wholeStar = 0 <= ref ? ++i : --i) {
      results.push(<Star className="wholeStar" key={wholeStar} />);
    }
    return results;
  })()}
    {(rating % 1 !== 0 ? <Star className="halfStar" /> : void 0)}
    {(function() {
    var i, ref, ref1, results;
    results = [];
    for (emptyStar = i = ref = Math.ceil(rating), ref1 = maxStars; (ref <= ref1 ? i < ref1 : i > ref1); emptyStar = ref <= ref1 ? ++i : --i) {
      results.push(<Star className="emptyStar" key={emptyStar} />);
    }
    return results;
  })()}
  </aside>;
};
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">renderStarRating</span>;

<span class="cm-variable">renderStarRating</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>({<span class="cm-def">rating</span>, <span class="cm-def">maxStars</span>}) {
  <span class="cm-keyword">var</span> <span class="cm-def">emptyStar</span>, <span class="cm-def">wholeStar</span>;
  <span class="cm-keyword">return</span> <span class="cm-operator">&lt;</span><span class="cm-variable">aside</span> <span class="cm-variable">title</span><span class="cm-operator">=</span>{<span class="cm-string-2">`Rating: ${</span><span class="cm-variable-2">rating</span>} <span class="cm-variable">of</span> <span class="cm-variable">$</span>{<span class="cm-variable-2">maxStars</span>} <span class="cm-variable">stars</span><span class="cm-string-2">`}></span>
    <span class="cm-string-2">{(function() {</span>
    <span class="cm-string-2">var i, ref, results;</span>
    <span class="cm-string-2">results = [];</span>
    <span class="cm-string-2">for (wholeStar = i = 0, ref = Math.floor(rating); (0 &lt;= ref ? i &lt; ref : i > ref); wholeStar = 0 &lt;= ref ? ++i : --i) {</span>
      <span class="cm-string-2">results.push(&lt;Star className="wholeStar" key={wholeStar} />);</span>
    <span class="cm-string-2">}</span>
    <span class="cm-string-2">return results;</span>
  <span class="cm-string-2">})()}</span>
    <span class="cm-string-2">{(rating % 1 !== 0 ? &lt;Star className="halfStar" /> : void 0)}</span>
    <span class="cm-string-2">{(function() {</span>
    <span class="cm-string-2">var i, ref, ref1, results;</span>
    <span class="cm-string-2">results = [];</span>
    <span class="cm-string-2">for (emptyStar = i = ref = Math.ceil(rating), ref1 = maxStars; (ref &lt;= ref1 ? i &lt; ref1 : i > ref1); emptyStar = ref &lt;= ref1 ? ++i : --i) {</span>
      <span class="cm-string-2">results.push(&lt;Star className="emptyStar" key={emptyStar} />);</span>
    <span class="cm-string-2">}</span>
    <span class="cm-string-2">return results;</span>
  <span class="cm-string-2">})()}</span>
  <span class="cm-string-2">&lt;/aside>;</span>
<span class="cm-string-2">};</span>
</pre>
    </div>
  </div>
  
</aside>
<p>舊的擴充套件或 CoffeeScript 的衍生分歧使用 JSX 語法時通常是 <code>.csjx</code> 檔案，但這已經不需要了；一般的 <code>.coffee</code> 就可以正常運作。</p>

        </section>
      </section>
      <section id="type-annotations">
        <h2>型態註解</h2>
<p>你能夠在 CoffeeScript 中以 <a href="https://flow.org/">Flow</a> 的<a href="https://flow.org/en/docs/types/comments/">註釋型態標記</a>來撰寫型態檢查：</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="type_annotations">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="type_annotations-coffee"># @flow

###::
type Obj = {
  num: number,
};
###

fn = (str ###: string ###, obj ###: Obj ###) ###: string ### ->
  str + obj.num
</textarea>
      <pre class="placeholder-code"><span class="cm-comment"># @flow</span>

<span class="cm-comment">###::</span>
<span class="cm-comment">type Obj = {</span>
<span class="cm-comment">  num: number,</span>
<span class="cm-comment">};</span>
<span class="cm-comment">###</span>

<span class="cm-variable">fn</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">(</span><span class="cm-variable">str</span> <span class="cm-comment">###: string ###</span><span class="cm-punctuation">,</span> <span class="cm-variable">obj</span> <span class="cm-comment">###: Obj ###</span><span class="cm-punctuation">)</span> <span class="cm-comment">###: string ###</span> <span class="cm-operator">-></span>
  <span class="cm-variable">str</span> <span class="cm-operator">+</span> <span class="cm-variable">obj</span><span class="cm-punctuation">.</span><span class="cm-property">num</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="type_annotations-js">// @flow
/*::
type Obj = {
  num: number,
};
*/
var fn;

fn = function(str/*: string */, obj/*: Obj */)/*: string */ {
  return str + obj.num;
};
</textarea>
      <pre class="placeholder-code"><span class="cm-comment">// @flow</span>
<span class="cm-comment">/*::</span>
<span class="cm-comment">type Obj = {</span>
<span class="cm-comment">  num: number,</span>
<span class="cm-comment">};</span>
<span class="cm-comment">*/</span>
<span class="cm-keyword">var</span> <span class="cm-def">fn</span>;

<span class="cm-variable">fn</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>(<span class="cm-def">str</span><span class="cm-comment">/*: string */</span>, <span class="cm-def">obj</span><span class="cm-comment">/*: Obj */</span>)<span class="cm-comment">/*: string */</span> {
  <span class="cm-keyword">return</span> <span class="cm-variable-2">str</span> <span class="cm-operator">+</span> <span class="cm-variable-2">obj</span>.<span class="cm-property">num</span>;
};
</pre>
    </div>
  </div>
  
</aside>
<p>CoffeeScript 本身並不會對此有所檢查；在上述所看到的 JavaScript 需要額外透過 Flow 來進行型態驗證。雖然大多數的人都會透過<a href="#es2015plus-output">建置工具</a>來執行此功能，但以 <a href="#cli">CoffeeScript</a> 和 <a href="https://flow.org/en/docs/usage/">Flow</a> 的終端機工具來執行相關的檢查也許是個更簡單的方法。假設你<a href="https://flow.org/en/docs/install/">已經安裝 Flow</a> 還有<a href="#installation">最新的 CoffeeScript</a>，那麼你就可以直接在專案的資料夾執行：</p>
<blockquote class="uneditable-code-block"><pre><code class="language-bash">coffee --bare --no-header --compile app.coffee &amp;&amp; npm run flow
</code></pre>
</blockquote><p><code>--bare</code> 還有 <code>--no-header</code> 是很重要的參數！因為 Flow 要求檔案的第一行必須要是 <code>// @flow</code> 註解。在建置工具鏈中讓 CoffeeScript 的編譯結果透過記憶體直接傳遞給 Flow 可以有比起這段指令有更快的效能；一個標準的建置工具鏈要能夠監聽 CoffeeScript 的檔案，並且在你儲存檔案時，自動重新編譯然後透過 Flow 來進行型態檢查。</p>
<p>對於 CoffeeScript 和型態檢查的整合如果你有其他的方式，請<a href="https://github.com/jashkenas/coffeescript/issues/new">建立新的 Issue</a> 來讓我們知道。</p>

      </section>
      <section id="literate">
        <h2>文學式 CoffeeScript</h2>
<p>除了以普通的方式將 CoffeeScript 當作程式語言看待，CoffeeScript 還能夠用另一種很優雅的「文學」模式進行撰寫。如果你將檔案副檔名命名為 <code>.litcoffee</code> 的話，你就能夠撰寫出基於 Markdown 格式的文件－而這文件中的 CoffeeScript 程式碼同時也能夠被執行。編譯器會試圖將縮排區塊（Markdown 的程式碼區塊格式）當作可供執行的程式碼，並且忽略其他文字部分。程式碼區塊與正常的段落文字需要相隔至少一行。</p>
<p>讓你用不同角度看看這有多炫砲：以<a href="https://gist.github.com/jashkenas/3fc3c1a8b1009c00d9df">文件的方式觀看</a>、<a href="https://raw.githubusercontent.com/jashkenas/coffeescript/master/src/scope.litcoffee">原生內容</a>、而且還能<a href="http://cl.ly/LxEu">在編輯器中正常渲染定義顏色</a>。</p>
<p>這裡有幾點該注意：</p>
<ul>
<li>程式碼區塊需要注意其縮排。當編譯器解析你的文學式 CoffeeScript 檔案時，首先會刪除所有非程式碼區塊的文字，然後將剩下的部分當作一般的 CoffeeScript 檔案處理。所以這就表示你需要好好地注意程式碼區塊的縮排（無論是 Tab 或空白）。</li>
<li>清單項目和引用區塊內的程式碼不會被當作可供執行的程式碼內容。因為清單和引用區塊有自己的縮排格式，這會影響程式碼原本的縮排而導致無法執行或是誤判。</li>
<li>清單項目只能有一個段落。因為第二行段落通常會換行而其縮排會被當作是程式碼區塊而難以區分。</li>
</ul>

      </section>
      <section id="source-maps">
        <h2>原始碼映射表</h2>
<p>CoffeeScript 有內建產生原始碼映射表的功能，這能讓你的 JavaScript 引擎得知其執行的語句與原本 CoffeeScript 中的哪行程式碼相符。通常瀏覽器都會自動比對原始碼映射表。使用編譯器時追加 <code>--map</code> 或 <code>-m</code> 選項就能夠在編譯 JavaScript 結果時一同輸出相對應的原始碼映射表。</p>
<p>有關原始碼映射表的運作原理、如何在瀏覽器中使用，請閱讀 <a href="https://www.html5rocks.com/en/tutorials/developertools/sourcemaps/">HTML5 的教學</a>。</p>

      </section>
      <section id="cake">
        <h2>Cake 與 Cakefiles</h2>
<p>CoffeeScript 內建了一個和 <a href="http://www.gnu.org/software/make/">Make</a> 與 <a href="http://rake.rubyforge.org/">Rake</a> 非常相似的簡易建置系統。我們稱其為 Cake，這能用來建置並且測試 CoffeeScript 相關的程式。工作程序會被定義在一個名為 <code>Cakefile</code> 的檔案中，並且能在相同目錄下以 <code>cake [工作程序名稱]</code> 來執行。若要輸出一份可用的工作程序與選項列表，只要打上 <code>cake</code> 指令就可以了。</p>
<p>工作程序是以 CoffeeScript 來撰寫的，所以你能在 Cakefile 中隨心所欲地用上 CoffeeScript 程式碼。工作程序以一個名稱、說明、與回呼函式組成。而工作程序也能夠從指令列接收額外的選項值，並且在回呼函式中以 <code>options</code> 物件來取得其內容。下面範例重現了如何以 Node.js API 來建立一個 CoffeeScript 解析器：</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="cake_tasks">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="cake_tasks-coffee">fs = require 'fs'

option '-o', '--output [DIR]', 'directory for compiled code'

task 'build:parser', 'rebuild the Jison parser', (options) ->
  require 'jison'
  code = require('./lib/grammar').parser.generate()
  dir  = options.output or 'lib'
  fs.writeFile "#{dir}/parser.js", code
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">fs</span> <span class="cm-punctuation">=</span> <span class="cm-variable">require</span> <span class="cm-string">'fs'</span>

<span class="cm-variable">option</span> <span class="cm-string">'-o'</span><span class="cm-punctuation">,</span> <span class="cm-string">'--output [DIR]'</span><span class="cm-punctuation">,</span> <span class="cm-string">'directory for compiled code'</span>

<span class="cm-variable">task</span> <span class="cm-string">'build:parser'</span><span class="cm-punctuation">,</span> <span class="cm-string">'rebuild the Jison parser'</span><span class="cm-punctuation">,</span> <span class="cm-punctuation">(</span><span class="cm-variable">options</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span>
  <span class="cm-variable">require</span> <span class="cm-string">'jison'</span>
  <span class="cm-variable">code</span> <span class="cm-punctuation">=</span> <span class="cm-variable">require</span><span class="cm-punctuation">(</span><span class="cm-string">'./lib/grammar'</span><span class="cm-punctuation">).</span><span class="cm-property">parser</span><span class="cm-punctuation">.</span><span class="cm-property">generate</span><span class="cm-punctuation">()</span>
  <span class="cm-variable">dir</span>  <span class="cm-punctuation">=</span> <span class="cm-variable">options</span><span class="cm-punctuation">.</span><span class="cm-property">output</span> <span class="cm-operator">or</span> <span class="cm-string">'lib'</span>
  <span class="cm-variable">fs</span><span class="cm-punctuation">.</span><span class="cm-property">writeFile</span> <span class="cm-string">"#{dir}/parser.js"</span><span class="cm-punctuation">,</span> <span class="cm-variable">code</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="cake_tasks-js">var fs;

fs = require('fs');

option('-o', '--output [DIR]', 'directory for compiled code');

task('build:parser', 'rebuild the Jison parser', function(options) {
  var code, dir;
  require('jison');
  code = require('./lib/grammar').parser.generate();
  dir = options.output || 'lib';
  return fs.writeFile(`${dir}/parser.js`, code);
});
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">fs</span>;

<span class="cm-variable">fs</span> <span class="cm-operator">=</span> <span class="cm-variable">require</span>(<span class="cm-string">'fs'</span>);

<span class="cm-variable">option</span>(<span class="cm-string">'-o'</span>, <span class="cm-string">'--output [DIR]'</span>, <span class="cm-string">'directory for compiled code'</span>);

<span class="cm-variable">task</span>(<span class="cm-string">'build:parser'</span>, <span class="cm-string">'rebuild the Jison parser'</span>, <span class="cm-keyword">function</span>(<span class="cm-def">options</span>) {
  <span class="cm-keyword">var</span> <span class="cm-def">code</span>, <span class="cm-def">dir</span>;
  <span class="cm-variable">require</span>(<span class="cm-string">'jison'</span>);
  <span class="cm-variable-2">code</span> <span class="cm-operator">=</span> <span class="cm-variable">require</span>(<span class="cm-string">'./lib/grammar'</span>).<span class="cm-property">parser</span>.<span class="cm-property">generate</span>();
  <span class="cm-variable-2">dir</span> <span class="cm-operator">=</span> <span class="cm-variable-2">options</span>.<span class="cm-property">output</span> <span class="cm-operator">||</span> <span class="cm-string">'lib'</span>;
  <span class="cm-keyword">return</span> <span class="cm-variable">fs</span>.<span class="cm-property">writeFile</span>(<span class="cm-string-2">`${</span><span class="cm-variable-2">dir</span><span class="cm-string-2">}/parser.js`</span>, <span class="cm-variable-2">code</span>);
});
</pre>
    </div>
  </div>
  
</aside>
<p>如果你希望在執行某個工作程序之前先呼叫另一個程序－例如在 <code>build</code> 之前先 <code>test</code> 的話，就能夠用上 <code>invoke</code> 函式：<code>invoke 'build'</code>。Cake 工作程序是以輕量化的方式將 CoffeeScript 程式暴露到指令列使用，所以<a href="/v2/annotated-source/cake.html">別期望能有太多的功能</a>。如果你需要一些相依性套件或非同步回呼函式，你最好還是乖乖的寫成程式而不是 Cake 工作程序。</p>

      </section>
      <section id="scripts">
        <h2><code>&quot;text/coffeescript&quot;</code> 腳本標籤</h2>
<p>瀏覽器能夠透過網頁中的 <code>&lt;script type=&quot;text/coffeescript&quot;&gt;</code> 腳本標籤來執行 CoffeeScript 程式碼，雖然是不建議將這種方式用於正式場合啦。不過真要這樣做的話，你能夠在這裡<a href="/v2/browser-compiler/coffeescript.js">下載最新版本、51 KB 檔案大小（被壓縮）</a> 的 <code>docs/v2/browser-compiler/coffeescript.js</code>。在頁面上引用這個檔案，就能夠執行 CoffeeScript 腳本標籤的程式碼。</p>
<p>不過有個注意事項：你的腳本會被包覆在一個有效範圍保護函式裡，如果你想要暴露全域變數或函式的話，記得將其賦予到 <code>window</code> 物件作為屬性。</p>

      </section>
      <section id="resources">
        <h2>資源</h2>
<ul>
<li><a href="https://github.com/jashkenas/coffeescript/">CoffeeScript 的 GitHub</a></li>
<li><a href="https://github.com/jashkenas/coffeescript/issues">CoffeeScript 錯誤回報</a><br>
一個讓你能回報錯誤、提供新功能、想法的地方。</li>
<li><a href="https://groups.google.com/forum/#!forum/coffeescript">CoffeeScript Google 群組</a><br>
如果你想問些問題，這個群組通常是個好場所。</li>
<li><a href="https://github.com/jashkenas/coffeescript/wiki">CoffeeScript 的維基資料</a><br>
如果你學到了不少 CoffeeScript 的精髓或新奇使用方式、功能－你就可以將其經驗分享到維基。維基資料裡也有<a href="https://github.com/jashkenas/coffeescript/wiki/Text-editor-plugins">文字編輯器擴充套件</a>、<a href="https://github.com/jashkenas/coffeescript/wiki/Web-framework-plugins">網站框架套件</a>、<a href="https://github.com/jashkenas/coffeescript/wiki/Build-tools">CoffeeScript 建置工具</a>的相關清單。</li>
<li><a href="https://github.com/jashkenas/coffeescript/wiki/FAQ">問與答</a><br>
也許你正準備要問的 CoffeeScript 問題已經在這裡解答過了。先從問與答找看看吧。</li>
<li><a href="http://js2.coffee/">JS2Coffee</a><br>
這是個非常不錯的 JavaScript 轉 CoffeeScript 輔助網站。雖然不是很完美（例如出來的結果還是有點機器化）－不過當你要開始打造一些小程式的時候，這也許能派上用場。</li>
<li><a href="https://github.com/jashkenas/coffeescript/tree/master/documentation/site">高畫質 Logo</a><br>
CoffeeScript 的向量圖形 Logo，讓你能用於簡報上。</li>
</ul>

        <section id="books">
          <h2>書籍</h2>
<p>這裡有些不錯的書籍能夠協助你在撰寫 CoffeeScript 時更加地得心應手，其中不少是能夠免費線上閱讀的。</p>
<ul>
<li><a href="http://arcturo.github.io/library/coffeescript/">The Little Book on CoffeeScript</a> 是以五個章節所組成的 CoffeeScript 大略講解書籍，由 <a href="http://alexmaccaw.co.uk/">Alex MacCaw</a> 以清晰明確的方式所撰寫而成。</li>
<li><a href="http://autotelicum.github.io/Smooth-CoffeeScript/">Smooth CoffeeScript</a> 是被 <a href="http://eloquentjavascript.net/">Eloquent JavaScript</a> 所啟發的書，不過是以 CoffeeScript 重新編寫的。其內容提到了函數式、物件導向的程式撰寫風格。由 <a href="https://github.com/autotelicum">E. Hoigaard</a> 編寫。</li>
<li><a href="http://pragprog.com/book/tbcoffee/coffeescript">CoffeeScript: Accelerated JavaScript Development</a> 會由 <a href="http://trevorburnham.com/">Trevor Burnham</a> 帶領你進入此語言世界。在本書的最後你將能打造出一個多人的文字遊戲，主要以 Node.js 與 CoffeeScript 作成。</li>
<li><a href="https://www.packtpub.com/web-development/coffeescript-programming-jquery-rails-and-nodejs">CoffeeScript Programming with jQuery, Rails, and Node.js</a> 是本由 Michael Erasmus 以他自己的角度看待 CoffeeScript 並以此打造能夠真實應用於瀏覽器（jQuery）和伺服端（Rails、Node）的相關程式與經驗。</li>
<li><a href="https://leanpub.com/coffeescript-ristretto/read">CoffeeScript Ristretto</a> 能夠帶領你體會到 CoffeeScript 的簡潔之美與閉包、函式、物件與類別還有組合運算子和修飾子，由 <a href="http://braythwayt.com/">Reg Braithwaite</a> 書寫。</li>
<li><a href="https://efendibooks.com/minibooks/testing-with-coffeescript">Testing with CoffeeScript</a> 是本能夠協助你建立可供 Jasmine 測試的 CoffeeScript 程式碼免費書籍。</li>
<li><a href="https://www.packtpub.com/web-development/coffeescript-application-development">CoffeeScript Application Development</a> 來自 Packt 之手，主要能夠帶領你如何以 CoffeeScript 打造網頁應用程式。然後這裡還有本 <a href="https://www.packtpub.com/web-development/coffeescript-application-development-cookbook">CoffeeScript Application Development Coookbook</a>，裡面超過 90 種「食譜」可供參閱。</li>
<li><a href="https://www.manning.com/books/coffeescript-in-action">CoffeeScript in Action</a> 由 Manning Publications 撰寫，主要敘述 CoffeeScript 的語法還有一些用於應用程式開發的技術手法。</li>
<li><a href="https://www.dpunkt.de/buecher/4021/coffeescript.html">CoffeeScript: Die Alternative zu JavaScript</a> 的撰書者是 dpunkt.verlag，而是 CoffeeScript 的第一本德語書籍。</li>
</ul>

        </section>
        <section id="screencasts">
          <h2>影片教學</h2>
<ul>
<li><a href="http://coffeescript.codeschool.com/">A Sip of CoffeeScript</a> 由 <a href="https://www.codeschool.com">Code School Course</a> 建立並且匯集了六部有關 CoffeeScript 的影片。第一部影片是免費觀賞的。</li>
<li><a href="https://www.pluralsight.com/courses/meet-coffeescript">Meet CoffeeScript</a> 是個有 75 分鐘長的螢幕錄製影片，由 PeepCode 錄製（現在改名為：<a href="https://www.pluralsight.com/">PluralSight</a>）。這能夠完美地將 JavaScript 的觀念帶入到 CoffeeScript 程式碼中。</li>
<li>如果你不想花上太多時間，RailsCasts 的 <a href="http://railscasts.com/episodes/267-coffeescript-basics">CoffeeScript Basics</a> 也許能夠幫你一把，這讓你在 11 分鐘內可以搞懂 CoffeeScript 不少重要的東西。</li>
</ul>

        </section>
        <section id="examples">
          <h2>範例</h2>
<p>在 GitHub 上有<a href="https://github.com/trending?l=coffeescript&amp;since=monthly">不少的開放原始碼 CoffeeScript 範例</a>，這裡找出幾個還不錯的讓你看看：</p>
<ul>
<li><strong>GitHub</strong> 的 <a href="https://hubot.github.com/">Hubot</a> 是位很友善的 IRC 機器人，他能做的事情處於很有用與很無用之間。</li>
<li><strong>sstephenson</strong> 的 <a href="http://pow.cx/">Pow</a> 是不需要設置的 Rack 伺服器，原始碼亦有完美的註釋。</li>
<li><strong>technoweenie</strong> 的 <a href="https://github.com/technoweenie/coffee-resque">Coffee-Resque</a> 是個 <a href="https://github.com/defunkt/resque">Resque</a> 專案的 Node.js 重寫版本。</li>
<li><strong>stephank</strong> 的 <a href="https://github.com/stephank/orona">Orona</a> 是 Bolo 坦克遊戲，不過此版本重寫給現代瀏覽器執行。</li>
<li><strong>GitHub</strong> 的 <a href="https://atom.io/">Atom</a> 是個多功能的文字編輯器，其核心由多項網頁技術組成。</li>
<li><strong>Basecamp</strong> 的 <a href="https://trix-editor.org/">Trix</a> 是個能夠撰寫網頁應用程式的豐富文字編輯器。</li>
</ul>

        </section>
        <section id="chat">
          <h2>網路聊天（IRC）</h2>
<p>以<a href="http://webchat.freenode.net/?channels=coffeescript">網頁瀏覽器拜訪這裡</a>你就能透過 <code>irc.freenode.net</code> 直接加入 CoffeeScript 的 IRC 聊天室 <code>#coffeescript</code> 並取得相關的幫助與建議。</p>

        </section>
        <section id="annotated-source">
          <h2>已註解原始碼</h2>
<p>你能夠從<a href="annotated-source/">這裡</a>以符合人體工學的方式一覽 CoffeeScript 2.3.1 的原始碼。你也能從這裡直接查看指定的原始碼檔案：</p>
<ul>
<li><a href="annotated-source/grammar.html">文法規則 — src/grammar</a></li>
<li><a href="annotated-source/lexer.html">詞語解析 — src/lexer</a></li>
<li><a href="annotated-source/rewriter.html">覆寫器 — src/rewriter</a></li>
<li><a href="annotated-source/nodes.html">語法樹 — src/nodes</a></li>
<li><a href="annotated-source/scope.html">解析作用域 — src/scope</a></li>
<li><a href="annotated-source/helpers.html">輔助 &amp; 工具函式 — src/helpers</a></li>
<li><a href="annotated-source/coffeescript.html">CoffeeScript 模組 — src/coffeescript</a></li>
<li><a href="annotated-source/cake.html">Cake &amp; Cakefiles — src/cake</a></li>
<li><a href="annotated-source/command.html">“coffee“ 終端機工具 — src/command</a></li>
<li><a href="annotated-source/optparse.html">選項解析 — src/optparse</a></li>
<li><a href="annotated-source/repl.html">回饋式 REPL — src/repl</a></li>
<li><a href="annotated-source/sourcemap.html">原始碼映照 — src/sourcemap</a></li>
</ul>

        </section>
        <section id="contributing">
          <h2>貢獻</h2>
<p>我們最喜歡貢獻了！隨你所意的分歧<a href="https://github.com/jashkenas/coffeescript">這個原始碼倉庫</a>並且建立合併請求吧。</p>
<p>不過<a href="#unsupported">有些 ECMAScript 功能是刻意不支援的</a>。請確定你想發送的功能在事前是不是<a href="https://github.com/jashkenas/coffeescript/issues">已經被討論過</a>了。我們遵循一項規則：不要支援任何沒有被正式化的 ECMAScript 語法（在審核階段 4 之前）。</p>
<p>有關更多如何追加功能至 CoffeeScript 的資訊，請查看<a href="https://github.com/jashkenas/coffeescript/wiki/%5BHowto%5D-Hacking-on-the-CoffeeScript-Compiler">維基資料</a>，尤其是關於<a href="https://github.com/jashkenas/coffeescript/wiki/%5BHowTo%5D-How-parsing-works">解析器是如何運作的</a>那篇文章。</p>
<p>這裡有幾件事情能夠讓你的合併請求提高被接受的機率：</p>
<ul>
<li>建立測試！任何合併請求都應該要有基本的測試來確認這項變更沒有破壞主程式、或者未來的異動不會破壞你所寫的程式。</li>
<li>遵循其他人的 CoffeeScript 撰寫風範。</li>
<li>確定 ECMAScript 語法是穩定且正式的（處於審核階段 4），而且未來不會有任何異動。</li>
<li>追加的功能是基於大眾，而不是只為特定用法或框架所設計的。</li>
</ul>
<p>當然你可能會做出上述清單以外的事情。不過那當然不止你一位，其實野外也有不少的<a href="https://github.com/jashkenas/coffeescript/wiki/In-The-Wild">探險家</a>。</p>

        </section>
      </section>
      <section id="unsupported">
        <h2>不支援的 ECMAScript 功能</h2>
<p>有些 ECMAScript 的功能是 CoffeeScript 刻意不支援的。</p>

        <section id="unsupported-let-const">
          <h3><code>let</code> 與 <code>const</code>：最小區塊有效範圍與重新賦值保護</h3>
<p>當初設計 CoffeeScript 的時候，<code>var</code> 用法是很明顯地<a href="https://github.com/jashkenas/coffeescript/issues/238#issuecomment-153502">被忽略的</a>。這讓開發者不需要搞得像整天在做家事一樣，煩惱變數該在何時 <em>定義</em>（<code>var foo</code>）。不過也因為 CoffeeScript 會自動產生 <code>var</code> 陳述式來幫你照料變數的定義，也就不會不小心定義到一個全域變數。</p>
<p><code>let</code> 與 <code>const</code> 的出現讓你能在 JavaScript 中以 <em>區塊</em> 作為有效範圍來定義變數的生命，例如說其定義的範圍只會在 <code>if</code> 陳述式裡或 <code>for</code> 迴圈區塊中，而 <code>var</code> 的有效範圍通常會大到一整個函式。起初 CoffeeScript 2 社群也不斷地在討論這個問題，例如：是否有必要追加更多的有效範圍定義方式。最終，我們決定繼續簡化這項功能，讓開發者更著重於程式上。所以 CoffeeScript 仍然只有一種變數有效範圍。</p>
<p>要注意的是 <code>const</code> 雖然能夠預防你重新賦值；但他卻沒有預防你更改變數的內容，這和其他程式語言倒是不太一樣：</p>
<blockquote class="uneditable-code-block"><pre><code class="language-js"><span class="keyword">const</span> obj = {<span class="attr">foo</span>: <span class="string">'bar'</span>};
obj.foo = <span class="string">'baz'</span>; <span class="comment">// 你竟然可以這樣做！</span>
obj = {}; <span class="comment">// 會拋出錯誤</span>
</code></pre>
</blockquote>
        </section>
        <section id="unsupported-named-functions">
          <h3>命名函式與函式定義</h3>
<p>不少新人常常會很好奇為什麼 CoffeeScript 產生的 JavaScript 函式都是 <code>foo = function() {}</code> 而不是 <code>function foo() {}</code>。前者其實稱作<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/function">函式表達式</a>，而後者則是<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">函式定義</a>。就和上面所說的一樣：在 CoffeeScript 裡的<a href="#expressions">所有東西都是表達式</a>，所以我們自然而然地就採用了表達式做為定義方法。而只支援其中一種方式也能夠避免這<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function#Function_declaration_hoisting">兩者同時存在所可能產生的錯誤</a>。</p>
<p>據理來說，<code>foo = function() {}</code> 是建立一個匿名函式然後將其賦予到名為 <code>foo</code> 的變數。較早期的 CoffeeScript 採用的是賦予命名函式 <code>foo = function foo() {}</code>，不過因為在 Internet Explorer 上有些相容性問題所以被拋棄了。在那之後不少開發者抱怨這很難在開發的時候追蹤堆疊樹；不過現在的 JavaScript 執行時態（Runtime）已經夠聰明懂的如何<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name">判別匿名函式的指向位址</a>。基於這個問題被解決了，我們決定就這樣原封不動地保持現有行為。</p>

        </section>
        <section id="unsupported-get-set">
          <h3><code>get</code> 與 <code>set</code> 關鍵字縮寫語法</h3>
<p>用於類別和函式的 <code>get</code> 與 <code>set</code> 關鍵字目前尚未在 CoffeeScript 中實作。</p>
<p>這主要是為了避免和現有的其他寫法發生衝突，因為 CoffeeScript 裡若要加上類似的前輟關鍵字則會被當成函式呼叫（例如：<code>get(function foo() {})</code>）；不過目前有<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty">另一種寫法</a>，雖然看起來稍微聒噪了些但還是夠用的：</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="get_set">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="get_set-coffee">screen =
  width: 1200
  ratio: 16/9

Object.defineProperty screen, 'height',
  get: ->
    this.width / this.ratio
  set: (val) ->
    this.width = val * this.ratio
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">screen</span> <span class="cm-punctuation">=</span>
<span class="cm-indent">  </span><span class="cm-variable">width</span><span class="cm-punctuation">:</span> <span class="cm-number">1200</span>
  <span class="cm-variable">ratio</span><span class="cm-punctuation">:</span> <span class="cm-number">16</span><span class="cm-operator">/</span><span class="cm-number">9</span>

<span class="cm-variable">Object</span><span class="cm-punctuation">.</span><span class="cm-property">defineProperty</span> <span class="cm-variable">screen</span><span class="cm-punctuation">,</span> <span class="cm-string">'height'</span><span class="cm-punctuation">,</span>
<span class="cm-indent">  </span><span class="cm-variable">get</span><span class="cm-punctuation">:</span> <span class="cm-operator">-></span>
    <span class="cm-keyword">this</span><span class="cm-punctuation">.</span><span class="cm-property">width</span> <span class="cm-operator">/</span> <span class="cm-keyword">this</span><span class="cm-punctuation">.</span><span class="cm-property">ratio</span>
<span class="cm-dedent">  </span><span class="cm-variable">set</span><span class="cm-punctuation">:</span> <span class="cm-punctuation">(</span><span class="cm-variable">val</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span>
    <span class="cm-keyword">this</span><span class="cm-punctuation">.</span><span class="cm-property">width</span> <span class="cm-punctuation">=</span> <span class="cm-variable">val</span> <span class="cm-operator">*</span> <span class="cm-keyword">this</span><span class="cm-punctuation">.</span><span class="cm-property">ratio</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="get_set-js">var screen;

screen = {
  width: 1200,
  ratio: 16 / 9
};

Object.defineProperty(screen, 'height', {
  get: function() {
    return this.width / this.ratio;
  },
  set: function(val) {
    return this.width = val * this.ratio;
  }
});
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">screen</span>;

<span class="cm-variable">screen</span> <span class="cm-operator">=</span> {
  <span class="cm-property">width</span>: <span class="cm-number">1200</span>,
  <span class="cm-property">ratio</span>: <span class="cm-number">16</span> <span class="cm-operator">/</span> <span class="cm-number">9</span>
};

<span class="cm-variable">Object</span>.<span class="cm-property">defineProperty</span>(<span class="cm-variable">screen</span>, <span class="cm-string">'height'</span>, {
  <span class="cm-property">get</span>: <span class="cm-keyword">function</span>() {
    <span class="cm-keyword">return</span> <span class="cm-keyword">this</span>.<span class="cm-property">width</span> <span class="cm-operator">/</span> <span class="cm-keyword">this</span>.<span class="cm-property">ratio</span>;
  },
  <span class="cm-property">set</span>: <span class="cm-keyword">function</span>(<span class="cm-def">val</span>) {
    <span class="cm-keyword">return</span> <span class="cm-keyword">this</span>.<span class="cm-property">width</span> <span class="cm-operator">=</span> <span class="cm-variable-2">val</span> <span class="cm-operator">*</span> <span class="cm-keyword">this</span>.<span class="cm-property">ratio</span>;
  }
});
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="get_set" data-run="screen.height"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>screen.height</button>
    </div>
  </div>
  
</aside>

        </section>
      </section>
      <section id="breaking-changes">
        <h2>從 CoffeeScript 1.x 升級到 2 時的不相容差異</h2>
<p>CoffeeScript 2 瞄準的是支援更多的 ES2015+ 語法並減少可能會破壞 CoffeeScript 1.x 版本程式碼的異動。可惜有些破壞還是無法避免的。</p>

        <section id="breaking-changes-fat-arrow">
          <h3>有界（胖箭頭）函式</h3>
<p>在 CoffeeScript 1.x 版本中的 <code>=&gt;</code> 符號會被轉換成標準的 <code>function</code>，但是其中的 <code>this</code>、<code>@</code> 會被覆寫成父有效範圍的 <code>this</code> 或是以 <code>.bind</code> 函式來綁定相關界線（所以也叫「有界函式」）。但在 CoffeeScript 2 有了大改變，現在的 <code>=&gt;</code> 會被編譯成 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions">ES2015 的 <code>=&gt;</code></a>，所以這和以前有非常大的不同。最主要的衝擊莫過於 ES2015 的 <code>=&gt;</code> 函式不會有 <code>arguments</code> 物件。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="breaking_change_fat_arrow">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="breaking_change_fat_arrow-coffee">outer = ->
  inner = => Array.from arguments
  inner()

outer(1, 2)  # 在 CoffeeScript 1.x 中會回傳 ''，而 CoffeeScript 則是 '1, 2'
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">outer</span> <span class="cm-punctuation">=</span> <span class="cm-operator">-></span>
  <span class="cm-variable">inner</span> <span class="cm-punctuation">=</span> <span class="cm-operator">=></span> <span class="cm-variable">Array</span><span class="cm-punctuation">.</span><span class="cm-property">from</span> <span class="cm-variable">arguments</span>
  <span class="cm-variable">inner</span><span class="cm-punctuation">()</span>

<span class="cm-variable">outer</span><span class="cm-punctuation">(</span><span class="cm-number">1</span><span class="cm-punctuation">,</span> <span class="cm-number">2</span><span class="cm-punctuation">)</span>  <span class="cm-comment"># 在 CoffeeScript 1.x 中會回傳 ''，而 CoffeeScript 則是 '1, 2'</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="breaking_change_fat_arrow-js">var outer;

outer = function() {
  var inner;
  inner = () => {
    return Array.from(arguments);
  };
  return inner();
};

outer(1, 2); // 在 CoffeeScript 1.x 中會回傳 ''，而 CoffeeScript 則是 '1, 2'
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">outer</span>;

<span class="cm-variable">outer</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>() {
  <span class="cm-keyword">var</span> <span class="cm-def">inner</span>;
  <span class="cm-variable-2">inner</span> <span class="cm-operator">=</span> () <span class="cm-operator">=></span> {
    <span class="cm-keyword">return</span> <span class="cm-variable">Array</span>.<span class="cm-property">from</span>(<span class="cm-variable-2">arguments</span>);
  };
  <span class="cm-keyword">return</span> <span class="cm-variable-2">inner</span>();
};

<span class="cm-variable">outer</span>(<span class="cm-number">1</span>, <span class="cm-number">2</span>); <span class="cm-comment">// 在 CoffeeScript 1.x 中會回傳 ''，而 CoffeeScript 則是 '1, 2'</span>
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="breaking_change_fat_arrow" data-run="outer%281%2C%202%29"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>outer(1, 2)</button>
    </div>
  </div>
  
</aside>

        </section>
        <section id="breaking-changes-default-values">
          <h3>函式參數與物件解構預設值</h3>
<p>依據 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Default_parameters">ES2015 的函式參數預設值規範</a>還有<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment#Default_values">物件解構預設值</a>的相關文件表示：某個變數為 <code>undefined</code> 或完全沒有設置的時候才能夠以預設值作為內容。但是在 CoffeeScript 1.x 版本中，只要變數的值為 <code>null</code> 就會採用預設值。</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="breaking_change_function_parameter_default_values">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="breaking_change_function_parameter_default_values-coffee">f = (a = 1) -> a

f(null)  # 在 CoffeeScript 1.x 中會回傳 1，而 CoffeeScript 2 則是 null</textarea>
      <pre class="placeholder-code"><span class="cm-variable">f</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">(</span><span class="cm-variable">a</span> <span class="cm-punctuation">=</span> <span class="cm-number">1</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span> <span class="cm-variable">a</span>

<span class="cm-variable">f</span><span class="cm-punctuation">(</span><span class="cm-atom">null</span><span class="cm-punctuation">)</span>  <span class="cm-comment"># 在 CoffeeScript 1.x 中會回傳 1，而 CoffeeScript 2 則是 null</span></pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="breaking_change_function_parameter_default_values-js">var f;

f = function(a = 1) {
  return a;
};

f(null); // 在 CoffeeScript 1.x 中會回傳 1，而 CoffeeScript 2 則是 null
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">f</span>;

<span class="cm-variable">f</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>(<span class="cm-def">a</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>) {
  <span class="cm-keyword">return</span> <span class="cm-variable-2">a</span>;
};

<span class="cm-variable">f</span>(<span class="cm-atom">null</span>); <span class="cm-comment">// 在 CoffeeScript 1.x 中會回傳 1，而 CoffeeScript 2 則是 null</span>
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="breaking_change_function_parameter_default_values" data-run="f%28null%29"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>f(null)</button>
    </div>
  </div>
  
</aside>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="breaking_change_destructuring_default_values">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="breaking_change_destructuring_default_values-coffee">{a = 1} = {a: null}

a  # 在 CoffeeScript 1.x 中等於 1，而 CoffeeScript 則是 null
</textarea>
      <pre class="placeholder-code"><span class="cm-punctuation">{</span><span class="cm-variable">a</span> <span class="cm-punctuation">=</span> <span class="cm-number">1</span><span class="cm-punctuation">}</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">{</span><span class="cm-variable">a</span><span class="cm-punctuation">:</span> <span class="cm-atom">null</span><span class="cm-punctuation">}</span>

<span class="cm-variable">a</span>  <span class="cm-comment"># 在 CoffeeScript 1.x 中等於 1，而 CoffeeScript 則是 null</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="breaking_change_destructuring_default_values-js">var a;

({a = 1} = {
  a: null
});

a; // 在 CoffeeScript 1.x 中等於 1，而 CoffeeScript 則是 null
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">a</span>;

({<span class="cm-property">a</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>} <span class="cm-operator">=</span> {
  <span class="cm-property">a</span>: <span class="cm-atom">null</span>
});

<span class="cm-variable">a</span>; <span class="cm-comment">// 在 CoffeeScript 1.x 中等於 1，而 CoffeeScript 則是 null</span>
</pre>
    </div>
  </div>
  
  <div class="row">
    <div class="col text-right">
      <button type="button" class="btn btn-primary" data-action="run-code-example" data-example="breaking_change_destructuring_default_values" data-run="a"><small><svg class="play-button" viewBox="0 0 24 24">
	<path d="M2.56-0.01v24.02L21.44 11.98 2.56-0.01z"></path>
</svg>
</small>a</button>
    </div>
  </div>
  
</aside>

        </section>
        <section id="breaking-changes-bound-generator-functions">
          <h3>有界產生器函式</h3>
<p>有界產生器函式，簡單說就是：「產生器胖箭頭函式」在目前是<a href="http://stackoverflow.com/questions/27661306/can-i-use-es6s-arrow-function-syntax-with-generators-arrow-notation">不被 ECMAScript 允許</a>的。你能夠寫成 <code>function*</code> 但卻不能用上 <code>=&gt;</code> 符號，所以如果你的程式碼看起來像這樣：</p>
<blockquote class="uneditable-code-block"><pre><code class="language-coffee"><span class="function"><span class="title">f</span> = =&gt;</span> <span class="keyword">yield</span> <span class="keyword">this</span>
<span class="comment"># 會發生編譯器錯誤</span>
</code></pre>
</blockquote><p>則必須以更「古老」的方式撰寫：</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="breaking_change_bound_generator_function">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="breaking_change_bound_generator_function-coffee">self = this
f = -> yield self
</textarea>
      <pre class="placeholder-code"><span class="cm-variable">self</span> <span class="cm-punctuation">=</span> <span class="cm-keyword">this</span>
<span class="cm-variable">f</span> <span class="cm-punctuation">=</span> <span class="cm-operator">-></span> <span class="cm-variable">yield</span> <span class="cm-variable">self</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="breaking_change_bound_generator_function-js">var f, self;

self = this;

f = function*() {
  return (yield self);
};
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">f</span>, <span class="cm-def">self</span>;

<span class="cm-variable">self</span> <span class="cm-operator">=</span> <span class="cm-keyword">this</span>;

<span class="cm-variable">f</span> <span class="cm-operator">=</span> <span class="cm-keyword">function*</span>() {
  <span class="cm-keyword">return</span> (<span class="cm-keyword">yield</span> <span class="cm-variable">self</span>);
};
</pre>
    </div>
  </div>
  
</aside>

        </section>
        <section id="breaking-changes-classes">
          <h3>類別被編譯成 ES2015 型態</h3>
<p>ES2015 的類別有著一些先天上的限制。</p>
<p>例如說類別的建構子如果沒有 <code>new</code> 的話就不能正常執行：</p>
<blockquote class="uneditable-code-block"><pre><code class="language-coffee">(<span class="class"><span class="keyword">class</span>)()</span>
<span class="comment"># 會在執行時態拋出 TypeError 異常</span>
</code></pre>
</blockquote><p>ES2015 類別中無法用上有界（胖箭頭）函式。話雖如此 CoffeeScript 還是盡可能地越過一些障礙來支援這項功能，但還是有些缺點：</p>
<blockquote class="uneditable-code-block"><pre><code class="language-coffee"><span class="class"><span class="keyword">class</span> <span class="title">Base</span></span>
  constructor: <span class="function">-&gt;</span>
    @onClick()      <span class="comment"># 這可以正常使用</span>
    clickHandler = @onClick
    clickHandler()  <span class="comment"># 這會拋出執行時態錯誤</span>

<span class="class"><span class="keyword">class</span> <span class="title">Component</span> <span class="keyword">extends</span> <span class="title">Base</span></span>
  onClick: <span class="function">=&gt;</span>
    <span class="built_in">console</span>.log <span class="string">'Clicked!'</span>, @
</code></pre>
</blockquote><p>類別方法不能直接透過 <code>new</code> 使用（雖然這很罕見）：</p>
<blockquote class="uneditable-code-block"><pre><code class="language-coffee"><span class="class"><span class="keyword">class</span> <span class="title">Namespace</span></span>
  @Klass = <span class="function">-&gt;</span>
<span class="keyword">new</span> Namespace.Klass  <span class="comment"># 會在執行時態拋出 TypeError 錯誤</span>
</code></pre>
</blockquote><p>由於 ES2015 的類別的先天限制問題，類別中不能有動態方法名稱；除非其動態方法是賦予到類別的原型鏈底下。</p>
<blockquote class="uneditable-code-block"><pre><code class="language-coffee"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span>
  name = <span class="string">'method'</span>
  <span class="string">"<span class="subst">#{name}</span>"</span>: <span class="function">-&gt;</span>   <span class="comment"># 這個方法會被命名為 'undefined'</span>
  @::[name] = <span class="function">-&gt;</span>  <span class="comment"># 這可以正常使用；會被賦予到 `A.prototype.method`</span>
</code></pre>
</blockquote>
        </section>
        <section id="breaking-changes-super-this">
          <h3><code>super</code> 和 <code>this</code></h3>
<p>在一個衍生類別（使用 <code>extends</code> 繼承的類別）的建構子中，<code>this</code> 不能比起 <code>super</code> 還要早使用：</p>
<blockquote class="uneditable-code-block"><pre><code class="language-coffee"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span>
  constructor: <span class="function">-&gt;</span> <span class="keyword">this</span>  <span class="comment"># 會拋出編譯器錯誤異常</span>
</code></pre>
</blockquote><p>這意味著在衍生類別的建構子內，你也不能夠將 <code>this</code> 以參數的方式賦予給 <code>super</code>：</p>
<blockquote class="uneditable-code-block"><pre><code class="language-coffee"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span>
  constructor: <span class="function"><span class="params">(@arg)</span> -&gt;</span>
    <span class="keyword">super</span> @arg  <span class="comment"># 會拋出編譯器錯誤異常</span>
</code></pre>
</blockquote><p>這些是來自於 ES2015 類別的先天限制。如果要繞過這個限制，請試著在呼叫 <code>super</code> 之後賦予 <code>this</code>：</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="breaking_change_super_this">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="breaking_change_super_this-coffee">class B extends A
  constructor: (arg) ->
    super arg
    @arg = arg
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">class</span> <span class="cm-variable">B</span> <span class="cm-keyword">extends</span> <span class="cm-variable">A</span>
  <span class="cm-variable">constructor</span><span class="cm-punctuation">:</span> <span class="cm-punctuation">(</span><span class="cm-variable">arg</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span>
    <span class="cm-variable">super</span> <span class="cm-variable">arg</span>
    <span class="cm-property">@arg</span> <span class="cm-punctuation">=</span> <span class="cm-variable">arg</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="breaking_change_super_this-js">var B;

B = class B extends A {
  constructor(arg) {
    super(arg);
    this.arg = arg;
  }

};
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">B</span>;

<span class="cm-variable">B</span> <span class="cm-operator">=</span> <span class="cm-keyword">class</span> <span class="cm-def">B</span> <span class="cm-keyword">extends</span> <span class="cm-variable">A</span> {
  <span class="cm-property">constructor</span>(<span class="cm-def">arg</span>) {
    <span class="cm-keyword">super</span>(<span class="cm-variable-2">arg</span>);
    <span class="cm-keyword">this</span>.<span class="cm-property">arg</span> <span class="cm-operator">=</span> <span class="cm-variable-2">arg</span>;
  }

};
</pre>
    </div>
  </div>
  
</aside>

        </section>
        <section id="breaking-changes-super-extends">
          <h3><code>super</code> 和 <code>extends</code></h3>
<p>由於語法上的衝突；沒有大括號的 <code>super</code> 不再會自動轉發所有的參數。</p>
<blockquote class="uneditable-code-block"><pre><code class="language-coffee"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span>
  foo: <span class="function">-&gt;</span> <span class="keyword">super</span>
  <span class="comment"># 會拋出編譯器錯誤異常</span>
</code></pre>
</blockquote><p>參數能夠以變參運算子轉發：</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="breaking_change_super_with_arguments">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="breaking_change_super_with_arguments-coffee">class B extends A
  foo: -> super arguments...
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">class</span> <span class="cm-variable">B</span> <span class="cm-keyword">extends</span> <span class="cm-variable">A</span>
  <span class="cm-variable">foo</span><span class="cm-punctuation">:</span> <span class="cm-operator">-></span> <span class="cm-variable">super</span> <span class="cm-variable">arguments</span><span class="cm-punctuation">...</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="breaking_change_super_with_arguments-js">var B;

B = class B extends A {
  foo() {
    return super.foo(...arguments);
  }

};
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">B</span>;

<span class="cm-variable">B</span> <span class="cm-operator">=</span> <span class="cm-keyword">class</span> <span class="cm-def">B</span> <span class="cm-keyword">extends</span> <span class="cm-variable">A</span> {
  <span class="cm-property">foo</span>() {
    <span class="cm-keyword">return</span> <span class="cm-keyword">super</span>.<span class="cm-property">foo</span>(<span class="cm-meta">...</span><span class="cm-variable-2">arguments</span>);
  }

};
</pre>
    </div>
  </div>
  
</aside>
<p>或者如果父函式不需要參數，就能夠直接呼叫 <code>super()</code>：</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="breaking_change_super_without_arguments">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="breaking_change_super_without_arguments-coffee">class B extends A
  foo: -> super()
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">class</span> <span class="cm-variable">B</span> <span class="cm-keyword">extends</span> <span class="cm-variable">A</span>
  <span class="cm-variable">foo</span><span class="cm-punctuation">:</span> <span class="cm-operator">-></span> <span class="cm-variable">super</span><span class="cm-punctuation">()</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="breaking_change_super_without_arguments-js">var B;

B = class B extends A {
  foo() {
    return super.foo();
  }

};
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">B</span>;

<span class="cm-variable">B</span> <span class="cm-operator">=</span> <span class="cm-keyword">class</span> <span class="cm-def">B</span> <span class="cm-keyword">extends</span> <span class="cm-variable">A</span> {
  <span class="cm-property">foo</span>() {
    <span class="cm-keyword">return</span> <span class="cm-keyword">super</span>.<span class="cm-property">foo</span>();
  }

};
</pre>
    </div>
  </div>
  
</aside>
<p>CoffeeScript 1.x 允許你透過 <code>extends</code> 關鍵字設置函式之間的原型繼承，而 <code>super</code> 可以用在基於原型鏈之間的函式：</p>
<blockquote class="uneditable-code-block"><pre><code class="language-coffee"><span class="function"><span class="title">A</span> = -&gt;</span>
<span class="function"><span class="title">B</span> = -&gt;</span>
B extends A
B.prototype.foo = <span class="function">-&gt;</span> <span class="keyword">super</span> arguments...
<span class="comment"># 最後兩行程式碼現在會於 CoffeeScript 2 中拋出異常</span>
</code></pre>
</blockquote><p>由於改用 ES2015 的 <code>extends</code> 與 <code>super</code>，這些關鍵字將無法用於原型鏈函式上。因此上述的範例現在被更改成：</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="breaking_change_super_in_non-class_methods_refactor_with_apply">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="breaking_change_super_in_non-class_methods_refactor_with_apply-coffee"># 輔助函式
hasProp = {}.hasOwnProperty
extend = (child, parent) ->
  ctor = ->
    @constructor = child
    return
  for key of parent
    if hasProp.call(parent, key)
      child[key] = parent[key]
  ctor.prototype = parent.prototype
  child.prototype = new ctor
  child


A = ->
B = ->
extend B, A
B.prototype.foo = -> A::foo.apply this, arguments
</textarea>
      <pre class="placeholder-code"><span class="cm-comment"># 輔助函式</span>
<span class="cm-variable">hasProp</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">{}.</span><span class="cm-property">hasOwnProperty</span>
<span class="cm-variable">extend</span> <span class="cm-punctuation">=</span> <span class="cm-punctuation">(</span><span class="cm-variable">child</span><span class="cm-punctuation">,</span> <span class="cm-variable">parent</span><span class="cm-punctuation">)</span> <span class="cm-operator">-></span>
  <span class="cm-variable">ctor</span> <span class="cm-punctuation">=</span> <span class="cm-operator">-></span>
    <span class="cm-property">@constructor</span> <span class="cm-punctuation">=</span> <span class="cm-variable">child</span>
    <span class="cm-keyword">return</span>
  <span class="cm-keyword">for</span> <span class="cm-variable">key</span> <span class="cm-keyword">of</span> <span class="cm-variable">parent</span>
    <span class="cm-keyword">if</span> <span class="cm-variable">hasProp</span><span class="cm-punctuation">.</span><span class="cm-property">call</span><span class="cm-punctuation">(</span><span class="cm-variable">parent</span><span class="cm-punctuation">,</span> <span class="cm-variable">key</span><span class="cm-punctuation">)</span>
      <span class="cm-variable">child</span><span class="cm-punctuation">[</span><span class="cm-variable">key</span><span class="cm-punctuation">]</span> <span class="cm-punctuation">=</span> <span class="cm-variable">parent</span><span class="cm-punctuation">[</span><span class="cm-variable">key</span><span class="cm-punctuation">]</span>
<span class="cm-dedent">  </span><span class="cm-variable">ctor</span><span class="cm-punctuation">.</span><span class="cm-property">prototype</span> <span class="cm-punctuation">=</span> <span class="cm-variable">parent</span><span class="cm-punctuation">.</span><span class="cm-property">prototype</span>
  <span class="cm-variable">child</span><span class="cm-punctuation">.</span><span class="cm-property">prototype</span> <span class="cm-punctuation">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">ctor</span>
  <span class="cm-variable">child</span>


<span class="cm-variable">A</span> <span class="cm-punctuation">=</span> <span class="cm-operator">-></span>
<span class="cm-variable">B</span> <span class="cm-punctuation">=</span> <span class="cm-operator">-></span>
<span class="cm-variable">extend</span> <span class="cm-variable">B</span><span class="cm-punctuation">,</span> <span class="cm-variable">A</span>
<span class="cm-variable">B</span><span class="cm-punctuation">.</span><span class="cm-property">prototype</span><span class="cm-punctuation">.</span><span class="cm-property">foo</span> <span class="cm-punctuation">=</span> <span class="cm-operator">-></span> <span class="cm-variable">A</span><span class="cm-punctuation">::</span><span class="cm-variable">foo</span><span class="cm-punctuation">.</span><span class="cm-property">apply</span> <span class="cm-keyword">this</span><span class="cm-punctuation">,</span> <span class="cm-variable">arguments</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="breaking_change_super_in_non-class_methods_refactor_with_apply-js">// 輔助函式
var A, B, extend, hasProp;

hasProp = {}.hasOwnProperty;

extend = function(child, parent) {
  var ctor, key;
  ctor = function() {
    this.constructor = child;
  };
  for (key in parent) {
    if (hasProp.call(parent, key)) {
      child[key] = parent[key];
    }
  }
  ctor.prototype = parent.prototype;
  child.prototype = new ctor;
  return child;
};

A = function() {};

B = function() {};

extend(B, A);

B.prototype.foo = function() {
  return A.prototype.foo.apply(this, arguments);
};
</textarea>
      <pre class="placeholder-code"><span class="cm-comment">// 輔助函式</span>
<span class="cm-keyword">var</span> <span class="cm-def">A</span>, <span class="cm-def">B</span>, <span class="cm-def">extend</span>, <span class="cm-def">hasProp</span>;

<span class="cm-variable">hasProp</span> <span class="cm-operator">=</span> {}.<span class="cm-property">hasOwnProperty</span>;

<span class="cm-variable">extend</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>(<span class="cm-def">child</span>, <span class="cm-def">parent</span>) {
  <span class="cm-keyword">var</span> <span class="cm-def">ctor</span>, <span class="cm-def">key</span>;
  <span class="cm-variable-2">ctor</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>() {
    <span class="cm-keyword">this</span>.<span class="cm-property">constructor</span> <span class="cm-operator">=</span> <span class="cm-variable-2">child</span>;
  };
  <span class="cm-keyword">for</span> (<span class="cm-variable-2">key</span> <span class="cm-keyword">in</span> <span class="cm-variable-2">parent</span>) {
    <span class="cm-keyword">if</span> (<span class="cm-variable">hasProp</span>.<span class="cm-property">call</span>(<span class="cm-variable-2">parent</span>, <span class="cm-variable-2">key</span>)) {
      <span class="cm-variable-2">child</span>[<span class="cm-variable-2">key</span>] <span class="cm-operator">=</span> <span class="cm-variable-2">parent</span>[<span class="cm-variable-2">key</span>];
    }
  }
  <span class="cm-variable-2">ctor</span>.<span class="cm-property">prototype</span> <span class="cm-operator">=</span> <span class="cm-variable-2">parent</span>.<span class="cm-property">prototype</span>;
  <span class="cm-variable-2">child</span>.<span class="cm-property">prototype</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable-2">ctor</span>;
  <span class="cm-keyword">return</span> <span class="cm-variable-2">child</span>;
};

<span class="cm-variable">A</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>() {};

<span class="cm-variable">B</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>() {};

<span class="cm-variable">extend</span>(<span class="cm-variable">B</span>, <span class="cm-variable">A</span>);

<span class="cm-variable">B</span>.<span class="cm-property">prototype</span>.<span class="cm-property">foo</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>() {
  <span class="cm-keyword">return</span> <span class="cm-variable">A</span>.<span class="cm-property">prototype</span>.<span class="cm-property">foo</span>.<span class="cm-property">apply</span>(<span class="cm-keyword">this</span>, <span class="cm-variable-2">arguments</span>);
};
</pre>
    </div>
  </div>
  
</aside>
<p>或下面這樣也行：</p>
<aside class="code-example container-fluid bg-ribbed-dark" data-example="breaking_change_super_in_non-class_methods_refactor_with_class">
  <div class="row">
    <div class="col-md-6 coffeescript-input-column">
      <textarea class="coffeescript-input" id="breaking_change_super_in_non-class_methods_refactor_with_class-coffee">class A
class B extends A
  foo: -> super arguments...
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">class</span> <span class="cm-variable">A</span>
<span class="cm-keyword">class</span> <span class="cm-variable">B</span> <span class="cm-keyword">extends</span> <span class="cm-variable">A</span>
  <span class="cm-variable">foo</span><span class="cm-punctuation">:</span> <span class="cm-operator">-></span> <span class="cm-variable">super</span> <span class="cm-variable">arguments</span><span class="cm-punctuation">...</span>
</pre>
    </div>
    <div class="col-md-6 javascript-output-column">
      <textarea class="javascript-output" id="breaking_change_super_in_non-class_methods_refactor_with_class-js">var A, B;

A = class A {};

B = class B extends A {
  foo() {
    return super.foo(...arguments);
  }

};
</textarea>
      <pre class="placeholder-code"><span class="cm-keyword">var</span> <span class="cm-def">A</span>, <span class="cm-def">B</span>;

<span class="cm-variable">A</span> <span class="cm-operator">=</span> <span class="cm-keyword">class</span> <span class="cm-def">A</span> {};

<span class="cm-variable">B</span> <span class="cm-operator">=</span> <span class="cm-keyword">class</span> <span class="cm-def">B</span> <span class="cm-keyword">extends</span> <span class="cm-variable">A</span> {
  <span class="cm-property">foo</span>() {
    <span class="cm-keyword">return</span> <span class="cm-keyword">super</span>.<span class="cm-property">foo</span>(<span class="cm-meta">...</span><span class="cm-variable-2">arguments</span>);
  }

};
</pre>
    </div>
  </div>
  
</aside>

        </section>
        <section id="breaking-changes-jsx-and-the-less-than-and-greater-than-operators">
          <h3>JSX 和 <code>&lt;</code> 與 <code>&gt;</code> 運算子</h3>
<p>在 <a href="#jsx">JSX</a> 的用法中，<code>&lt;</code> 與 <code>&gt;</code> 符號被用來作為「小於」和「大於」，同時也是 XML 標籤（如：<code>&lt;div&gt;</code>）的開閉合符號。為了避免編譯器誤認運算子為 XML 符號，當使用其符號作為運算子的時候請寫成：<code>i &lt; len</code> 而不是 <code>i&lt;len</code>。雖然說編譯器會盡可能地猜測你真正的意圖，但在使用「小於」和「大於」的符號時加上空白還是會令人更安心些。</p>

        </section>
        <section id="breaking-changes-literate-coffeescript">
          <h3>文學式 CoffeeScript 解析</h3>
<p>CoffeeScript 2 的文學式解析器已經以更嚴謹的模式被重寫成盡可能地不要將縮排清單作為程式碼區塊看待；但這同時表示程式碼區塊與正常的段落文字需要相隔至少一行。</p>
<p>程式碼區塊需要有明確的縮排方式，例如 1 個 Tab（或者是 2 個空格甚至 4 個都可以）。</p>
<p>如果你希望有個程式碼區塊是作為註釋而不該被納入執行範圍內，那麼該程式碼區塊就必須要有一行（通常是開頭第一行）是沒有縮排的。</p>

        </section>
        <section id="breaking-changes-argument-parsing-and-shebang-lines">
          <h3>參數解析與井驚嘆號（<code>#!</code>）行列</h3>
<p>在 CoffeeScript 1.x 之中，<code>--</code> 必須擺放在檔案名稱後面才能夠將 Coffee 腳本作為可執行檔案呼叫，且後面可以擺放欲傳入的參數。不過現在這個方法已經被棄用了，所以比起這麼做：</p>
<blockquote class="uneditable-code-block"><pre><code class="language-bash">coffee [選項] path/to/script.coffee -- [參數]
</code></pre>
</blockquote><p>你現在可以直接這樣使用：</p>
<blockquote class="uneditable-code-block"><pre><code class="language-bash">coffee [選項] path/to/script.coffee [參數]
</code></pre>
</blockquote><p>雖說被棄用的方法一樣可以使用，但是在以該方式執行後會輸出一行警告訊息。</p>
<p>在非 Windows 的平台上，<code>.coffee</code> 檔案內的第一行開頭可以加上井驚嘆號（<code>#!</code>）來將其檔案作為可執行檔案。例如說：</p>
<blockquote class="uneditable-code-block"><pre><code class="language-coffee"><span class="comment">#!/usr/bin/env coffee</span>

x = <span class="number">2</span> + <span class="number">2</span>
<span class="built_in">console</span>.log x
</code></pre>
</blockquote><p>如果這個檔案被儲存為 <code>executable.coffee</code>，那麼就可以透過下列指令來執行：</p>
<blockquote class="uneditable-code-block"><pre><code class="language-bash">▶ chmod +x ./executable.coffee
▶ ./executable.coffee
4
</code></pre>
</blockquote><p>在 CoffeeScript 1.x 中，原本這麼做會無法接收傳入的參數。有些 macOS 的使用者會將 <code>#!/usr/bin/env coffee --</code> 作為檔案的開頭來允許腳本接收參數，但這在 Linux 上卻毫無作用；就算能，也無法解析超過一行以上的參數。雖然說現在仍然可以在開頭加上兩個減號，但在 macOS 上執行時，CoffeeScript 會顯示相關的警告訊息。不過好消息是現在已經不需要那兩個 <code>--</code> 減號了，所以直接將腳本的開頭改為 <code>#!/usr/bin/env coffee</code> 即可。</p>

        </section>
      </section>
      <section id="changelog">
        <h2>變更日誌</h2>

        <section id="2.3.1">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/2.3.0...2.3.1">2.3.1</a>
  <span class="timestamp"> &mdash; <time datetime="2018-05-21">2018-05-21</time></span>
</h3><ul>
<li>Returning a JSX tag that is adjacent to another JSX tag, as opposed to returning a root JSX tag or fragment, is invalid JSX syntax. Babel throws an error on this, and now the CoffeeScript compiler does too.</li>
<li>Invalid indentation inside a JSX interpolation (the middle of <code>&lt;tag&gt;{ ... }&lt;/tag&gt;</code>) now throws an error.</li>
<li>The browser compiler, used in <a href="https://coffeescript.org/#try">Try CoffeeScript</a> and similar web-based CoffeeScript editors, now evaluates code in a global scope rather than the scope of the browser compiler. This improves performance of code executed via the browser compiler.</li>
<li>Syntax cleanup: it is now possible for an implicit function call to take a body-less class as an argument, and <code>?::</code> now behaves identically to <code>::</code> with regard to implying a line continuation.</li>
</ul>

        </section>
        <section id="2.3.0">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/2.2.4...2.3.0">2.3.0</a>
  <span class="timestamp"> &mdash; <time datetime="2018-04-29">2018-04-29</time></span>
</h3><ul>
<li>This release adds support for all the new features and syntaxes in ES2018 that weren’t already possible in CoffeeScript. For all of the below features, make sure that you <a href="#transpilation">transpile</a> unless you know that your target runtime(s) support each feature.</li>
<li>Asynchronous iterators are now supported. You can now <code>yield</code> an <code>await</code> call, e.g. <code>do -&gt; until file.EOF then yield await file.readLine()</code>.</li>
<li>Object splats/destructuring, a.k.a. object rest/spread syntax, has been standardized as part of ES2018 and therefore this release removes the polyfill that had previously been supporting this syntax. Code like <code>{a, b, rest...} = obj</code> now outputs more or less just like it appears, rather than being converted into an <code>Object.assign</code> call. Note that there are <a href="https://developers.google.com/web/updates/2017/06/object-rest-spread">some subtle differences</a> between the <code>Object.assign</code> polyfill and the native implementation.</li>
<li>The exponentiation operator, <code>**</code>, and exponentiation assignment operator <code>**=</code> are new to JavaScript in ES2018. Now code like <code>a ** 3</code> is output as it appears, rather than being converted into <code>Math.pow(a, 3)</code> as it was before.</li>
<li>The <code>s</code> (dotAll) flag is now supported in regular expressions.</li>
</ul>

        </section>
        <section id="2.2.4">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/2.2.3...2.2.4">2.2.4</a>
  <span class="timestamp"> &mdash; <time datetime="2018-03-29">2018-03-29</time></span>
</h3><ul>
<li>When the <code>by</code> value in a <code>for</code> loop is a literal number, e.g. <code>for x in [2..1] by -1</code>, fewer checks are necessary to determine if the loop is in range.</li>
<li>Bugfix for regression in 2.2.0 where a statement inside parentheses, e.g. <code>(fn(); break) while condition</code>, was compiling. Pure statements like <code>break</code> or <code>return</code> cannot turn a parenthesized block into an expression, and should throw an error.</li>
</ul>

        </section>
        <section id="2.2.3">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/2.2.2...2.2.3">2.2.3</a>
  <span class="timestamp"> &mdash; <time datetime="2018-03-11">2018-03-11</time></span>
</h3><ul>
<li>Bugfix for object destructuring with an empty array as a key’s value: <code>{ key: [] } = obj</code>.</li>
<li>Bugfix for array destructuring onto targets attached to <code>this</code>: <code>[ @most... , @penultimate, @last ] = arr</code>.</li>
</ul>

        </section>
        <section id="2.2.2">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/2.2.1...2.2.2">2.2.2</a>
  <span class="timestamp"> &mdash; <time datetime="2018-02-21">2018-02-21</time></span>
</h3><ul>
<li>Bugfix for regression in 2.2.0 where a range with a <code>by</code> (step) value that increments or decrements in the opposite direction as the range was returning an array containing the first value of the range, whereas it should be returning an empty array. In other words, <code>x for x in [2..1] by 1</code> should equal <code>[]</code>, not <code>[2]</code> (because the step value is positive 1, counting up, whereas the range goes from 2 to 1, counting down).</li>
<li>Bugfixes for allowing backslashes in <code>import</code> and <code>export</code> statements and lines that trigger the start of an indented block, like an <code>if</code> statement.</li>
</ul>

        </section>
        <section id="2.2.1">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/2.2.0...2.2.1">2.2.1</a>
  <span class="timestamp"> &mdash; <time datetime="2018-02-06">2018-02-06</time></span>
</h3><ul>
<li>Bugfix for regression in 2.2.0 involving an error thrown by the compiler in certain cases when using destructuring with a splat or expansion in an array.</li>
<li>Bugfix for regression in 2.2.0 where in certain cases a range iterator variable was declared in the global scope.</li>
</ul>

        </section>
        <section id="2.2.0">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/2.1.1...2.2.0">2.2.0</a>
  <span class="timestamp"> &mdash; <time datetime="2018-02-01">2018-02-01</time></span>
</h3><ul>
<li>This release fixes <em>all</em> currently open bugs, dating as far back as 2014, 2012 and 2011.</li>
<li><strong>Potential breaking change:</strong> An inline <code>if</code> or <code>switch</code> statement with an ambiguous <code>else</code>, such as <code>if no then if yes then alert 1 else alert 2</code>, now compiles where the <code>else</code> always corresponds to the closest open <code>then</code>. Previously the behavior of an ambiguous <code>else</code> was unpredictable. If your code has any <code>if … then</code> or <code>switch … then</code> statements with multiple <code>then</code>s (and one or more <code>else</code>s) the compiled output might be different now, unless you had resolved ambiguity via parentheses. We made this change because the previous behavior was inconsistent and basically a bug: depending on what grammar was where, for example if there was an inline function or something that implied a block, the <code>else</code> might bind to an earlier <code>then</code> rather than a later <code>then</code>. Now an <code>else</code> essentially closes a block opened by a <code>then</code>, similar to closing an open parenthesis.</li>
<li>When a required <code>then</code> is missing, the error more accurately points out the location of the mistake.</li>
<li>An error is thrown when the <code>coffee</code> command is run in an environment that doesn’t support some ES2015 JavaScript features that the CoffeeScript compiler itself requires. This can happen if CoffeeScript is installed in Node older than version 6.</li>
<li>Destructuring with a non-final splat/spread, e.g. <code>[open, contents..., close] = tag.split('')</code> is now output using ES2015 rest syntax.</li>
<li>Functions named <code>get</code> or <code>set</code> can be used without parentheses in more cases, including when attached to <code>this</code> or <code>@</code> or <code>?.</code>; or when the first argument is an implicit object, e.g. <code>@set key: 'val'</code>.</li>
<li>Statements such as <code>break</code> can now be used inside parentheses, e.g. <code>(doSomething(); break) while condition</code> or <code>(pick(key); break) for key of obj</code>.</li>
<li>Bugfix for assigning to a property attached to <code>this</code>/<code>@</code> in destructuring, e.g. <code>({@prop = yes, @otherProp = no}) -&gt;</code>.</li>
<li>Bugfix for incorrect errors being thrown about calling <code>super</code> with a parameter attached to <code>this</code> when said parameter is in a lower scope, e.g. <code>class Child extends Parent then constructor: -&gt; super(-&gt; @prop)</code>.</li>
<li>Bugfix to prevent a possible infinite loop when a <code>for</code> loop is given a variable to step by, e.g. <code>for x in [1..3] by step</code> (as opposed to <code>by 0.5</code> or some other primitive numeric value).</li>
<li>Bugfix to no longer declare iterator variables twice when evaluating a range, e.g. <code>end = 3; fn [0..end]</code>.</li>
<li>Bugfix for incorrect scope of variables in chained calls, e.g. <code>start(x = 3).then(-&gt; x = 4)</code>.</li>
<li>Bugfix for incorrect scope of variables in a function passed to <code>do</code>, e.g. <code>for [1..3] then masked = 10; do -&gt; alert masked</code>.</li>
<li>Bugfix to no longer throw a syntax error for a trailing comma in a function call, e.g. <code>fn arg1, arg2,</code>.</li>
<li>Bugfix for an expression in a property access, e.g. <code>a[!b in c..]</code>.</li>
<li>Bugfix to allow a line continuation backslash (<code>\</code>) at any point in a <code>for</code> line.</li>
</ul>

        </section>
        <section id="2.1.1">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/2.1.0...2.1.1">2.1.1</a>
  <span class="timestamp"> &mdash; <time datetime="2017-12-29">2017-12-29</time></span>
</h3><ul>
<li>Bugfix to set the correct context for executable class bodies. So in <code>class @B extends @A then @property = 1</code>, the <code>@</code> in <code>@property</code> now refers to the class, not the global object.</li>
<li>Bugfix where anonymous classes were getting created using the same automatic variable name. They now each receive unique names, so as not to override each other.</li>
</ul>

        </section>
        <section id="2.1.0">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/2.0.3...2.1.0">2.1.0</a>
  <span class="timestamp"> &mdash; <time datetime="2017-12-10">2017-12-10</time></span>
</h3><ul>
<li>Computed property keys in object literals are now supported: <code>obj = { ['key' + i]: 42 }</code>, or <code>obj = [Symbol.iterator]: -&gt; yield i++</code>.</li>
<li>Skipping of array elements, a.k.a. elision, is now supported: <code>arr = [a, , b]</code>, or <code>[, protocol] = url.match /^(.*):\/\//</code>.</li>
<li><a href="https://reactjs.org/blog/2017/11/28/react-v16.2.0-fragment-support.html">JSX fragments syntax</a> is now supported.</li>
<li>Bugfix where <code>///</code> within a <code>#</code> line comment inside a <code>///</code> block regex was erroneously closing the regex, rather than being treated as part of the comment.</li>
<li>Bugfix for incorrect output for object rest destructuring inside array destructuring.</li>
</ul>

        </section>
        <section id="2.0.3">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/2.0.2...2.0.3">2.0.3</a>
  <span class="timestamp"> &mdash; <time datetime="2017-11-26">2017-11-26</time></span>
</h3><ul>
<li>Bugfix for <code>export default</code> followed by an implicit object that contains an explicit object, for example <code>exportedMember: { obj... }</code>.</li>
<li>Bugfix for <code>key, val of obj</code> after an implicit object member, e.g. <code>foo: bar for key, val of obj</code>.</li>
<li>Bugfix for combining array and object destructuring, e.g. <code>[ ..., {a, b} ] = arr</code>.</li>
<li>Bugfix for an edge case where it was possible to create a bound (<code>=&gt;</code>) generator function, which should throw an error as such functions aren’t allowed in ES2015.</li>
<li>Bugfix for source maps: <code>.map</code> files should always have the same base filename as the requested output filename. So <code>coffee --map --output foo.js test.coffee</code> should generate <code>foo.js</code> and <code>foo.js.map</code>.</li>
<li>Bugfix for incorrect source maps generated when using <code>--transpile</code> with <code>--map</code> for multiple input files.</li>
<li>Bugfix for comments at the beginning or end of input into the REPL (<code>coffee --interactive</code>).</li>
</ul>

        </section>
        <section id="2.0.2">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/2.0.1...2.0.2">2.0.2</a>
  <span class="timestamp"> &mdash; <time datetime="2017-10-26">2017-10-26</time></span>
</h3><ul>
<li><code>--transpile</code> now also applies to <code>require</code>d or <code>import</code>ed CoffeeScript files.</li>
<li><code>--transpile</code> can be used with the REPL: <code>coffee --interactive --transpile</code>.</li>
<li>Improvements to comments output that should now cover all of the <a href="https://flow.org/en/docs/types/comments/">Flow comment-based syntax</a>. Inline <code>###</code> comments near <a href="https://flow.org/en/docs/types/variables/">variable</a> initial assignments are now output in the variable declaration statement, and <code>###</code> comments near a <a href="https://flow.org/en/docs/types/generics/">class and method names</a> are now output where Flow expects them.</li>
<li>Importing CoffeeScript keywords is now allowed, so long as they’re aliased: <code>import { and as andFn } from 'lib'</code>. (You could also do <code>import lib from 'lib'</code> and then reference <code>lib.and</code>.)</li>
<li>Calls to functions named <code>get</code> and <code>set</code> no longer throw an error when given a bracketless object literal as an argument: <code>obj.set propertyName: propertyValue</code>.</li>
<li>In the constructor of a derived class (a class that <code>extends</code> another class), you cannot call <code>super</code> with an argument that references <code>this</code>: <code>class Child extends Parent then constructor: (@arg) -&gt; super(@arg)</code>. This isn’t allowed in JavaScript, and now the CoffeeScript compiler will throw an error. Instead, assign to <code>this</code> after calling <code>super</code>: <code>(arg) -&gt; super(arg); @arg = arg</code>.</li>
<li>Bugfix for incorrect output when backticked statements and hoisted expressions were both in the same class body. This allows a backticked line like <code>`field = 3`</code>, for people using the experimental <a href="https://github.com/tc39/proposal-class-fields">class fields</a> syntax, in the same class along with traditional class body expressions like <code>prop: 3</code> that CoffeeScript outputs as part of the class prototype.</li>
<li>Bugfix for comments not output before a complex <code>?</code> operation, e.g. <code>@a ? b</code>.</li>
<li>All tests now pass in Windows.</li>
</ul>

        </section>
        <section id="2.0.1">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/2.0.0...2.0.1">2.0.1</a>
  <span class="timestamp"> &mdash; <time datetime="2017-09-26">2017-09-26</time></span>
</h3><ul>
<li><code>babel-core</code> is no longer listed in <code>package.json</code>, even as an <code>optionalDependency</code>, to avoid it being automatically installed for most users. If you wish to use <code>--transpile</code>, simply install <code>babel-core</code> manually. See <a href="#transpilation">Transpilation</a>.</li>
<li><code>--transpile</code> now relies on Babel to find its options, i.e. the <code>.babelrc</code> file in the path of the file(s) being compiled. (Previously the CoffeeScript compiler was duplicating this logic, so nothing has changed from a user’s perspective.) This provides automatic support for additional ways to pass options to Babel in future versions, such as the <code>.babelrc.js</code> file coming in Babel 7.</li>
<li>Backticked expressions in a class body, outside any class methods, are now output in the JavaScript class body itself. This allows for passing through experimental JavaScript syntax like the <a href="https://github.com/tc39/proposal-class-fields">class fields proposal</a>, assuming your <a href="https://babeljs.io/docs/plugins/transform-class-properties/">transpiler supports it</a>.</li>
</ul>

        </section>
        <section id="2.0.0">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/2.0.0-beta5...2.0.0">2.0.0</a>
  <span class="timestamp"> &mdash; <time datetime="2017-09-18">2017-09-18</time></span>
</h3><ul>
<li>Added <code>--transpile</code> flag or <code>transpile</code> Node API option to tell the CoffeeScript compiler to pipe its output through Babel before saving or returning it; see <a href="#transpilation">Transpilation</a>. Also changed the <code>-t</code> short flag to refer to <code>--transpile</code> instead of <code>--tokens</code>.</li>
<li>Always populate source maps’ <code>sourcesContent</code> property.</li>
<li>Bugfixes for destructuring and for comments in JSX.</li>
<li><em>Note that these are only the changes between 2.0.0-beta5 and 2.0.0. See below for all changes since 1.x.</em></li>
</ul>

        </section>
        <section id="2.0.0-beta5">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/2.0.0-beta4...2.0.0-beta5">2.0.0-beta5</a>
  <span class="timestamp"> &mdash; <time datetime="2017-09-02">2017-09-02</time></span>
</h3><ul>
<li>Node 6 is now supported, and we will try to maintain that as the minimum required version for CoffeeScript 2 via the <code>coffee</code> command or Node API. Older versions of Node, or non-evergreen browsers, can compile via the <a href="./browser-compiler/coffeescript.js">browser compiler</a>.</li>
<li>The command line <code>--output</code> flag now allows you to specify an output filename, not just an output folder.</li>
<li>The command line <code>--require</code> flag now properly handles filenames or module names that are invalid identifiers (like an NPM module with a hyphen in the name).</li>
<li><code>Object.assign</code>, output when object destructuring is used, is polyfilled using the same polyfill that Babel outputs. This means that polyfills shouldn’t be required unless support for Internet Explorer 8 or below is desired (or your own code uses a feature that requires a polyfill). See <a href="#es2015plus-output">ES2015+ Output</a>.</li>
<li>A string or JSX interpolation that contains only a comment (<code>&quot;a#{### comment ###}b&quot;</code> or <code>&lt;div&gt;{### comment ###}&lt;/div&gt;</code>) is now output (<code>`a${/* comment */}b`</code>)</li>
<li>Interpolated strings (ES2015 template literals) that contain quotation marks no longer have the quotation marks escaped: <code>`say &quot;${message}&quot;`</code></li>
<li>It is now possible to chain after a function literal (for example, to define a function and then call <code>.call</code> on it).</li>
<li>The results of the async tests are included in the output when you run <code>cake test</code>.</li>
<li>Bugfixes for object destructuring; expansions in function parameters; generated reference variables in function parameters; chained functions after <code>do</code>; splats after existential operator soaks in arrays (<code>[a?.b...]</code>); trailing <code>if</code> with splat in arrays or function parameters (<code>[a if b...]</code>); attempting to <code>throw</code> an <code>if</code>, <code>for</code>, <code>switch</code>, <code>while</code> or other invalid construct.</li>
<li>Bugfixes for syntactical edge cases: semicolons after <code>=</code> and other “mid-expression” tokens; spaces after <code>::</code>; and scripts that begin with <code>:</code> or <code>*</code>.</li>
<li>Bugfixes for source maps generated via the Node API; and stack trace line numbers when compiling CoffeeScript via the Node API from within a <code>.coffee</code> file.</li>
</ul>

        </section>
        <section id="2.0.0-beta4">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/2.0.0-beta3...2.0.0-beta4">2.0.0-beta4</a>
  <span class="timestamp"> &mdash; <time datetime="2017-08-03">2017-08-03</time></span>
</h3><ul>
<li>This release includes <a href="#1.12.7">all the changes from 1.12.6 to 1.12.7</a>.</li>
<li><a href="#comments">Line comments</a> (starting with <code>#</code>) are now output in the generated JavaScript.</li>
<li><a href="#comments">Block comments</a> (delimited by <code>###</code>) are now allowed anywhere, including inline where they previously weren’t possible. This provides support for <a href="#type-annotations">static type annotations</a> using Flow’s comments-based syntax.</li>
<li>Spread syntax (<code>...</code> for objects) is now supported in JSX tags: <code>&lt;div {props...} /&gt;</code>.</li>
<li>Argument parsing for scripts run via <code>coffee</code> is improved. See <a href="#breaking-changes-argument-parsing-and-shebang-lines">breaking changes</a>.</li>
<li>CLI: Propagate <code>SIGINT</code> and <code>SIGTERM</code> signals when node is forked.</li>
<li><code>await</code> in the REPL is now allowed without requiring a wrapper function.</li>
<li><code>do super</code> is now allowed, and other accesses of <code>super</code> like <code>super.x.y</code> or <code>super['x'].y</code> now work.</li>
<li>Splat/spread syntax triple dots are now allowed on either the left or the right (so <code>props...</code> or <code>...props</code> are both valid).</li>
<li>Tagged template literals are recognized as callable functions.</li>
<li>Bugfixes for object spread syntax in nested properties.</li>
<li>Bugfixes for destructured function parameter default values.</li>
</ul>

        </section>
        <section id="2.0.0-beta3">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/2.0.0-beta2...2.0.0-beta3">2.0.0-beta3</a>
  <span class="timestamp"> &mdash; <time datetime="2017-06-30">2017-06-30</time></span>
</h3><ul>
<li><a href="#jsx">JSX</a> is now supported.</li>
<li><a href="#object-spread">Object rest/spread properties</a> are now supported.</li>
<li>Bound (fat arrow) methods are once again supported in classes; though an error will be thrown if you attempt to call the method before it is bound. See <a href="#breaking-changes-classes">breaking changes for classes</a>.</li>
<li>The REPL no longer warns about assigning to <code>_</code>.</li>
<li>Bugfixes for destructured nested default values and issues related to chaining or continuing expressions across multiple lines.</li>
</ul>

        </section>
        <section id="2.0.0-beta2">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/2.0.0-beta1...2.0.0-beta2">2.0.0-beta2</a>
  <span class="timestamp"> &mdash; <time datetime="2017-05-16">2017-05-16</time></span>
</h3><ul>
<li>This release includes <a href="#1.12.6">all the changes from 1.12.5 to 1.12.6</a>.</li>
<li>Bound (fat arrow) methods in classes must be declared in the class constructor, after <code>super()</code> if the class is extending a parent class. See <a href="#breaking-changes-classes">breaking changes for classes</a>.</li>
<li>All unnecessary utility helper functions have been removed, including the polyfills for <code>indexOf</code> and <code>bind</code>.</li>
<li>The <code>extends</code> keyword now only works in the context of classes; it cannot be used to extend a function prototype. See <a href="#breaking-changes-super-extends">breaking changes for <code>extends</code></a>.</li>
<li>Literate CoffeeScript is now parsed entirely based on indentation, similar to the 1.x implementation; there is no longer a dependency for parsing Markdown. See <a href="#breaking-changes-literate-coffeescript">breaking changes for Literate CoffeeScript parsing</a>.</li>
<li>JavaScript reserved words used as properties are no longer wrapped in quotes.</li>
<li><code>require('coffeescript')</code> should now work in non-Node environments such as the builds created by Webpack or Browserify. This provides a more convenient way to include the browser compiler in builds intending to run in a browser environment.</li>
<li>Unreachable <code>break</code> statements are no longer added after <code>switch</code> cases that <code>throw</code> exceptions.</li>
<li>The browser compiler is now compiled using Babili and transpiled down to Babel’s <code>env</code> preset (should be safe for use in all browsers in current use, not just evergreen versions).</li>
<li>Calling functions <code>@get</code> or <code>@set</code> no longer throws an error about required parentheses. (Bare <code>get</code> or <code>set</code>, not attached to an object or <code>@</code>, <a href="#unsupported-get-set">still intentionally throws a compiler error</a>.)</li>
<li>If <code>$XDG_CACHE_HOME</code> is set, the REPL <code>.coffee_history</code> file is saved there.</li>
</ul>

        </section>
        <section id="2.0.0-beta1">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/2.0.0-alpha1...2.0.0-beta1">2.0.0-beta1</a>
  <span class="timestamp"> &mdash; <time datetime="2017-04-14">2017-04-14</time></span>
</h3><ul>
<li>Initial beta release of CoffeeScript 2. No further breaking changes are anticipated.</li>
<li>Destructured objects and arrays now output using ES2015+ syntax whenever possible.</li>
<li>Literate CoffeeScript now has much better support for parsing Markdown, thanks to using <a href="https://github.com/markdown-it/markdown-it">Markdown-It</a> to detect Markdown sections rather than just looking at indentation.</li>
<li>Calling a function named <code>get</code> or <code>set</code> now requires parentheses, to disambiguate from the <code>get</code> or <code>set</code> keywords (which are <a href="#unsupported-get-set">disallowed</a>).</li>
<li>The compiler now requires Node 7.6+, the first version of Node to support asynchronous functions without requiring a flag.</li>
</ul>

        </section>
        <section id="2.0.0-alpha1">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.12.4...2.0.0-alpha1">2.0.0-alpha1</a>
  <span class="timestamp"> &mdash; <time datetime="2017-02-21">2017-02-21</time></span>
</h3><ul>
<li>Initial alpha release of CoffeeScript 2. The CoffeeScript compiler now outputs ES2015+ syntax whenever possible. See <a href="#breaking-changes">breaking changes</a>.</li>
<li>Classes are output using ES2015 <code>class</code> and <code>extends</code> keywords.</li>
<li>Added support for <code>async</code>/<code>await</code>.</li>
<li>Bound (arrow) functions now output as <code>=&gt;</code> functions.</li>
<li>Function parameters with default values now use ES2015 default values syntax.</li>
<li>Splat function parameters now use ES2015 spread syntax.</li>
<li>Computed properties now use ES2015 syntax.</li>
<li>Interpolated strings (template literals) now use ES2015 backtick syntax.</li>
<li>Improved support for recognizing Markdown in Literate CoffeeScript files.</li>
<li>Mixing tabs and spaces in indentation is now disallowed.</li>
<li>Browser compiler is now minified using the Google Closure Compiler (JavaScript version).</li>
<li>Node 7+ required for CoffeeScript 2.</li>
</ul>

        </section>
        <section id="1.12.7">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.12.6...1.12.7">1.12.7</a>
  <span class="timestamp"> &mdash; <time datetime="2017-07-16">2017-07-16</time></span>
</h3><ul>
<li>Fix regressions in 1.12.6 related to chained function calls and indented <code>return</code> and <code>throw</code> arguments.</li>
<li>The REPL no longer warns about assigning to <code>_</code>.</li>
</ul>

        </section>
        <section id="1.12.6">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.12.5...1.12.6">1.12.6</a>
  <span class="timestamp"> &mdash; <time datetime="2017-05-15">2017-05-15</time></span>
</h3><ul>
<li>The <code>return</code> and <code>export</code> keywords can now accept implicit objects (defined by indentation, without needing braces).</li>
<li>Support Unicode code point escapes (e.g. <code>\u{1F4A9}</code>).</li>
<li>The <code>coffee</code> command now first looks to see if CoffeeScript is installed under <code>node_modules</code> in the current folder, and executes the <code>coffee</code> binary there if so; or otherwise it runs the globally installed one. This allows you to have one version of CoffeeScript installed globally and a different one installed locally for a particular project. (Likewise for the <code>cake</code> command.)</li>
<li>Bugfixes for chained function calls not closing implicit objects or ternaries.</li>
<li>Bugfixes for incorrect code generated by the <code>?</code> operator within a termary <code>if</code> statement.</li>
<li>Fixed some tests, and failing tests now result in a nonzero exit code.</li>
</ul>

        </section>
        <section id="1.12.5">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.12.4...1.12.5">1.12.5</a>
  <span class="timestamp"> &mdash; <time datetime="2017-04-10">2017-04-10</time></span>
</h3><ul>
<li>Better handling of <code>default</code>, <code>from</code>, <code>as</code> and <code>*</code> within <code>import</code> and <code>export</code> statements. You can now import or export a member named <code>default</code> and the compiler won’t interpret it as the <code>default</code> keyword.</li>
<li>Fixed a bug where invalid octal escape sequences weren’t throwing errors in the compiler.</li>
</ul>

        </section>
        <section id="1.12.4">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.12.3...1.12.4">1.12.4</a>
  <span class="timestamp"> &mdash; <time datetime="2017-02-18">2017-02-18</time></span>
</h3><ul>
<li>The <code>cake</code> commands have been updated, with new <code>watch</code> options for most tasks. Clone the <a href="https://github.com/jashkenas/coffeescript">CoffeeScript repo</a> and run <code>cake</code> at the root of the repo to see the options.</li>
<li>Fixed a bug where <code>export</code>ing a referenced variable was preventing the variable from being declared.</li>
<li>Fixed a bug where the <code>coffee</code> command wasn’t working for a <code>.litcoffee</code> file.</li>
<li>Bugfixes related to tokens and location data, for better source maps and improved compatibility with downstream tools.</li>
</ul>

        </section>
        <section id="1.12.3">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.12.2...1.12.3">1.12.3</a>
  <span class="timestamp"> &mdash; <time datetime="2017-01-24">2017-01-24</time></span>
</h3><ul>
<li><code>@</code> values can now be used as indices in <code>for</code> expressions. This loosens the compilation of <code>for</code> expressions to allow the index variable to be an <code>@</code> value, e.g. <code>do @visit for @node, @index in nodes</code>. Within <code>@visit</code>, the index of the current node (<code>@node</code>) would be available as <code>@index</code>.</li>
<li>CoffeeScript’s patched <code>Error.prepareStackTrace</code> has been restored, with some revisions that should prevent the erroneous exceptions that were making life difficult for some downstream projects. This fixes the incorrect line numbers in stack traces since 1.12.2.</li>
<li>The <code>//=</code> operator’s output now wraps parentheses around the right operand, like the other assignment operators.</li>
</ul>

        </section>
        <section id="1.12.2">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.12.1...1.12.2">1.12.2</a>
  <span class="timestamp"> &mdash; <time datetime="2016-12-16">2016-12-16</time></span>
</h3><ul>
<li>The browser compiler can once again be built unminified via <code>MINIFY=false cake build:browser</code>.</li>
<li>The error-prone patched version of <code>Error.prepareStackTrace</code> has been removed.</li>
<li>Command completion in the REPL (pressing tab to get suggestions) has been fixed for Node 6.9.1+.</li>
<li>The <a href="/v2/test.html">browser-based tests</a> now include all the tests as the Node-based version.</li>
</ul>

        </section>
        <section id="1.12.1">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.12.0...1.12.1">1.12.1</a>
  <span class="timestamp"> &mdash; <time datetime="2016-12-07">2016-12-07</time></span>
</h3><ul>
<li>You can now import a module member named <code>default</code>, e.g. <code>import { default } from 'lib'</code>. Though like in ES2015, you cannot import an entire module and name it <code>default</code> (so <code>import default from 'lib'</code> is not allowed).</li>
<li>Fix regression where <code>from</code> as a variable name was breaking <code>for</code> loop declarations. For the record, <code>from</code> is not a reserved word in CoffeeScript; you may use it for variable names. <code>from</code> behaves like a keyword within the context of <code>import</code> and <code>export</code> statements, and in the declaration of a <code>for</code> loop; though you should also be able to use variables named <code>from</code> in those contexts, and the compiler should be able to tell the difference.</li>
</ul>

        </section>
        <section id="1.12.0">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.11.1...1.12.0">1.12.0</a>
  <span class="timestamp"> &mdash; <time datetime="2016-12-04">2016-12-04</time></span>
</h3><ul>
<li>CoffeeScript now supports ES2015 <a href="#tagged-template-literals">tagged template literals</a>. Note that using tagged template literals in your code makes you responsible for ensuring that either your runtime supports tagged template literals or that you transpile the output JavaScript further to a version your target runtime(s) support.</li>
<li>CoffeeScript now provides a <a href="#generator-iteration"><code>for…from</code></a> syntax for outputting ES2015 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of"><code>for…of</code></a>. (Sorry they couldn’t match, but we came up with <code>for…of</code> first for something else.) This allows iterating over generators or any other iterable object. Note that using <code>for…from</code> in your code makes you responsible for ensuring that either your runtime supports <code>for…of</code> or that you transpile the output JavaScript further to a version your target runtime(s) support.</li>
<li>Triple backticks (<code>```​</code>) allow the creation of embedded JavaScript blocks where escaping single backticks is not required, which should improve interoperability with ES2015 template literals and with Markdown.</li>
<li>Within single-backtick embedded JavaScript, backticks can now be escaped via <code>\`​</code>.</li>
<li>The browser tests now run in the browser again, and are accessible <a href="/v2/test.html">here</a> if you would like to test your browser.</li>
<li>CoffeeScript-only keywords in ES2015 <code>import</code>s and <code>export</code>s are now ignored.</li>
<li>The compiler now throws an error on trying to export an anonymous class.</li>
<li>Bugfixes related to tokens and location data, for better source maps and improved compatibility with downstream tools.</li>
</ul>

        </section>
        <section id="1.11.1">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.11.0...1.11.1">1.11.1</a>
  <span class="timestamp"> &mdash; <time datetime="2016-10-02">2016-10-02</time></span>
</h3><ul>
<li>Bugfix for shorthand object syntax after interpolated keys.</li>
<li>Bugfix for indentation-stripping in <code>&quot;&quot;&quot;</code> strings.</li>
<li>Bugfix for not being able to use the name “arguments” for a prototype property of class.</li>
<li>Correctly compile large hexadecimal numbers literals to <code>2e308</code> (just like all other large number literals do).</li>
</ul>

        </section>
        <section id="1.11.0">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.10.0...1.11.0">1.11.0</a>
  <span class="timestamp"> &mdash; <time datetime="2016-09-24">2016-09-24</time></span>
</h3><ul>
<li>CoffeeScript now supports ES2015 <a href="#modules"><code>import</code> and <code>export</code> syntax</a>.</li>
<li>Added the <code>-M, --inline-map</code> flag to the compiler, allowing you embed the source map directly into the output JavaScript, rather than as a separate file.</li>
<li>A bunch of fixes for <code>yield</code>:
<ul>
<li><code>yield return</code> can no longer mistakenly be used as an expression.</li>
<li><code>yield</code> now mirrors <code>return</code> in that it can be used stand-alone as well as with expressions. Where you previously wrote <code>yield undefined</code>, you may now write simply <code>yield</code>. However, this means also inheriting the same syntax limitations that <code>return</code> has, so these examples no longer compile:<blockquote class="uneditable-code-block"><pre><code>doubles = -&gt;
  yield for i in [1..3]
    i * 2
six = -&gt;
  yield
    2 * 3
</code></pre>
</blockquote></li>
<li>The JavaScript output is a bit nicer, with unnecessary parentheses and spaces, double indentation and double semicolons around <code>yield</code> no longer present.</li>
</ul>
</li>
<li><code>&amp;&amp;=</code>, <code>||=</code>, <code>and=</code> and <code>or=</code> no longer accidentally allow a space before the equals sign.</li>
<li>Improved several error messages.</li>
<li>Just like <code>undefined</code> compiles to <code>void 0</code>, <code>NaN</code> now compiles into <code>0/0</code> and <code>Infinity</code> into <code>2e308</code>.</li>
<li>Bugfix for renamed destructured parameters with defaults. <code>({a: b = 1}) -&gt;</code> no longer crashes the compiler.</li>
<li>Improved the internal representation of a CoffeeScript program. This is only noticeable to tools that use <code>CoffeeScript.tokens</code> or <code>CoffeeScript.nodes</code>. Such tools need to update to take account for changed or added tokens and nodes.</li>
<li>Several minor bug fixes, including:
<ul>
<li>The caught error in <code>catch</code> blocks is no longer declared unnecessarily, and no longer mistakenly named <code>undefined</code> for <code>catch</code>-less <code>try</code> blocks.</li>
<li>Unassignable parameter destructuring no longer crashes the compiler.</li>
<li>Source maps are now used correctly for errors thrown from .coffee.md files.</li>
<li><code>coffee -e 'throw null'</code> no longer crashes.</li>
<li>The REPL no longer crashes when using <code>.exit</code> to exit it.</li>
<li>Invalid JavaScript is no longer output when lots of <code>for</code> loops are used in the same scope.</li>
<li>A unicode issue when using stdin with the CLI.</li>
</ul>
</li>
</ul>

        </section>
        <section id="1.10.0">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.9.3...1.10.0">1.10.0</a>
  <span class="timestamp"> &mdash; <time datetime="2015-09-03">2015-09-03</time></span>
</h3><ul>
<li>CoffeeScript now supports ES2015-style destructuring defaults.</li>
<li><code>(offsetHeight: height) -&gt;</code> no longer compiles. That syntax was accidental and partly broken. Use <code>({offsetHeight: height}) -&gt;</code> instead. Object destructuring always requires braces.</li>
<li>Several minor bug fixes, including:
<ul>
<li>A bug where the REPL would sometimes report valid code as invalid, based on what you had typed earlier.</li>
<li>A problem with multiple JS contexts in the jest test framework.</li>
<li>An error in io.js where strict mode is set on internal modules.</li>
<li>A variable name clash for the caught error in <code>catch</code> blocks.</li>
</ul>
</li>
</ul>

        </section>
        <section id="1.9.3">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.9.2...1.9.3">1.9.3</a>
  <span class="timestamp"> &mdash; <time datetime="2015-05-27">2015-05-27</time></span>
</h3><ul>
<li>Bugfix for interpolation in the first key of an object literal in an implicit call.</li>
<li>Fixed broken error messages in the REPL, as well as a few minor bugs with the REPL.</li>
<li>Fixed source mappings for tokens at the beginning of lines when compiling with the <code>--bare</code> option. This has the nice side effect of generating smaller source maps.</li>
<li>Slight formatting improvement of compiled block comments.</li>
<li>Better error messages for <code>on</code>, <code>off</code>, <code>yes</code> and <code>no</code>.</li>
</ul>

        </section>
        <section id="1.9.2">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.9.1...1.9.2">1.9.2</a>
  <span class="timestamp"> &mdash; <time datetime="2015-04-15">2015-04-15</time></span>
</h3><ul>
<li>Fixed a <strong>watch</strong> mode error introduced in 1.9.1 when compiling multiple files with the same filename.</li>
<li>Bugfix for <code>yield</code> around expressions containing <code>this</code>.</li>
<li>Added a Ruby-style <code>-r</code> option to the REPL, which allows requiring a module before execution with <code>--eval</code> or <code>--interactive</code>.</li>
<li>In <code>&lt;script type=&quot;text/coffeescript&quot;&gt;</code> tags, to avoid possible duplicate browser requests for .coffee files, you can now use the <code>data-src</code> attribute instead of <code>src</code>.</li>
<li>Minor bug fixes for IE8, strict ES5 regular expressions and Browserify.</li>
</ul>

        </section>
        <section id="1.9.1">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.9.0...1.9.1">1.9.1</a>
  <span class="timestamp"> &mdash; <time datetime="2015-02-18">2015-02-18</time></span>
</h3><ul>
<li>Interpolation now works in object literal keys (again). You can use this to dynamically name properties.</li>
<li>Internal compiler variable names no longer start with underscores. This makes the generated JavaScript a bit prettier, and also fixes an issue with the completely broken and ungodly way that AngularJS “parses” function arguments.</li>
<li>Fixed a few <code>yield</code>-related edge cases with <code>yield return</code> and <code>yield throw</code>.</li>
<li>Minor bug fixes and various improvements to compiler error messages.</li>
</ul>

        </section>
        <section id="1.9.0">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.8.0...1.9.0">1.9.0</a>
  <span class="timestamp"> &mdash; <time datetime="2015-01-29">2015-01-29</time></span>
</h3><ul>
<li>CoffeeScript now supports ES2015 generators. A generator is simply a function that <code>yield</code>s.</li>
<li>More robust parsing and improved error messages for strings and regexes — especially with respect to interpolation.</li>
<li>Changed strategy for the generation of internal compiler variable names. Note that this means that <code>@example</code> function parameters are no longer available as naked <code>example</code> variables within the function body.</li>
<li>Fixed REPL compatibility with latest versions of Node and Io.js.</li>
<li>Various minor bug fixes.</li>
</ul>

        </section>
        <section id="1.8.0">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.7.1...1.8.0">1.8.0</a>
  <span class="timestamp"> &mdash; <time datetime="2014-08-26">2014-08-26</time></span>
</h3><ul>
<li>The <code>--join</code> option of the CLI is now deprecated.</li>
<li>Source maps now use <code>.js.map</code> as file extension, instead of just <code>.map</code>.</li>
<li>The CLI now exits with the exit code 1 when it fails to write a file to disk.</li>
<li>The compiler no longer crashes on unterminated, single-quoted strings.</li>
<li>Fixed location data for string interpolations, which made source maps out of sync.</li>
<li>The error marker in error messages is now correctly positioned if the code is indented with tabs.</li>
<li>Fixed a slight formatting error in CoffeeScript’s source map-patched stack traces.</li>
<li>The <code>%%</code> operator now coerces its right operand only once.</li>
<li>It is now possible to require CoffeeScript files from Cakefiles without having to register the compiler first.</li>
<li>The CoffeeScript REPL is now exported and can be required using <code>require 'coffeescript/repl'</code>.</li>
<li>Fixes for the REPL in Node 0.11.</li>
</ul>

        </section>
        <section id="1.7.1">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.7.0...1.7.1">1.7.1</a>
  <span class="timestamp"> &mdash; <time datetime="2014-01-29">2014-01-29</time></span>
</h3><ul>
<li>Fixed a typo that broke node module lookup when running a script directly with the <code>coffee</code> binary.</li>
</ul>

        </section>
        <section id="1.7.0">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.6.3...1.7.0">1.7.0</a>
  <span class="timestamp"> &mdash; <time datetime="2014-01-28">2014-01-28</time></span>
</h3><ul>
<li>When requiring CoffeeScript files in Node you must now explicitly register the compiler. This can be done with <code>require 'coffeescript/register'</code> or <code>CoffeeScript.register()</code>. Also for configuration such as Mocha’s, use <strong>coffeescript/register</strong>.</li>
<li>Improved error messages, source maps and stack traces. Source maps now use the updated <code>//#</code> syntax.</li>
<li>Leading <code>.</code> now closes all open calls, allowing for simpler chaining syntax.</li>
<li>Added <code>**</code>, <code>//</code> and <code>%%</code> operators and <code>...</code> expansion in parameter lists and destructuring expressions.</li>
<li>Multiline strings are now joined by a single space and ignore all indentation. A backslash at the end of a line can denote the amount of whitespace between lines, in both strings and heredocs. Backslashes correctly escape whitespace in block regexes.</li>
<li>Closing brackets can now be indented and therefore no longer cause unexpected error.</li>
<li>Several breaking compilation fixes. Non-callable literals (strings, numbers etc.) don’t compile in a call now and multiple postfix conditionals compile properly. Postfix conditionals and loops always bind object literals. Conditional assignment compiles properly in subexpressions. <code>super</code> is disallowed outside of methods and works correctly inside <code>for</code> loops.</li>
<li>Formatting of compiled block comments has been improved.</li>
<li>No more <code>-p</code> folders on Windows.</li>
<li>The <code>options</code> object passed to CoffeeScript is no longer mutated.</li>
</ul>

        </section>
        <section id="1.6.3">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.6.2...1.6.3">1.6.3</a>
  <span class="timestamp"> &mdash; <time datetime="2013-06-02">2013-06-02</time></span>
</h3><ul>
<li>The CoffeeScript REPL now remembers your history between sessions. Just like a proper REPL should.</li>
<li>You can now use <code>require</code> in Node to load <code>.coffee.md</code> Literate CoffeeScript files. In the browser, <code>text/literate-coffeescript</code> script tags.</li>
<li>The old <code>coffee --lint</code> command has been removed. It was useful while originally working on the compiler, but has been surpassed by JSHint. You may now use <code>-l</code> to pass literate files in over <strong>stdio</strong>.</li>
<li>Bugfixes for Windows path separators, <code>catch</code> without naming the error, and executable-class-bodies-with- prototypal-property-attachment.</li>
</ul>

        </section>
        <section id="1.6.2">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.6.1...1.6.2">1.6.2</a>
  <span class="timestamp"> &mdash; <time datetime="2013-03-18">2013-03-18</time></span>
</h3><ul>
<li>Source maps have been used to provide automatic line-mapping when running CoffeeScript directly via the <code>coffee</code> command, and for automatic line-mapping when running CoffeeScript directly in the browser. Also, to provide better error messages for semantic errors thrown by the compiler — <a href="http://cl.ly/NdOA">with colors, even</a>.</li>
<li>Improved support for mixed literate/vanilla-style CoffeeScript projects, and generating source maps for both at the same time.</li>
<li>Fixes for <strong>1.6.x</strong> regressions with overriding inherited bound functions, and for Windows file path management.</li>
<li>The <code>coffee</code> command can now correctly <code>fork()</code> both <code>.coffee</code> and <code>.js</code> files. (Requires Node.js 0.9+)</li>
</ul>

        </section>
        <section id="1.6.1">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.5.0...1.6.1">1.6.1</a>
  <span class="timestamp"> &mdash; <time datetime="2013-03-05">2013-03-05</time></span>
</h3><ul>
<li>First release of <a href="#source-maps">source maps</a>. Pass the <code>--map</code> flag to the compiler, and off you go. Direct all your thanks over to <a href="https://github.com/jwalton">Jason Walton</a>.</li>
<li>Fixed a 1.5.0 regression with multiple implicit calls against an indented implicit object. Combinations of implicit function calls and implicit objects should generally be parsed better now — but it still isn’t good <em>style</em> to nest them too heavily.</li>
<li><code>.coffee.md</code> is now also supported as a Literate CoffeeScript file extension, for existing tooling. <code>.litcoffee</code> remains the canonical one.</li>
<li>Several minor fixes surrounding member properties, bound methods and <code>super</code> in class declarations.</li>
</ul>

        </section>
        <section id="1.5.0">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.4.0...1.5.0">1.5.0</a>
  <span class="timestamp"> &mdash; <time datetime="2013-02-25">2013-02-25</time></span>
</h3><ul>
<li>First release of <a href="#literate">Literate CoffeeScript</a>.</li>
<li>The CoffeeScript REPL is now based on the Node.js REPL, and should work better and more familiarly.</li>
<li>Returning explicit values from constructors is now forbidden. If you want to return an arbitrary value, use a function, not a constructor.</li>
<li>You can now loop over an array backwards, without having to manually deal with the indexes: <code>for item in list by -1</code></li>
<li>Source locations are now preserved in the CoffeeScript AST, although source maps are not yet being emitted.</li>
</ul>

        </section>
        <section id="1.4.0">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.3.3...1.4.0">1.4.0</a>
  <span class="timestamp"> &mdash; <time datetime="2012-10-23">2012-10-23</time></span>
</h3><ul>
<li>The CoffeeScript compiler now strips Microsoft’s UTF-8 BOM if it exists, allowing you to compile BOM-borked source files.</li>
<li>Fix Node/compiler deprecation warnings by removing <code>registerExtension</code>, and moving from <code>path.exists</code> to <code>fs.exists</code>.</li>
<li>Small tweaks to splat compilation, backticks, slicing, and the error for duplicate keys in object literals.</li>
</ul>

        </section>
        <section id="1.3.3">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.3.1...1.3.3">1.3.3</a>
  <span class="timestamp"> &mdash; <time datetime="2012-05-15">2012-05-15</time></span>
</h3><ul>
<li>Due to the new semantics of JavaScript’s strict mode, CoffeeScript no longer guarantees that constructor functions have names in all runtimes. See <a href="https://github.com/jashkenas/coffeescript/issues/2052">#2052</a> for discussion.</li>
<li>Inside of a nested function inside of an instance method, it’s now possible to call <code>super</code> more reliably (walks recursively up).</li>
<li>Named loop variables no longer have different scoping heuristics than other local variables. (Reverts #643)</li>
<li>Fix for splats nested within the LHS of destructuring assignment.</li>
<li>Corrections to our compile time strict mode forbidding of octal literals.</li>
</ul>

        </section>
        <section id="1.3.1">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.2.0...1.3.1">1.3.1</a>
  <span class="timestamp"> &mdash; <time datetime="2012-04-10">2012-04-10</time></span>
</h3><ul>
<li>CoffeeScript now enforces all of JavaScript’s <strong>Strict Mode</strong> early syntax errors at compile time. This includes old-style octal literals, duplicate property names in object literals, duplicate parameters in a function definition, deleting naked variables, setting the value of <code>eval</code> or <code>arguments</code>, and more. See a full discussion at <a href="https://github.com/jashkenas/coffeescript/issues/1547">#1547</a>.</li>
<li>The REPL now has a handy new multi-line mode for entering large blocks of code. It’s useful when copy-and-pasting examples into the REPL. Enter multi-line mode with <code>Ctrl-V</code>. You may also now pipe input directly into the REPL.</li>
<li>CoffeeScript now prints a <code>Generated by CoffeeScript VERSION</code> header at the top of each compiled file.</li>
<li>Conditional assignment of previously undefined variables <code>a or= b</code> is now considered a syntax error.</li>
<li>A tweak to the semantics of <code>do</code>, which can now be used to more easily simulate a namespace: <code>do (x = 1, y = 2) -&gt; …</code></li>
<li>Loop indices are now mutable within a loop iteration, and immutable between them.</li>
<li>Both endpoints of a slice are now allowed to be omitted for consistency, effectively creating a shallow copy of the list.</li>
<li>Additional tweaks and improvements to <code>coffee --watch</code> under Node’s “new” file watching API. Watch will now beep by default if you introduce a syntax error into a watched script. We also now ignore hidden directories by default when watching recursively.</li>
</ul>

        </section>
        <section id="1.2.0">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.1.3...1.2.0">1.2.0</a>
  <span class="timestamp"> &mdash; <time datetime="2011-12-18">2011-12-18</time></span>
</h3><ul>
<li>Multiple improvements to <code>coffee --watch</code> and <code>--join</code>. You may now use both together, as well as add and remove files and directories within a <code>--watch</code>’d folder.</li>
<li>The <code>throw</code> statement can now be used as part of an expression.</li>
<li>Block comments at the top of the file will now appear outside of the safety closure wrapper.</li>
<li>Fixed a number of minor 1.1.3 regressions having to do with trailing operators and unfinished lines, and a more major 1.1.3 regression that caused bound functions <em>within</em> bound class functions to have the incorrect <code>this</code>.</li>
</ul>

        </section>
        <section id="1.1.3">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.1.2...1.1.3">1.1.3</a>
  <span class="timestamp"> &mdash; <time datetime="2011-11-08">2011-11-08</time></span>
</h3><ul>
<li>Ahh, whitespace. CoffeeScript’s compiled JS now tries to space things out and keep it readable, as you can see in the examples on this page.</li>
<li>You can now call <code>super</code> in class level methods in class bodies, and bound class methods now preserve their correct context.</li>
<li>JavaScript has always supported octal numbers <code>010 is 8</code>, and hexadecimal numbers <code>0xf is 15</code>, but CoffeeScript now also supports binary numbers: <code>0b10 is 2</code>.</li>
<li>The CoffeeScript module has been nested under a subdirectory to make it easier to <code>require</code> individual components separately, without having to use <strong>npm</strong>. For example, after adding the CoffeeScript folder to your path: <code>require('coffeescript/lexer')</code></li>
<li>There’s a new “link” feature in Try CoffeeScript on this webpage. Use it to get a shareable permalink for your example script.</li>
<li>The <code>coffee --watch</code> feature now only works on Node.js 0.6.0 and higher, but now also works properly on Windows.</li>
<li>Lots of small bug fixes from <strong><a href="https://github.com/michaelficarra">@michaelficarra</a></strong>, <strong><a href="https://github.com/geraldalewis">@geraldalewis</a></strong>, <strong><a href="https://github.com/satyr">@satyr</a></strong>, and <strong><a href="https://github.com/trevorburnham">@trevorburnham</a></strong>.</li>
</ul>

        </section>
        <section id="1.1.2">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.1.1...1.1.2">1.1.2</a>
  <span class="timestamp"> &mdash; <time datetime="2011-08-04">2011-08-04</time></span>
</h3><p>Fixes for block comment formatting, <code>?=</code> compilation, implicit calls against control structures, implicit invocation of a try/catch block, variadic arguments leaking from local scope, line numbers in syntax errors following heregexes, property access on parenthesized number literals, bound class methods and super with reserved names, a REPL overhaul, consecutive compiled semicolons, block comments in implicitly called objects, and a Chrome bug.</p>

        </section>
        <section id="1.1.1">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.1.0...1.1.1">1.1.1</a>
  <span class="timestamp"> &mdash; <time datetime="2011-05-10">2011-05-10</time></span>
</h3><p>Bugfix release for classes with external constructor functions, see issue #1182.</p>

        </section>
        <section id="1.1.0">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.0.1...1.1.0">1.1.0</a>
  <span class="timestamp"> &mdash; <time datetime="2011-05-01">2011-05-01</time></span>
</h3><p>When running via the <code>coffee</code> executable, <code>process.argv</code> and friends now report <code>coffee</code> instead of <code>node</code>. Better compatibility with <strong>Node.js 0.4.x</strong> module lookup changes. The output in the REPL is now colorized, like Node’s is. Giving your concatenated CoffeeScripts a name when using <code>--join</code> is now mandatory. Fix for lexing compound division <code>/=</code> as a regex accidentally. All <code>text/coffeescript</code> tags should now execute in the order they’re included. Fixed an issue with extended subclasses using external constructor functions. Fixed an edge-case infinite loop in <code>addImplicitParentheses</code>. Fixed exponential slowdown with long chains of function calls. Globals no longer leak into the CoffeeScript REPL. Splatted parameters are declared local to the function.</p>

        </section>
        <section id="1.0.1">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/1.0.0...1.0.1">1.0.1</a>
  <span class="timestamp"> &mdash; <time datetime="2011-01-31">2011-01-31</time></span>
</h3><p>Fixed a lexer bug with Unicode identifiers. Updated REPL for compatibility with Node.js 0.3.7. Fixed requiring relative paths in the REPL. Trailing <code>return</code> and <code>return undefined</code> are now optimized away. Stopped requiring the core Node.js <code>util</code> module for back-compatibility with Node.js 0.2.5. Fixed a case where a conditional <code>return</code> would cause fallthrough in a <code>switch</code> statement. Optimized empty objects in destructuring assignment.</p>

        </section>
        <section id="1.0.0">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.9.6...1.0.0">1.0.0</a>
  <span class="timestamp"> &mdash; <time datetime="2010-12-24">2010-12-24</time></span>
</h3><p>CoffeeScript loops no longer try to preserve block scope when functions are being generated within the loop body. Instead, you can use the <code>do</code> keyword to create a convenient closure wrapper. Added a <code>--nodejs</code> flag for passing through options directly to the <code>node</code> executable. Better behavior around the use of pure statements within expressions. Fixed inclusive slicing through <code>-1</code>, for all browsers, and splicing with arbitrary expressions as endpoints.</p>

        </section>
        <section id="0.9.6">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.9.5...0.9.6">0.9.6</a>
  <span class="timestamp"> &mdash; <time datetime="2010-12-06">2010-12-06</time></span>
</h3><p>The REPL now properly formats stacktraces, and stays alive through asynchronous exceptions. Using <code>--watch</code> now prints timestamps as files are compiled. Fixed some accidentally-leaking variables within plucked closure-loops. Constructors now maintain their declaration location within a class body. Dynamic object keys were removed. Nested classes are now supported. Fixes execution context for naked splatted functions. Bugfix for inversion of chained comparisons. Chained class instantiation now works properly with splats.</p>

        </section>
        <section id="0.9.5">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.9.4...0.9.5">0.9.5</a>
  <span class="timestamp"> &mdash; <time datetime="2010-11-21">2010-11-21</time></span>
</h3><p>0.9.5 should be considered the first release candidate for CoffeeScript 1.0. There have been a large number of internal changes since the previous release, many contributed from <strong>satyr</strong>’s <a href="https://github.com/satyr/coco">Coco</a> dialect of CoffeeScript. Heregexes (extended regexes) were added. Functions can now have default arguments. Class bodies are now executable code. Improved syntax errors for invalid CoffeeScript. <code>undefined</code> now works like <code>null</code>, and cannot be assigned a new value. There was a precedence change with respect to single-line comprehensions: <code>result = i for i in list</code>
used to parse as <code>result = (i for i in list)</code> by default … it now parses as
<code>(result = i) for i in list</code>.</p>

        </section>
        <section id="0.9.4">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.9.3...0.9.4">0.9.4</a>
  <span class="timestamp"> &mdash; <time datetime="2010-09-21">2010-09-21</time></span>
</h3><p>CoffeeScript now uses appropriately-named temporary variables, and recycles their references after use. Added <code>require.extensions</code> support for <strong>Node.js 0.3</strong>. Loading CoffeeScript in the browser now adds just a single <code>CoffeeScript</code> object to global scope. Fixes for implicit object and block comment edge cases.</p>

        </section>
        <section id="0.9.3">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.9.2...0.9.3">0.9.3</a>
  <span class="timestamp"> &mdash; <time datetime="2010-09-16">2010-09-16</time></span>
</h3><p>CoffeeScript <code>switch</code> statements now compile into JS <code>switch</code> statements — they previously compiled into <code>if/else</code> chains for JavaScript 1.3 compatibility. Soaking a function invocation is now supported. Users of the RubyMine editor should now be able to use <code>--watch</code> mode.</p>

        </section>
        <section id="0.9.2">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.9.1...0.9.2">0.9.2</a>
  <span class="timestamp"> &mdash; <time datetime="2010-08-23">2010-08-23</time></span>
</h3><p>Specifying the start and end of a range literal is now optional, eg. <code>array[3..]</code>. You can now say <code>a not instanceof b</code>. Fixed important bugs with nested significant and non-significant indentation (Issue #637). Added a <code>--require</code> flag that allows you to hook into the <code>coffee</code> command. Added a custom <code>jsl.conf</code> file for our preferred JavaScriptLint setup. Sped up Jison grammar compilation time by flattening rules for operations. Block comments can now be used with JavaScript-minifier-friendly syntax. Added JavaScript’s compound assignment bitwise operators. Bugfixes to implicit object literals with leading number and string keys, as the subject of implicit calls, and as part of compound assignment.</p>

        </section>
        <section id="0.9.1">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.9.0...0.9.1">0.9.1</a>
  <span class="timestamp"> &mdash; <time datetime="2010-08-11">2010-08-11</time></span>
</h3><p>Bugfix release for <strong>0.9.1</strong>. Greatly improves the handling of mixed implicit objects, implicit function calls, and implicit indentation. String and regex interpolation is now strictly <code>#{ … }</code> (Ruby style). The compiler now takes a <code>--require</code> flag, which specifies scripts to run before compilation.</p>

        </section>
        <section id="0.9.0">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.7.2...0.9.0">0.9.0</a>
  <span class="timestamp"> &mdash; <time datetime="2010-08-04">2010-08-04</time></span>
</h3><p>The CoffeeScript <strong>0.9</strong> series is considered to be a release candidate for <strong>1.0</strong>; let’s give her a shakedown cruise. <strong>0.9.0</strong> introduces a massive backwards-incompatible change: Assignment now uses <code>=</code>, and object literals use <code>:</code>, as in JavaScript. This allows us to have implicit object literals, and YAML-style object definitions. Half assignments are removed, in favor of <code>+=</code>, <code>or=</code>, and friends. Interpolation now uses a hash mark <code>#</code> instead of the dollar sign <code>$</code> — because dollar signs may be part of a valid JS identifier. Downwards range comprehensions are now safe again, and are optimized to straight for loops when created with integer endpoints. A fast, unguarded form of object comprehension was added: <code>for all key, value of object</code>. Mentioning the <code>super</code> keyword with no arguments now forwards all arguments passed to the function, as in Ruby. If you extend class <code>B</code> from parent class <code>A</code>, if <code>A</code> has an <code>extended</code> method defined, it will be called, passing in <code>B</code> — this enables static inheritance, among other things. Cleaner output for functions bound with the fat arrow. <code>@variables</code> can now be used in parameter lists, with the parameter being automatically set as a property on the object — useful in constructors and setter functions. Constructor functions can now take splats.</p>

        </section>
        <section id="0.7.2">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.7.1...0.7.2">0.7.2</a>
  <span class="timestamp"> &mdash; <time datetime="2010-07-12">2010-07-12</time></span>
</h3><p>Quick bugfix (right after 0.7.1) for a problem that prevented <code>coffee</code> command-line options from being parsed in some circumstances.</p>

        </section>
        <section id="0.7.1">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.7.0...0.7.1">0.7.1</a>
  <span class="timestamp"> &mdash; <time datetime="2010-07-11">2010-07-11</time></span>
</h3><p>Block-style comments are now passed through and printed as JavaScript block comments – making them useful for licenses and copyright headers. Better support for running coffee scripts standalone via hashbangs. Improved syntax errors for tokens that are not in the grammar.</p>

        </section>
        <section id="0.7.0">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.6.2...0.7.0">0.7.0</a>
  <span class="timestamp"> &mdash; <time datetime="2010-06-28">2010-06-28</time></span>
</h3><p>Official CoffeeScript variable style is now camelCase, as in JavaScript. Reserved words are now allowed as object keys, and will be quoted for you. Range comprehensions now generate cleaner code, but you have to specify <code>by -1</code> if you’d like to iterate downward. Reporting of syntax errors is greatly improved from the previous release. Running <code>coffee</code> with no arguments now launches the REPL, with Readline support. The <code>&lt;-</code> bind operator has been removed from CoffeeScript. The <code>loop</code> keyword was added, which is equivalent to a <code>while true</code> loop. Comprehensions that contain closures will now close over their variables, like the semantics of a <code>forEach</code>. You can now use bound function in class definitions (bound to the instance). For consistency, <code>a in b</code> is now an array presence check, and <code>a of b</code> is an object-key check. Comments are no longer passed through to the generated JavaScript.</p>

        </section>
        <section id="0.6.2">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.6.1...0.6.2">0.6.2</a>
  <span class="timestamp"> &mdash; <time datetime="2010-05-15">2010-05-15</time></span>
</h3><p>The <code>coffee</code> command will now preserve directory structure when compiling a directory full of scripts. Fixed two omissions that were preventing the CoffeeScript compiler from running live within Internet Explorer. There’s now a syntax for block comments, similar in spirit to CoffeeScript’s heredocs. ECMA Harmony DRY-style pattern matching is now supported, where the name of the property is the same as the name of the value: <code>{name, length}: func</code>. Pattern matching is now allowed within comprehension variables. <code>unless</code> is now allowed in block form. <code>until</code> loops were added, as the inverse of <code>while</code> loops. <code>switch</code> statements are now allowed without switch object clauses. Compatible with Node.js <strong>v0.1.95</strong>.</p>

        </section>
        <section id="0.6.1">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.6.0...0.6.1">0.6.1</a>
  <span class="timestamp"> &mdash; <time datetime="2010-04-12">2010-04-12</time></span>
</h3><p>Upgraded CoffeeScript for compatibility with the new Node.js <strong>v0.1.90</strong> series.</p>

        </section>
        <section id="0.6.0">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.5.6...0.6.0">0.6.0</a>
  <span class="timestamp"> &mdash; <time datetime="2010-04-03">2010-04-03</time></span>
</h3><p>Trailing commas are now allowed, a-la Python. Static properties may be assigned directly within class definitions, using <code>@property</code> notation.</p>

        </section>
        <section id="0.5.6">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.5.5...0.5.6">0.5.6</a>
  <span class="timestamp"> &mdash; <time datetime="2010-03-23">2010-03-23</time></span>
</h3><p>Interpolation can now be used within regular expressions and heredocs, as well as strings. Added the <code>&lt;-</code> bind operator. Allowing assignment to half-expressions instead of special <code>||=</code>-style operators. The arguments object is no longer automatically converted into an array. After requiring <code>coffeescript</code>, Node.js can now directly load <code>.coffee</code> files, thanks to <strong>registerExtension</strong>. Multiple splats can now be used in function calls, arrays, and pattern matching.</p>

        </section>
        <section id="0.5.5">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.5.4...0.5.5">0.5.5</a>
  <span class="timestamp"> &mdash; <time datetime="2010-03-08">2010-03-08</time></span>
</h3><p>String interpolation, contributed by <a href="https://github.com/StanAngeloff">Stan Angeloff</a>. Since <code>--run</code> has been the default since <strong>0.5.3</strong>, updating <code>--stdio</code> and <code>--eval</code> to run by default, pass <code>--compile</code> as well if you’d like to print the result.</p>

        </section>
        <section id="0.5.4">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.5.3...0.5.4">0.5.4</a>
  <span class="timestamp"> &mdash; <time datetime="2010-03-03">2010-03-03</time></span>
</h3><p>Bugfix that corrects the Node.js global constants <code>__filename</code> and <code>__dirname</code>. Tweaks for more flexible parsing of nested function literals and improperly-indented comments. Updates for the latest Node.js API.</p>

        </section>
        <section id="0.5.3">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.5.2...0.5.3">0.5.3</a>
  <span class="timestamp"> &mdash; <time datetime="2010-02-27">2010-02-27</time></span>
</h3><p>CoffeeScript now has a syntax for defining classes. Many of the core components (Nodes, Lexer, Rewriter, Scope, Optparse) are using them. Cakefiles can use <code>optparse.coffee</code> to define options for tasks. <code>--run</code> is now the default flag for the <code>coffee</code> command, use <code>--compile</code> to save JavaScripts. Bugfix for an ambiguity between RegExp literals and chained divisions.</p>

        </section>
        <section id="0.5.2">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.5.1...0.5.2">0.5.2</a>
  <span class="timestamp"> &mdash; <time datetime="2010-02-25">2010-02-25</time></span>
</h3><p>Added a compressed version of the compiler for inclusion in web pages as
<code>/v2/browser-compiler/coffeescript.js</code>. It’ll automatically run any script tags with type <code>text/coffeescript</code> for you. Added a <code>--stdio</code> option to the <code>coffee</code> command, for piped-in compiles.</p>

        </section>
        <section id="0.5.1">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.5.0...0.5.1">0.5.1</a>
  <span class="timestamp"> &mdash; <time datetime="2010-02-24">2010-02-24</time></span>
</h3><p>Improvements to null soaking with the existential operator, including soaks on indexed properties. Added conditions to <code>while</code> loops, so you can use them as filters with <code>when</code>, in the same manner as comprehensions.</p>

        </section>
        <section id="0.5.0">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.3.2...0.5.0">0.5.0</a>
  <span class="timestamp"> &mdash; <time datetime="2010-02-21">2010-02-21</time></span>
</h3><p>CoffeeScript 0.5.0 is a major release, While there are no language changes, the Ruby compiler has been removed in favor of a self-hosting compiler written in pure CoffeeScript.</p>

        </section>
        <section id="0.3.2">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.3.0...0.3.2">0.3.2</a>
  <span class="timestamp"> &mdash; <time datetime="2010-02-08">2010-02-08</time></span>
</h3><p><code>@property</code> is now a shorthand for <code>this.property</code>.
Switched the default JavaScript engine from Narwhal to Node.js. Pass the <code>--narwhal</code> flag if you’d like to continue using it.</p>

        </section>
        <section id="0.3.0">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.2.6...0.3.0">0.3.0</a>
  <span class="timestamp"> &mdash; <time datetime="2010-01-26">2010-01-26</time></span>
</h3><p>CoffeeScript 0.3 includes major syntax changes:
The function symbol was changed to <code>-&gt;</code>, and the bound function symbol is now <code>=&gt;</code>.
Parameter lists in function definitions must now be wrapped in parentheses.
Added property soaking, with the <code>?.</code> operator.
Made parentheses optional, when invoking functions with arguments.
Removed the obsolete block literal syntax.</p>

        </section>
        <section id="0.2.6">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.2.5...0.2.6">0.2.6</a>
  <span class="timestamp"> &mdash; <time datetime="2010-01-17">2010-01-17</time></span>
</h3><p>Added Python-style chained comparisons, the conditional existence operator <code>?=</code>, and some examples from <em>Beautiful Code</em>. Bugfixes relating to statement-to-expression conversion, arguments-to-array conversion, and the TextMate syntax highlighter.</p>

        </section>
        <section id="0.2.5">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.2.4...0.2.5">0.2.5</a>
  <span class="timestamp"> &mdash; <time datetime="2010-01-13">2010-01-13</time></span>
</h3><p>The conditions in switch statements can now take multiple values at once — If any of them are true, the case will run. Added the long arrow <code>==&gt;</code>, which defines and immediately binds a function to <code>this</code>. While loops can now be used as expressions, in the same way that comprehensions can. Splats can be used within pattern matches to soak up the rest of an array.</p>

        </section>
        <section id="0.2.4">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.2.3...0.2.4">0.2.4</a>
  <span class="timestamp"> &mdash; <time datetime="2010-01-12">2010-01-12</time></span>
</h3><p>Added ECMAScript Harmony style destructuring assignment, for dealing with extracting values from nested arrays and objects. Added indentation-sensitive heredocs for nicely formatted strings or chunks of code.</p>

        </section>
        <section id="0.2.3">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.2.2...0.2.3">0.2.3</a>
  <span class="timestamp"> &mdash; <time datetime="2010-01-11">2010-01-11</time></span>
</h3><p>Axed the unsatisfactory <code>ino</code> keyword, replacing it with <code>of</code> for object comprehensions. They now look like: <code>for prop, value of object</code>.</p>

        </section>
        <section id="0.2.2">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.2.1...0.2.2">0.2.2</a>
  <span class="timestamp"> &mdash; <time datetime="2010-01-10">2010-01-10</time></span>
</h3><p>When performing a comprehension over an object, use <code>ino</code>, instead of <code>in</code>, which helps us generate smaller, more efficient code at compile time.
Added <code>::</code> as a shorthand for saying <code>.prototype.</code>
The “splat” symbol has been changed from a prefix asterisk <code>*</code>, to a postfix ellipsis <code>...</code>
Added JavaScript’s <code>in</code> operator, empty <code>return</code> statements, and empty <code>while</code> loops.
Constructor functions that start with capital letters now include a safety check to make sure that the new instance of the object is returned.
The <code>extends</code> keyword now functions identically to <code>goog.inherits</code> in Google’s Closure Library.</p>

        </section>
        <section id="0.2.1">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.2.0...0.2.1">0.2.1</a>
  <span class="timestamp"> &mdash; <time datetime="2010-01-05">2010-01-05</time></span>
</h3><p>Arguments objects are now converted into real arrays when referenced.</p>

        </section>
        <section id="0.2.0">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.1.6...0.2.0">0.2.0</a>
  <span class="timestamp"> &mdash; <time datetime="2010-01-05">2010-01-05</time></span>
</h3><p>Major release. Significant whitespace. Better statement-to-expression conversion. Splats. Splice literals. Object comprehensions. Blocks. The existential operator. Many thanks to all the folks who posted issues, with special thanks to <a href="https://github.com/liamoc">Liam O’Connor-Davis</a> for whitespace and expression help.</p>

        </section>
        <section id="0.1.6">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.1.5...0.1.6">0.1.6</a>
  <span class="timestamp"> &mdash; <time datetime="2009-12-27">2009-12-27</time></span>
</h3><p>Bugfix for running <code>coffee --interactive</code> and <code>--run</code> from outside of the CoffeeScript directory. Bugfix for nested function/if-statements.</p>

        </section>
        <section id="0.1.5">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.1.4...0.1.5">0.1.5</a>
  <span class="timestamp"> &mdash; <time datetime="2009-12-26">2009-12-26</time></span>
</h3><p>Array slice literals and array comprehensions can now both take Ruby-style ranges to specify the start and end. JavaScript variable declaration is now pushed up to the top of the scope, making all assignment statements into expressions. You can use <code>\</code> to escape newlines. The <code>coffeescript</code> command is now called <code>coffee</code>.</p>

        </section>
        <section id="0.1.4">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.1.3...0.1.4">0.1.4</a>
  <span class="timestamp"> &mdash; <time datetime="2009-12-25">2009-12-25</time></span>
</h3><p>The official CoffeeScript extension is now <code>.coffee</code> instead of <code>.cs</code>, which properly belongs to <a href="https://en.wikipedia.org/wiki/C_Sharp_(programming_language)">C#</a>. Due to popular demand, you can now also use <code>=</code> to assign. Unlike JavaScript, <code>=</code> can also be used within object literals, interchangeably with <code>:</code>. Made a grammatical fix for chained function calls like <code>func(1)(2)(3)(4)</code>. Inheritance and super no longer use <code>__proto__</code>, so they should be IE-compatible now.</p>

        </section>
        <section id="0.1.3">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.1.2...0.1.3">0.1.3</a>
  <span class="timestamp"> &mdash; <time datetime="2009-12-25">2009-12-25</time></span>
</h3><p>The <code>coffee</code> command now includes <code>--interactive</code>, which launches an interactive CoffeeScript session, and <code>--run</code>, which directly compiles and executes a script. Both options depend on a working installation of Narwhal. The <code>aint</code> keyword has been replaced by <code>isnt</code>, which goes together a little smoother with <code>is</code>. Quoted strings are now allowed as identifiers within object literals: eg. <code>{&quot;5+5&quot;: 10}</code>. All assignment operators now use a colon: <code>+:</code>, <code>-:</code>, <code>*:</code>, etc.</p>

        </section>
        <section id="0.1.2">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.1.1...0.1.2">0.1.2</a>
  <span class="timestamp"> &mdash; <time datetime="2009-12-24">2009-12-24</time></span>
</h3><p>Fixed a bug with calling <code>super()</code> through more than one level of inheritance, with the re-addition of the <code>extends</code> keyword. Added experimental <a href="http://narwhaljs.org/">Narwhal</a> support (as a Tusk package), contributed by <a href="http://blog.tlrobinson.net/">Tom Robinson</a>, including <strong>bin/cs</strong> as a CoffeeScript REPL and interpreter. New <code>--no-wrap</code> option to suppress the safety function wrapper.</p>

        </section>
        <section id="0.1.1">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/0.1.0...0.1.1">0.1.1</a>
  <span class="timestamp"> &mdash; <time datetime="2009-12-24">2009-12-24</time></span>
</h3><p>新增 <code>instanceof</code> 和 <code>typeof</code> 運算子。</p>

        </section>
        <section id="0.1.0">
          <h3><a href="https://github.com/jashkenas/coffeescript/compare/8e9d637985d2dc9b44922076ad54ffef7fa8e9c2...0.1.0">0.1.0</a>
  <span class="timestamp"> &mdash; <time datetime="2009-12-24">2009-12-24</time></span>
</h3><p>最初的 CoffeeScript 版本。</p>

        </section>
      </section>
    </main>
  </div>
</div>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js" integrity="sha384-xBuQ/xzmlsLoJpyjoggmTEz8OWUFM0/RC5BsqQBDX2v5cMvDHcMakNTNrHIW2I5f" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/combine/npm/codemirror@5.37.0/lib/codemirror.js,npm/codemirror@5.37.0/mode/coffeescript/coffeescript.js,npm/codemirror@5.37.0/addon/lint/coffeescript-lint.js,npm/codemirror@5.37.0/mode/javascript/javascript.js"></script>

<script src="browser-compiler/coffeescript.js"></script>
<script>
(function(){window.location.origin||(window.location.origin=window.location.protocol+'//'+window.location.hostname),window.GA_TRACKING_ID='UA-106156830-1',null==window.dataLayer&&(window.dataLayer=[]),window.gtag=function(){window.dataLayer.push(arguments)},window.gtag('js',new Date),window.gtag('config',window.GA_TRACKING_ID),$(document).ready(function(){var clearHash,closeTry,editors,initializeEditor,initializeScrollspyFromHash,initializeTryEditors,lastCompilationElapsedTime,previousHash,replaceState,textareas,toggleSidebar,toggleTry;if($('time').each(function(index,el){var date,formattedDate;return date=el.dateTime||$(el).text(),formattedDate=new Date(date).toLocaleDateString(void 0,{year:'numeric',month:'long',day:'numeric'}),$(el).text(formattedDate.toString())}),toggleSidebar=function(){return $('.navbar-toggler, .sidebar').toggleClass('show')},$('[data-toggle="offcanvas"]').click(toggleSidebar),$('[data-action="sidebar-nav"]').click(function(event){return $('.navbar-toggler').is(':visible')&&(event.preventDefault(),toggleSidebar(),setTimeout(function(){return window.location=event.target.href},260)),gtag('event','sidebar_navigate',{event_category:'navigation',event_label:event.target.href.replace(window.location.origin,'')})}),$('.main').scrollspy({target:'#contents',offset:Math.round($('main').css('padding-top').replace('px',''))}),initializeScrollspyFromHash=function(hash){return $('#contents a.active[href!=\''+hash+'\']').removeClass('show')},$('.main').on('activate.bs.scrollspy',function(event,target){var $target;if($('#contents a.active[href!=\''+target.relatedTarget+'\']').removeClass('show'),$target=$('#contents a[href=\''+target.relatedTarget+'\']'),$target.prop('href')!==window.location.origin+'/#try')return replaceState($target.prop('href')),gtag('config',GA_TRACKING_ID,{page_path:$target.prop('href').replace(window.location.origin,'')})}),textareas=[],editors=[],lastCompilationElapsedTime=200,$('textarea').each(function(index){return textareas[index]=this,$(this).data('index',index)}),initializeEditor=function($textarea){var editor,index,mode,pending;if(index=$textarea.data('index'),mode=$textarea.hasClass('javascript-output')?'javascript':'coffeescript',editors[index]=editor=CodeMirror.fromTextArea($textarea[0],{mode:mode,theme:'twilight',indentUnit:2,tabSize:2,lineWrapping:!0,lineNumbers:!1,inputStyle:'contenteditable',readOnly:'coffeescript'!==mode,viewportMargin:2e308}),'coffeescript'===mode)return pending=null,editor.on('change',function(){return clearTimeout(pending),pending=setTimeout(function(){var coffee,exception,lastCompilationStartTime,link,output;lastCompilationStartTime=Date.now();try{if(coffee=editor.getValue(),0===index&&$('#try').hasClass('show')){$('#try').hasClass('show')&&(link='try:'+encodeURIComponent(coffee),replaceState(window.location.href.split('#')[0]+'#'+link));try{null!=window.localStorage&&window.localStorage.setItem('tryCoffeeScriptCode',coffee)}catch(error){exception=error}}output=CoffeeScript.compile(coffee,{bare:!0}),lastCompilationElapsedTime=Math.max(200,Date.now()-lastCompilationStartTime)}catch(error){exception=error,output=''+exception}return editors[index+1].setValue(output),gtag('event','edit_code',{event_category:'engagement',event_label:$textarea.closest('[data-example]').data('example')})},lastCompilationElapsedTime)}),editor.addKeyMap({Tab:function Tab(cm){return cm.somethingSelected()?cm.indentSelection('add'):/^\t/m.test(cm.getValue())?cm.execCommand('insertTab'):cm.execCommand('insertSoftTab')},"Shift-Tab":function ShiftTab(cm){return cm.indentSelection('subtract')},Enter:function Enter(cm){return cm.options.indentWithTabs=/^\t/m.test(cm.getValue()),cm.execCommand('newlineAndIndent')}})},$('.placeholder-code').one('mouseover',function(){var $siblingColumn,$textarea;return $textarea=$(this).prev('textarea'),$(this).remove(),initializeEditor($textarea),$siblingColumn=$($textarea.parent().siblings()[0]),$siblingColumn.children('.placeholder-code').remove(),initializeEditor($($siblingColumn.children('textarea')[0]))}),initializeTryEditors=function(){return initializeEditor($('#try-coffeescript-coffee')),initializeEditor($('#try-coffeescript-js'))},$('[data-action="run-code-example"]').click(function(){var index,js,run;return run=$(this).data('run'),index=$('#'+$(this).data('example')+'-js').data('index'),js=null==editors[index]?$(textareas[index]).val():editors[index].getValue(),!0!==run&&(js=js+'\nalert('+unescape(run)+');'),window.eval(js),gtag('event','run_code',{event_category:'engagement',event_label:$(this).closest('[data-example]').data('example')})}),previousHash=null,toggleTry=function(checkLocalStorage){var coffee,exception;if($('#try, #try-link').toggleClass('show'),!$('#try').hasClass('show'))return previousHash?replaceState(previousHash):clearHash();if(window.location.hash&&(previousHash=window.location.hash),0===$('#try .CodeMirror').length&&initializeTryEditors(),checkLocalStorage&&null!=window.localStorage)try{return coffee=window.localStorage.getItem('tryCoffeeScriptCode'),null==coffee?replaceState('#try'):editors[0].setValue(coffee)}catch(error){return exception=error,replaceState('#try')}else return replaceState('#try')},closeTry=function(){return $('#try, #try-link').removeClass('show'),previousHash?replaceState(previousHash):clearHash()},$('[data-toggle="try"]').click(function(event){return event.preventDefault(),toggleTry(!0)}),$('[data-close="try"]').click(closeTry),$('[data-action="scroll-to-top"]').click(function(){if(!$('#try').hasClass('show'))return $('.main')[0].scrollTop=0,setTimeout(clearHash,10)}),clearHash=function(){return window.history.replaceState({},document.title,window.location.pathname)},replaceState=function(newURL){return 0===(null==newURL?void 0:newURL.indexOf('#'))&&(newURL=''+window.location.pathname+newURL),window.history.replaceState({},document.title,newURL||'')},$(window).on('hashchange',function(){if(''===window.location.hash)return clearHash()}),null!=window.location.hash){if('#try'===window.location.hash)return toggleTry(!0);if(0===window.location.hash.indexOf('#try'))return 0===$('#try .CodeMirror').length&&initializeTryEditors(),editors[0].setValue(decodeURIComponent(window.location.hash.slice(5))),toggleTry(!1);if(''===window.location.hash)return clearHash();if(initializeScrollspyFromHash(window.location.hash),1<window.location.hash.length)return document.getElementById(window.location.hash.slice(1).replace(/try:.*/,'')).scrollIntoView()}})}).call(this);
</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-106156830-1"></script>

</body>
</html>
